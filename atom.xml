<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[kaelinda]]></title>
  <link href="http://kaelinda.top/atom.xml" rel="self"/>
  <link href="http://kaelinda.top/"/>
  <updated>2019-03-20T15:12:25+08:00</updated>
  <id>http://kaelinda.top/</id>
  <author>
    <name><![CDATA[]]></name>
    
  </author>
  <generator uri="http://www.mweb.im/">MWeb</generator>
  
  <entry>
    <title type="html"><![CDATA[äº‹ä»¶ä¼ é€’ && å“åº”é“¾]]></title>
    <link href="http://kaelinda.top/15820796939326.html"/>
    <updated>2020-02-19T10:34:53+08:00</updated>
    <id>http://kaelinda.top/15820796939326.html</id>
    <content type="html"><![CDATA[
<p><img src="https://tva1.sinaimg.cn/large/0082zybply1gc1i90sum6j31h80u0aui.jpg" alt="äº‹ä»¶ä¼ é€’ &amp;&amp; å“åº”é“¾"/><br/>
1</p>

<p><img src="https://tva1.sinaimg.cn/large/0082zybply1gc1idyxvcej30v80u0k0y.jpg" alt="hitText:event:æ–¹æ³•å®ç°é€»è¾‘"/></p>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[æ­å»ºSSR]]></title>
    <link href="http://kaelinda.top/15813277247140.html"/>
    <updated>2020-02-10T17:42:04+08:00</updated>
    <id>http://kaelinda.top/15813277247140.html</id>
    <content type="html"><![CDATA[
<h2 id="toc_0">ssh è¿œç¨‹ç™»å½• è‡ªå·±çš„æœåŠ¡å™¨</h2>

<pre><code class="language-text">ssh root@192.168.22.11
</code></pre>

<p>è®¿é—®å…¬é’¥<br/>
è¾“å…¥yeså³å¯<br/>
è¾“å…¥ è¿œç¨‹ç™»å½• å¯†ç </p>

<h2 id="toc_1">å®‰è£…Git</h2>

<pre><code class="language-text">yum -y install git
</code></pre>

<h2 id="toc_2">å®‰è£…SSR</h2>

<ul>
<li>æ–¹æ¡ˆ 1</li>
</ul>

<pre><code class="language-bash">ss-fly/ss-fly.sh -i **** 55555
</code></pre>

<ul>
<li>æ–¹æ¡ˆ 2</li>
</ul>

<pre><code class="language-text">wget --no-check-certificate https://raw.githubusercontent.com/teddysun/shadowsocks_install/master/shadowsocksR.sh
chmod +x shadowsocksR.sh
./shadowsocksR.sh 2&gt;&amp;1 | tee shadowsocksR.log
</code></pre>

<h2 id="toc_3">çŠ¶æ€æŸ¥çœ‹ &amp;&amp; çŠ¶æ€æ“ä½œ</h2>

<pre><code class="language-text">å¯åŠ¨ï¼š/etc/init.d/shadowsocks startÂ 
åœæ­¢ï¼š/etc/init.d/shadowsocks stopÂ 
é‡å¯ï¼š/etc/init.d/shadowsocks restartÂ 
çŠ¶æ€ï¼š/etc/init.d/shadowsocks status
</code></pre>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[ç¼–è¯‘ && é“¾æ¥]]></title>
    <link href="http://kaelinda.top/15821643064568.html"/>
    <updated>2020-02-20T10:05:06+08:00</updated>
    <id>http://kaelinda.top/15821643064568.html</id>
    <content type="html"><![CDATA[
<p>iOSå¼€å‘ä¸­ç¼–è¯‘é“¾æ¥è¿‡ç¨‹ï¼š</p>

<ul>
<li>é¢„å¤„ç† ï¼ˆPrepressingï¼‰</li>
<li>é™æ€è¯­æ³•æ£€æµ‹ ç”ŸæˆAST(Analyze Static)</li>
<li>ç¼–è¯‘ ï¼ˆCompilationï¼‰</li>
<li>æ±‡ç¼– ï¼ˆAssemblyï¼‰</li>
<li>é“¾æ¥ ï¼ˆLinkingï¼‰</li>
</ul>

<p>å†™å¥½ä»£ç åï¼Œ LLVM ä¼šé¢„å¤„ç†ä»£ç ï¼Œæ¯”å¦‚æŠŠå®åµŒå…¥åˆ°å¯¹åº”çš„ä½ç½®ï¼›<br/>
é¢„å¤„ç†å®Œæˆåï¼Œ LLVM ä¼šå¯¹ä»£ç è¿›è¡Œè¯æ³•åˆ†æå’Œè¯­æ³•åˆ†æï¼Œç”Ÿæˆ AST , AST æ˜¯æŠ½è±¡è¯­æ³•æ ‘ï¼Œç»“æ„ä¸Šæ¯”ä»£ç æ›´ç²¾ç®€ï¼Œéå†èµ·æ¥æ›´å¿«ï¼Œæ‰€ä»¥ä½¿ç”¨ AST èƒ½å¤Ÿå¿«é€Ÿçš„è¿›è¡Œé™æ€æ£€æŸ¥ï¼ŒåŒæ—¶è¿˜èƒ½æ›´å¿«åœ°ç”Ÿæˆç”Ÿæˆ IR (ä¸­é—´è¡¨ç¤º)<br/>
æœ€å AST ä¼šç”Ÿæˆ IR, IR æ˜¯ä¸€ç§æ›´è¿‘æœºå™¨ç çš„è¯­è¨€åŒºåˆ«åœ¨äºå’Œå¹³å°æ— å…³ï¼Œé€šè¿‡ IR å¯ä»¥ç”Ÿæˆå¤šåˆ†é€‚åˆä¸åŒå¹³å°çš„æœºå™¨ç ã€‚å¯¹äºiOSç³»ç»Ÿï¼ŒIR ç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶å°±æ˜¯ Mach-O.</p>

<p>é¢„å¤„ç†  ------ é™æ€è¯­æ³•æ£€æµ‹ ------ ASTæŠ½è±¡è¯­æ³•æ ‘ ------ IR ----- </p>

<h2 id="toc_0">é“¾æ¥å™¨</h2>

<p>é“¾æ¥å™¨æœ€ä¸»è¦çš„ä½œç”¨ï¼Œå°±æ˜¯å°†ç¬¦å·ç»‘å®šåˆ°åœ°å€ä¸Šã€‚</p>

<h2 id="toc_1">ç¼–è¯‘å™¨</h2>

<p>ä¸ºä»€ä¹ˆ iOSä»£ç å¿«ï¼Ÿ</p>

<p>iOS ç¼–å†™çš„ä»£ç æ˜¯å…ˆä½¿ç”¨ç¼–è¯‘å™¨æŠŠä»£ç ç¼–è¯‘æˆæœºå™¨ç ï¼ˆOC --&gt; C/C++ --&gt; æœºå™¨ç ï¼‰ï¼Œç„¶åç›´æ¥åœ¨ CPU ä¸Šæ‰§è¡Œæœºå™¨ç çš„ã€‚</p>

<p>Python ç¼–å†™çš„ä»£ç ï¼Œæ˜¯ç¨‹åºåœ¨CPUè¿è¡Œæ—¶ï¼Œç”¨è§£é‡Šå™¨è·å–æºç  ç›´æ¥ç”ŸæˆæŒ‡ä»¤ï¼Œä¸­é—´ä¸ä¼šäº§ç”Ÿå¦ä¸€ç§ä»£ç ã€‚</p>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[RunLoopæ”»åš]]></title>
    <link href="http://kaelinda.top/15808664810026.html"/>
    <updated>2020-02-05T09:34:41+08:00</updated>
    <id>http://kaelinda.top/15808664810026.html</id>
    <content type="html"><![CDATA[
<h2 id="toc_0">ä»€ä¹ˆæ˜¯RunLoop</h2>

<p>é¡¾åæ€ä¹‰ï¼ŒRunLoopå°±æ˜¯ä¸€ä¸ªä¿è¯ç¨‹åºæˆ–è€…çº¿ç¨‹æŒç»­è¿è¡Œçš„å¾ªç¯ã€‚</p>

<h2 id="toc_1">runloop ä½œç”¨</h2>

<ul>
<li><strong>ä¿æŒç¨‹åºæŒç»­è¿è¡Œ</strong>ã€‚</li>
<li><strong>å¤„ç†å„ç§äº‹ä»¶</strong> ï¼šè§¦æ‘¸äº‹ä»¶ã€å®šæ—¶å™¨æ—¶é—´ã€selectoräº‹ä»¶ã€ç½‘ç»œè¯·æ±‚ç­‰</li>
<li><strong>èŠ‚çœCPUèµ„æºï¼Œæé«˜ç¨‹åºæ€§èƒ½</strong>ï¼šè¯¥å¹²æ´»å„¿æ—¶å¹²æ´»å„¿ï¼Œè¯¥ä¼‘æ¯æ—¶ä¼‘æ¯</li>
</ul>

<p><strong>æ¯ä¸€ä¸ªçº¿ç¨‹ï¼Œåªå¯¹åº”å”¯ä¸€ä¸€ä¸ªRunloop</strong><br/>
iOSå¼€å‘ä¸­ï¼ŒUIApplicationMain å‡½æ•°å¯åŠ¨äº†ä¸»çº¿ç¨‹çš„ <code>ä¸»RunLoop</code>ï¼Œä¿è¯ç¨‹åºçš„ä¸»çº¿ç¨‹çš„è¿è¡ŒçŠ¶æ€ï¼Œè¿™æ ·UIå°±ä¸ä¼šå¡é¡¿ã€‚ä¸»çº¿ç¨‹ä¸­çš„runloopæ˜¯ç³»ç»Ÿä¸»åŠ¨å¼€å¯çš„ï¼Œå¼€å‘è€…æ‰‹åŠ¨å¼€å¯çš„å­çº¿ç¨‹å†…çš„runloopå¦‚æœä¸æ‰‹åŠ¨å¼€å¯ï¼Œå­çº¿ç¨‹æ‰§è¡Œå®Œå°±ç»“æŸäº†ï¼Œçº¿ç¨‹å°±é”€æ¯äº†ã€‚æ‰€ä»¥ï¼Œè¦æƒ³æ‰‹åŠ¨å¼€å¯çš„ä¸»çº¿ç¨‹æ‰§è¡Œå®Œä»»åŠ¡åä¸è¢«é”€æ¯ï¼Œå°±éœ€è¦æ‰‹åŠ¨å¯åŠ¨<code>RunLoop</code>.</p>

<pre><code class="language-c">int main(int argc, char * argv[]) {
    @autoreleasepool {
        return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class]));
    }
}
</code></pre>

<h2 id="toc_2">RunLoopçš„äº”ä¸ªæ¨¡å¼</h2>

<ul>
<li><code>kCFRunLoopDefaultMode</code>ï¼šAPPé»˜è®¤çš„æ¨¡å¼ï¼Œé€šå¸¸ä¸»çº¿ç¨‹å°±æ˜¯åœ¨è¿™ä¸ªæ¨¡å¼ä¸‹è¿è¡Œ</li>
<li><code>UITrackingRunLoopMode</code>: ç•Œé¢è·Ÿè¸ªæ¨¡å¼ï¼Œç”¨äºscrollViewè·Ÿè¸ªè§¦æ‘¸æ»šåŠ¨ï¼Œä¿è¯æ»šåŠ¨æ—¶å€™ ä¸å—å…¶ä»–çº¿ç¨‹å½±å“</li>
<li><code>kCFRunLoopCommonModes</code> : å ä½ç”¨çš„modeï¼Œä¸æ˜¯ä¸€ä¸ªçœŸæ­£çš„mode</li>
<li><code>NSRunLoopCommonModes</code>: ç›¸å½“äº <code>NSDefaultRunLoopMode</code> + <code>UITrackingRunLoopMode</code></li>
<li><code>UIInitializationRunLoopMode</code>: åˆšå¯åŠ¨APPæ—¶ï¼Œè¿›å…¥çš„ç¬¬ä¸€ä¸ªmodeå¯åŠ¨å®Œåä¸å†ä½¿ç”¨</li>
<li><code>GSEventReceiveRunLoopMode</code>:æ¥å—ç³»ç»Ÿäº‹ä»¶çš„å†…éƒ¨modeï¼Œé€šå¸¸ç”¨ä¸åˆ°</li>
</ul>

<p><strong>æ¨¡å¼ä½¿ç”¨æ€»ç»“ï¼š</strong></p>

<blockquote>
<ol>
<li>ä¸€ä¸ªRunLoopåŒ…å«å¤šä¸ªmodeï¼Œæ¯ä¸ªmodeåŒ…å«è‹¥å¹²source0ã€source1ã€observerã€timer</li>
<li>RunLoop åªèƒ½é€‰æ‹©ä¸€ä¸ªmodeä½œä¸ºcurrentRunLoopçš„modeã€‚</li>
<li>å¦‚æœæƒ³è¦åˆ‡æ¢modeï¼Œéœ€è¦å…ˆé€€å‡ºå½“å‰modeï¼Œå†é‡æ–°é€‰æ‹©ä¸€ä¸ªmodeè¿›å…¥</li>
<li>ä¸åŒç»„çš„Sourceã€timerã€observer äº’ä¸å½±å“</li>
<li>å¦‚æœModeé‡Œé¢æ²¡æœ‰ä»»ä½•çš„sourceã€timerã€observerï¼Œ RunLoopä¼šç«‹é©¬é€€å‡ºï¼Œ</li>
</ol>
</blockquote>

<h2 id="toc_3">RunLoop å¯¹è±¡</h2>

<blockquote>
<p>iOSå¼€å‘ä¸­æœ‰ä¸¤å¥—APIæ¥è®¿é—®å’Œä½¿ç”¨RunLoop</p>
</blockquote>

<ul>
<li><strong>Foundation</strong>ï¼š<code>NSRunLoop</code></li>
<li><strong>Core Foundation</strong>ï¼š<code>CFRunLoopRef</code></li>
</ul>

<p>NSRunLoop å’Œ CFRunLoopRef éƒ½ä»£è¡¨RunLoopå¯¹è±¡ã€‚<br/>
NSRunLoop æ˜¯åŸºäºCFRunLoopRefçš„ä¸€å±‚OCå°è£…ã€‚</p>

<h2 id="toc_4">è·å–RunLoop çš„ API ä½¿ç”¨ï¼š</h2>

<pre><code class="language-c">Foundation
[NSRunLoop currentRunLoop]; // è·å¾—å½“å‰çº¿ç¨‹çš„RunLoopå¯¹è±¡
[NSRunLoop mainRunLoop]; // è·å¾—ä¸»çº¿ç¨‹çš„RunLoopå¯¹è±¡

Core Foundation
CFRunLoopGetCurrent(); // è·å¾—å½“å‰çº¿ç¨‹çš„RunLoopå¯¹è±¡
CFRunLoopGetMain(); // è·å¾—ä¸»çº¿ç¨‹çš„RunLoopå¯¹è±¡
</code></pre>

<h2 id="toc_5">RunLoop å’Œ çº¿ç¨‹ä¹‹é—´çš„å…³ç³»</h2>

<ul>
<li>æ¯ä¸ªçº¿ç¨‹éƒ½æœ‰å¯¹åº”ä¸€ä¸ªå”¯ä¸€çš„RunLoopå¯¹è±¡</li>
<li>RunLoopä¿å­˜åœ¨ä¸€ä¸ªå…¨å±€é”®å€¼å¯¹é‡Œï¼Œçº¿ç¨‹ä½œä¸ºkey,RunLoopä½œä¸ºvalue</li>
<li>ä¸»çº¿ç¨‹çš„RunLoopç³»ç»Ÿåˆ›å»ºå¹¶å¯åŠ¨å¥½äº†ï¼Œå­çº¿ç¨‹çš„RunLoopéœ€è¦æ‰‹åŠ¨åˆ›å»º</li>
<li>RunLoopåœ¨ç¬¬ä¸€æ¬¡è·å–æ—¶åˆ›å»ºï¼Œåœ¨çº¿ç¨‹ç»“æŸæ—¶é”€æ¯</li>
<li>çº¿ç¨‹åˆ›å»ºæ—¶å€™ï¼Œå¹¶æ²¡æœ‰RunLoopå¯¹è±¡ï¼Œæ‰€ä»¥ï¼Œæ‰§è¡Œå®Œä»£ç çº¿ç¨‹å°±é”€æ¯äº†ã€‚ç¬¬ä¸€æ¬¡è·å–çº¿ç¨‹å¯¹è±¡æ—¶å€™åˆ›å»ºRunLoopå¯¹è±¡ï¼Œè¿™æ—¶å€™æ‰ä¼šå¾ªç¯ç­‰å¾…ï¼Œä¿è¯çº¿ç¨‹ä¸ç»“æŸï¼Œä¸è¢«é”€æ¯ã€‚</li>
<li>RunLoopä¼šåœ¨çº¿ç¨‹ç»“æŸæ—¶é”€æ¯</li>
<li></li>
</ul>

<h2 id="toc_6">RunLoopæºç </h2>

<h3 id="toc_7">RunLoop ç»“æ„ä½“</h3>

<pre><code class="language-objectivec">struct __CFRunLoop {
    CFRuntimeBase _base;
    pthread_mutex_t _lock;          /* locked for accessing mode list */
    __CFPort _wakeUpPort;           // used for CFRunLoopWakeUp 
    Boolean _unused;
    volatile _per_run_data *_perRunData;              // reset for runs of the run loop
    pthread_t _pthread;
    uint32_t _winthread;
    CFMutableSetRef _commonModes;
    CFMutableSetRef _commonModeItems;
    CFRunLoopModeRef _currentMode;
    CFMutableSetRef _modes;
    struct _block_item *_blocks_head;
    struct _block_item *_blocks_tail;
    CFAbsoluteTime _runTime;
    CFAbsoluteTime _sleepTime;
    CFTypeRef _counterpart;
};
</code></pre>

<h3 id="toc_8">runloop å†…éƒ¨å®ç°æºç </h3>

<pre><code class="language-c">// æ‹¿åˆ°å½“å‰Runloop è°ƒç”¨_CFRunLoopGet0
CFRunLoopRef CFRunLoopGetCurrent(void) {
    CHECK_FOR_FORK();
    CFRunLoopRef rl = (CFRunLoopRef)_CFGetTSD(__CFTSDKeyRunLoop);
    if (rl) return rl;
    return _CFRunLoopGet0(pthread_self());
}

// æŸ¥çœ‹_CFRunLoopGet0æ–¹æ³•å†…éƒ¨
CF_EXPORT CFRunLoopRef _CFRunLoopGet0(pthread_t t) {
    if (pthread_equal(t, kNilPthreadT)) {
    t = pthread_main_thread_np();
    }
    __CFLock(&amp;loopsLock);
    if (!__CFRunLoops) {
        __CFUnlock(&amp;loopsLock);
    CFMutableDictionaryRef dict = CFDictionaryCreateMutable(kCFAllocatorSystemDefault, 0, NULL, &amp;kCFTypeDictionaryValueCallBacks);
    // æ ¹æ®ä¼ å…¥çš„ä¸»çº¿ç¨‹è·å–ä¸»çº¿ç¨‹å¯¹åº”çš„RunLoop
    CFRunLoopRef mainLoop = __CFRunLoopCreate(pthread_main_thread_np());
    // ä¿å­˜ä¸»çº¿ç¨‹ å°†ä¸»çº¿ç¨‹-keyå’ŒRunLoop-Valueä¿å­˜åˆ°å­—å…¸ä¸­
    CFDictionarySetValue(dict, pthreadPointer(pthread_main_thread_np()), mainLoop);
    if (!OSAtomicCompareAndSwapPtrBarrier(NULL, dict, (void * volatile *)&amp;__CFRunLoops)) {
        CFRelease(dict);
    }
    CFRelease(mainLoop);
        __CFLock(&amp;loopsLock);
    }
    
    // ä»å­—å…¸é‡Œé¢æ‹¿ï¼Œå°†çº¿ç¨‹ä½œä¸ºkeyä»å­—å…¸é‡Œè·å–ä¸€ä¸ªloop
    CFRunLoopRef loop = (CFRunLoopRef)CFDictionaryGetValue(__CFRunLoops, pthreadPointer(t));
    __CFUnlock(&amp;loopsLock);
    
    // å¦‚æœloopä¸ºç©ºï¼Œåˆ™åˆ›å»ºä¸€ä¸ªæ–°çš„loopï¼Œæ‰€ä»¥runloopä¼šåœ¨ç¬¬ä¸€æ¬¡è·å–çš„æ—¶å€™åˆ›å»º
    if (!loop) {  
    CFRunLoopRef newLoop = __CFRunLoopCreate(t);
        __CFLock(&amp;loopsLock);
    loop = (CFRunLoopRef)CFDictionaryGetValue(__CFRunLoops, pthreadPointer(t));
    
    // åˆ›å»ºå¥½ä¹‹åï¼Œä»¥çº¿ç¨‹ä¸ºkey runloopä¸ºvalueï¼Œä¸€å¯¹ä¸€å­˜å‚¨åœ¨é”®å€¼å¯¹ä¸­ï¼Œä¸‹æ¬¡è·å–çš„æ—¶å€™ï¼Œåˆ™ç›´æ¥è¿”å›å­—å…¸å†…çš„runloop
    if (!loop) { 
        CFDictionarySetValue(__CFRunLoops, pthreadPointer(t), newLoop);
        loop = newLoop;
    }
        // don&#39;t release run loops inside the loopsLock, because CFRunLoopDeallocate may end up taking it
        __CFUnlock(&amp;loopsLock);
    CFRelease(newLoop);
    }
    if (pthread_equal(t, pthread_self())) {
        _CFSetTSD(__CFTSDKeyRunLoop, (void *)loop, NULL);
        if (0 == _CFGetTSD(__CFTSDKeyRunLoopCntr)) {
            _CFSetTSD(__CFTSDKeyRunLoopCntr, (void *)(PTHREAD_DESTRUCTOR_ITERATIONS-1), (void (*)(void *))__CFFinalizeRunLoop);
        }
    }
    return loop;
}
</code></pre>

<h3 id="toc_9">RunLoop ä¸­çš„äº”ä¸ªç±»</h3>

<ul>
<li>CFRunLoopRef</li>
<li>CFRunLoopModeRef</li>
<li>CFRunLoopSourceRef</li>
<li>CFRunLoopTimerRef</li>
<li>CFRunLoopObserverRef</li>
</ul>

<p><img src="https://tva1.sinaimg.cn/large/0082zybply1gbnw55ovroj30bc04v74q.jpg" alt="CFRunLoopRef"/></p>

<p><img src="https://tva1.sinaimg.cn/large/0082zybply1gbnwqpdabdj30dw054t99.jpg" alt="CFRunLoopModeRef"/></p>

<h3 id="toc_10">CFRunLoopActivity</h3>

<pre><code class="language-c">/* Run Loop Observer Activities */
typedef CF_OPTIONS(CFOptionFlags, CFRunLoopActivity) {
    kCFRunLoopEntry = (1UL &lt;&lt; 0),           // å³å°†è¿›å…¥RunLoop
    kCFRunLoopBeforeTimers = (1UL &lt;&lt; 1),    // å³å°†å¤„ç†Timer
    kCFRunLoopBeforeSources = (1UL &lt;&lt; 2),   // å³å°†å¤„ç†source
    kCFRunLoopBeforeWaiting = (1UL &lt;&lt; 5),   // å³å°†è¿›å…¥ä¼‘çœ 
    kCFRunLoopAfterWaiting = (1UL &lt;&lt; 6),    // åˆšåˆšè¿›å…¥ä¼‘çœ 
    kCFRunLoopExit = (1UL &lt;&lt; 7),            // å³å°†æ¨å‡ºRunLoop
    kCFRunLoopAllActivities = 0x0FFFFFFFU   
};
</code></pre>

<h3 id="toc_11">ç›‘å¬RunLoopçš„æ‰€æœ‰çŠ¶æ€</h3>

<pre><code class="language-c">CFRunLoopObserverRef observer = CFRunLoopObserverCreateWithHandler(kCFAllocatorDefault, kCFRunLoopAllActivities, YES, 0, ^(CFRunLoopObserverRef observer, CFRunLoopActivity activity) {
        switch (activity) {
            case kCFRunLoopEntry:
            {// åˆšè¿›å…¥RunLoop
            }
                break;
            case kCFRunLoopBeforeTimers:
            {// å³å°†å¤„ç†timer
            }
                break;
            case kCFRunLoopBeforeSources:
            {// å³å°†å¤„ç†source
            }
                break;
            case kCFRunLoopBeforeWaiting:
            {// å³å°†è¿›å…¥ä¼‘çœ 
            }
                break;
            case kCFRunLoopAfterWaiting:
            {// åˆšåˆšè¿›å…¥ä¼‘çœ 
            }
                break;
            case kCFRunLoopExit:
            {// å³å°†é€€å‡ºRunLoop
            }
                break;
            default:
                break;
        }
    });

CFRunLoopAddObserver(CFRunLoopGetCurrent(), observer, kCFRunLoopCommonModes);

CFRelease(observer);
</code></pre>

<p><img src="https://tva1.sinaimg.cn/large/0082zybply1gc2mtkcfafj30xc0pon2x.jpg" alt=""/></p>

<h3 id="toc_12">RunLoopè¿è¡Œé€»è¾‘</h3>

<p><img src="https://tva1.sinaimg.cn/large/0082zybply1gc2msdkn6xj30pa0jutb3.jpg" alt=""/></p>

<p><img src="https://tva1.sinaimg.cn/large/0082zybply1gbnw30rmhij30zk0igqan.jpg" alt="RunLoopè¿è¡Œé€»è¾‘"/></p>

<p><img src="https://tva1.sinaimg.cn/large/0082zybply1gbnz5lvpqtj319s0mqagn.jpg" alt=""/></p>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[ios ä¹‹ è‡ªåŠ¨æ‰“åŒ… ä¸€é”®æ‰“åŒ…è„šæœ¬ ã€bashä¼˜åŒ–ç‰ˆæœ¬ã€‘]]></title>
    <link href="http://kaelinda.top/15783926794655.html"/>
    <updated>2020-01-07T18:24:39+08:00</updated>
    <id>http://kaelinda.top/15783926794655.html</id>
    <content type="html"><![CDATA[
<h2 id="toc_0">é€‰æ‹©æ‰“åŒ…scheme</h2>

<pre><code class="language-bash"># é€‰æ‹©æ‰“åŒ…ç¯å¢ƒ
function selectedScheme() {
  #statements
  echo &quot;è¯·é€‰æ‹©æ‰“åŒ…å¯¹è±¡: \n 1) GaoKao(**é«˜è€ƒ) \n 2) Zhongkao(**ä¸­è€ƒ)&quot;
  read app_scheme

  if [[ $app_scheme == 1 ]]; then
    echo &quot;æ‚¨é€‰æ‹©çš„æ˜¯ï¼šGaoKao(**é«˜è€ƒ)&quot;
    app_scheme=&quot;GaoKao&quot;
  elif [[ $app_scheme == 2 ]]; then
    echo &quot;æ‚¨é€‰æ‹©çš„æ˜¯ï¼šZhongkao(**ä¸­è€ƒ)&quot;
    app_scheme=&quot;Zhongkao&quot;
  else
    selectedScheme
  fi
}
</code></pre>

<h2 id="toc_1">é€‰æ‹©æ‰“åŒ…ç¯å¢ƒ</h2>

<pre><code class="language-bash">function selectedConfiguration() {
  #statements
  echo &quot;-- ğŸ˜ --\n&quot;
  echo &quot;--\n&quot;
  echo &quot;è¯·é€‰æ‹©æ‰“åŒ…ç¯å¢ƒ:\n 1)Release \n 2)LXRelease_dev \n 3)LXRelease_kfc \n 4)LXRelease_tsl&quot;

  read configuration

  if [[ $configuration == 1 ]]; then
    echo &quot;æ‚¨é€‰æ‹©çš„æ˜¯Releaseç¯å¢ƒ&quot;
    configuration=&quot;Release&quot;
  elif [[ $configuration == 2 ]]; then
    echo &quot;æ‚¨é€‰æ‹©çš„æ˜¯LXRelease_devç¯å¢ƒ&quot;
    configuration=&quot;LXRelease_dev&quot;
  elif [[ $configuration == 3 ]]; then
    echo &quot;æ‚¨é€‰æ‹©çš„æ˜¯LXRelease_kfcç¯å¢ƒ&quot;
    configuration=&quot;LXRelease_kfc&quot;
  elif [[ $configuration == 4 ]]; then
    echo &quot;æ‚¨é€‰æ‹©çš„æ˜¯LXRelease_tslç¯å¢ƒ&quot;
    configuration=&quot;LXRelease_tsl&quot;
  else
    selectedConfiguration
  fi
}
</code></pre>

<h2 id="toc_2">è¯»å–æ›´æ–°ä¿¡æ¯</h2>

<pre><code class="language-bash">function readUpdateInfo() {
  echo &quot;-\n&quot;
  echo &quot;--\n&quot;
  echo &quot;è¯·è¾“å…¥æ‚¨å½“å‰ç‰ˆæœ¬æ›´æ–°ä¿¡æ¯:&quot;

  read update_info
}
</code></pre>

<h2 id="toc_3">æ‰“å°æ‰“åŒ…ä¿¡æ¯</h2>

<pre><code class="language-bash">function logPackageInfo() {
  echo &quot;æ‰“åŒ…ä¿¡æ¯----------&gt;:\n&quot;
  echo &quot;æ‰“åŒ…schemeæ˜¯   --&gt;: ${app_scheme}&quot;
  echo &quot;æ‚¨é€‰æ‹©çš„æ˜¯     --&gt;: ${configuration}&quot;
  echo &quot;ç‰ˆæœ¬æ›´æ–°ä¿¡æ¯   --&gt;: ${update_info}&quot;
}
</code></pre>

<h2 id="toc_4">ä¸Šä¼ dSYMåˆ°buglyè¿›è¡Œåˆ†æ</h2>

<pre><code class="language-bash"># --------------------&gt;&gt; ä¸Šä¼  dSYM æ–‡ä»¶
function uploaddSYMFile() {
  #statements
  echo &quot;bugly --- start......&quot;

  output_file_name=&quot;&quot;
  bugly_appName=&quot;&quot;
  bugly_configName=&quot;&quot;

  if [[ ${app_scheme} = &quot;GaoKao&quot; ]]; then
    bugly_appName=&quot;**é«˜è€ƒ&quot;
  elif [[ ${app_scheme} == &quot;Zhongkao&quot; ]]; then
    bugly_appName=&quot;**ä¸­è€ƒ&quot;
  fi

  if [[ ${configuration} = &quot;LXRelease&quot; ]]; then
    bugly_configName=&quot;&quot;
  elif [[ ${configuration} = &quot;LXRelease_dev&quot; ]]; then
    bugly_configName=&quot;dev&quot;
  elif [[ ${configuration} = &quot;LXRelease_tsl&quot; ]]; then
    bugly_configName=&quot;tsl&quot;
  elif [[ ${configuration} = &quot;LXRelease_kfc&quot; ]]; then
    bugly_configName=&quot;kfc&quot;
  fi

  output_file_name=&quot;${app_scheme}_${configuration}&quot;

  bugly_dsym_zip_path=&quot;./AppOutput/${output_file_name}.app.dSYM.zip&quot;

  echo &quot;kael ------rm&quot;
  # rm &quot;./AppOutput/dsym_upload/&quot;
  find &quot;./AppOutput/dsym_upload/&quot; -name &quot;*.dSYM&quot; | xargs rm -rf
  find &quot;./AppOutput/&quot; -name &quot;dsym_upload.zip&quot; | xargs rm -rf
  echo &quot;kael ------rm -- end&quot;

  # è§£å‹æ–‡ä»¶
  echo &quot;kael ------unzip&quot;
  echo &quot;path -- $bugly_dsym_zip_path&quot;
  unzip ${bugly_dsym_zip_path} -d &quot;./AppOutput/dsym_upload/&quot;

  bugly_java_path=&quot;./buglySymboliOS/buglySymboliOS.jar&quot;
  bugly_dsym_path=&quot;./AppOutput/dsym_upload/&quot;
  echo &quot;${bugly_dsym_path}&quot;

  echo &quot;kael ------upload start&quot;
  java -jar $bugly_java_path -i $bugly_dsym_path -dsym -u -id 900058462 -key f8V5dgJO5em0CPPk -package com.lexue.lexuegaokao -version 3.3.3

}
</code></pre>

<h2 id="toc_5">æ™®é€šæ‰“åŒ…</h2>

<pre><code class="language-bash"># --------------------&gt;&gt;  æ™®é€šæ‰“åŒ…ä»»åŠ¡
function normal_archive() {
  #statements
  selectedScheme
  # # ç­‰å¾… æ²‰ç¡
  # sleep 0.5s
  # é€‰æ‹©æ‰“åŒ…ç¯å¢ƒ
  selectedConfiguration
  # ç­‰å¾… æ²‰ç¡
  sleep 0.5s
  # è¯»å–ç‰ˆæœ¬æ›´æ–°ä¿¡æ¯
  readUpdateInfo
  # ç­‰å¾… æ²‰ç¡
  sleep 0.5s
  # æ‰“å°æ›´æ–°ä¿¡æ¯
  logPackageInfo

  fastlane ipa_release scheme:$app_scheme configuration:$configuration update_info:$update_info

  logPackageInfo

  uploaddSYMFile

}
</code></pre>

<h2 id="toc_6">å¤šç¯å¢ƒ å¤šscheme æ‰“åŒ…</h2>

<pre><code class="language-bash"># --------------------&gt;&gt; å•ä¸ªæ‰“åŒ…ä»»åŠ¡
function one_serial_archive() {
  app_scheme=$1
  configuration=$2
  update_info=$3
  #æ‰“å°ä¿¡æ¯
  logPackageInfo
  # æ‰“åŒ…å¯¼å‡º
  fastlane ipa_release scheme:$app_scheme configuration:$configuration update_info:$update_info
  # æ‰“å°ä¿¡æ¯
  logPackageInfo
  # ä¸Šä¼ dSYM
  uploaddSYMFile
}
# --------------------&gt;&gt; å¤šä¸ªæ‰“åŒ…ä»»åŠ¡
function serial_archive() {
  readUpdateInfo

  # ä¸­è€ƒ
  one_serial_archive &quot;Zhongkao&quot; &quot;Release&quot; $update_info
  one_serial_archive &quot;Zhongkao&quot; &quot;LXRelease_dev&quot; $update_info
  one_serial_archive &quot;Zhongkao&quot; &quot;LXRelease_kfc&quot; $update_info
  one_serial_archive &quot;Zhongkao&quot; &quot;LXRelease_tsl&quot; $update_info
  # é«˜è€ƒ
  one_serial_archive &quot;GaoKao&quot; &quot;Release&quot; $update_info
  one_serial_archive &quot;GaoKao&quot; &quot;LXRelease_dev&quot; $update_info
  one_serial_archive &quot;GaoKao&quot; &quot;LXRelease_kfc&quot; $update_info
  one_serial_archive &quot;GaoKao&quot; &quot;LXRelease_tsl&quot; $update_info
}
</code></pre>

<h2 id="toc_7">è„šæœ¬ä½¿ç”¨</h2>

<pre><code class="language-bash"># æ‰“åŒ…ä¸€ç³»åˆ—ç¯å¢ƒçš„åŒ…
serial_archive
</code></pre>

<p>å‘½ä»¤è¡Œå·¥å…·ä¸­è¾“å…¥<code>sh ipa.sh</code>å³å¯</p>

<h2 id="toc_8">æ–‡ä»¶å…±äº«</h2>

<p>bulyæ–‡ä»¶é“¾æ¥:<a href="https://pan.baidu.com/s/13jaP6Jggp6DcDwqXYeEjHg">https://pan.baidu.com/s/13jaP6Jggp6DcDwqXYeEjHg</a>  å¯†ç :lowx<br/>
JDK(javaç¯å¢ƒå®‰è£…æ–‡ä»¶)é“¾æ¥:<a href="https://pan.baidu.com/s/1NtGdP0cANQz7TtyYU2mycg">https://pan.baidu.com/s/1NtGdP0cANQz7TtyYU2mycg</a>  å¯†ç :f6af</p>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[2019 iOSé¢è¯•é¢˜æ”¶çº³]]></title>
    <link href="http://kaelinda.top/15555910678984.html"/>
    <updated>2019-04-18T20:37:47+08:00</updated>
    <id>http://kaelinda.top/15555910678984.html</id>
    <content type="html"><![CDATA[
<h2 id="toc_0">CåŸºç¡€</h2>

<h2 id="toc_1">OCåŸºç¡€</h2>

<ul>
<li><a href="https://www.jianshu.com/p/de0d30047e82">UIResponderç©¶ç«Ÿæ˜¯ä¸ªä»€ä¹ˆä¸œè¥¿</a></li>
<li><a href="https://www.jianshu.com/p/6425307380f9">å¯¹iOSå“åº”é“¾å’Œäº‹ä»¶ä¼ é€’çš„æ€»ç»“</a></li>
</ul>

<h3 id="toc_2">Categoryã€Protocolã€Extention</h3>

<ul>
<li><a href="https://tech.meituan.com/2015/03/03/diveintocategory.html">æ·±å…¥ç†è§£Objective-Cï¼šCategory</a></li>
<li><a href="https://www.jianshu.com/p/a4af101f6cec">Category å’Œ Extention çš„æœ¬è´¨åŒºåˆ«</a></li>
</ul>

<h3 id="toc_3">å¤šçº¿ç¨‹ &amp;&amp; GCD</h3>

<ul>
<li><a href="https://www.cnblogs.com/ioshe/p/5937933.html">iOSå¤šçº¿ç¨‹GCDè¯¦è§£</a></li>
<li><a href="https://www.jianshu.com/p/31b810b7986b">OC å¤šçº¿ç¨‹ä¹‹ GCDçŸ¥è¯†ä»åŸºç¡€åˆ°è¿›é˜¶ </a></li>
</ul>

<h3 id="toc_4">runtime</h3>

<ul>
<li><a href="">runtime è¯¦è§£</a></li>
<li><a href="https://www.jianshu.com/p/291754a90d2b">æ·±å…¥æµ…å‡ºRuntime ä¸€ æ¦‚å¿µ</a></li>
<li><a href="https://www.jianshu.com/p/28c742fb8bb3">æ·±å…¥æµ…å‡ºRuntime (äºŒ) Runtimeçš„æ¶ˆæ¯æœºåˆ¶</a></li>
<li><a href="https://www.jianshu.com/p/2b61270cd038">æ·±å…¥æµ…å‡ºRuntime (ä¸‰) Runtimeçš„æ¶ˆæ¯è½¬å‘</a></li>
<li><a href="https://www.jianshu.com/p/ecdb5fa307f8">æ·±å…¥æµ…å‡ºRuntime (å››) Runtimeçš„å®é™…åº”ç”¨ä¹‹ä¸€ï¼Œå­—å…¸è½¬æ¨¡å‹</a></li>
</ul>

<h3 id="toc_5">runloop</h3>

<ul>
<li><a href="https://www.cnblogs.com/ioshe/p/5489112.html">RunLoopè¯¦è§£</a></li>
<li><a href="https://blog.ibireme.com/2015/05/18/runloop/">æ·±å…¥ç†è§£RunLoop</a></li>
<li><a href="https://segmentfault.com/a/1190000004938638">RunloopçŸ¥è¯†æ ‘</a></li>
</ul>

<h3 id="toc_6">æ•°æ®åŠ å¯†</h3>

<ul>
<li><a href="https://www.jianshu.com/p/70d81a05446b?utm_campaign=maleskine&amp;utm_content=note&amp;utm_medium=seo_notes&amp;utm_source=recommendation">iOSä¸­å¸¸è§çš„å‡ ç§åŠ å¯†æ–¹å¼æ€»ç»“ï¼</a></li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[iOS Block çŸ¥è¯†ç‚¹æ‹¾é—]]></title>
    <link href="http://kaelinda.top/15200726964422.html"/>
    <updated>2018-03-03T18:24:56+08:00</updated>
    <id>http://kaelinda.top/15200726964422.html</id>
    <content type="html"><![CDATA[
<h2 id="toc_0">å®šä¹‰</h2>

<h3 id="toc_1">å†…å­˜äº”å¤§åŒº</h3>

<p><a href="https://www.jianshu.com/p/0b6e15b9a550">äº”å¤§åŒºè¯¦è§£</a></p>

<ul>
<li><p>æ ˆåŒºï¼š</p>
<ul>
<li>å­˜æ”¾å†…å®¹ï¼šåœ¨å‡½æ•°ä½“ä¸­å®šä¹‰çš„å˜é‡é€šå¸¸æ˜¯åœ¨æ ˆä¸Š</li>
<li>é‡Šæ”¾æ—¶é—´ï¼šç”±ç¼–è¯‘å™¨è‡ªåŠ¨åˆ†é…é‡Šæ”¾</li>
</ul></li>
<li><p>å †åŒºï¼š</p>
<ul>
<li>å­˜æ”¾å†…å®¹ï¼šCä¸­ ç”¨mallocï¼Œ callocï¼Œ reallocç­‰åˆ†é…å†…å­˜çš„å‡½æ•°åˆ†é…å¾—åˆ°çš„å°±æ˜¯åœ¨å †ä¸Š</li>
<li>é‡Šæ”¾æ—¶é—´ï¼šä¸€èˆ¬ç”±ç¨‹åºå‘˜åˆ†é…é‡Šæ”¾ï¼Œè‹¥ç¨‹åºå‘˜ä¸é‡Šæ”¾ï¼Œç¨‹åºç»“æŸæ—¶å¯èƒ½ç”±OSå›æ”¶</li>
</ul></li>
<li><p>é™æ€åŒºï¼ˆå…¨å±€åŒºï¼‰:</p>
<ul>
<li>å­˜æ”¾å†…å®¹ï¼šå…¨å±€å˜é‡å’Œé™æ€å˜é‡çš„å­˜å‚¨æ˜¯æ”¾åœ¨ä¸€å—çš„ï¼Œåˆå§‹åŒ–çš„å…¨å±€å˜é‡å’Œé™æ€å˜é‡åœ¨ä¸€å—åŒºåŸŸï¼Œæœªåˆå§‹åŒ–çš„å…¨å±€å˜é‡å’Œæœªåˆå§‹åŒ–çš„é™æ€å˜é‡åœ¨ç›¸é‚»çš„å¦ä¸€å—åŒºåŸŸã€‚</li>
<li>é‡Šæ”¾æ—¶é—´ï¼šç¨‹åºç»“æŸé‡Šæ”¾</li>
</ul></li>
<li><p>å¸¸é‡åŒºï¼š</p>
<ul>
<li>å­˜æ”¾å†…å®¹ï¼šå‡½æ•°ä¸­çš„&quot;adgfdf&quot;è¿™æ ·çš„å­—ç¬¦ä¸²å­˜æ”¾åœ¨å¸¸é‡åŒº</li>
<li>é‡Šæ”¾æ—¶é—´ï¼šç¨‹åºç»“æŸé‡Šæ”¾</li>
</ul></li>
<li><p>ä»£ç åŒºï¼š</p>
<ul>
<li>å­˜æ”¾å†…å®¹ï¼šå­˜æ”¾äºŒè¿›åˆ¶ä»£ç </li>
<li>é‡Šæ”¾æ—¶é—´ï¼šç¨‹åºè¢«åˆ é™¤æ—¶</li>
</ul></li>
</ul>

<h3 id="toc_2">Block åˆ†ç±»</h3>

<p><a href="https://www.jianshu.com/p/f0870fa95aac"><strong>è¿™ç¯‡æ–‡ç« ï¼šBlockçš„ä¸‰ç§ç±»å‹</strong></a>ï¼š<br/>
æ€»ç»“å¾ˆåˆ°ä½ï¼Œæ„Ÿè°¢ä½œè€…ï¼</p>

<ul>
<li><p>NSGlobalBlockï¼šæ²¡æœ‰è®¿é—®ä»»ä½•çš„å¤–éƒ¨å˜é‡</p>
<pre><code class="language-objectivec">void (^kBlock)(void) = ^ {
    NSLog(@&quot;123&quot;);<br/>
};<br/>
kBlock();
</code></pre></li>
<li><p>NSStackBlock: MRCç¯å¢ƒä¸‹è®¿é—®äº†å¤–éƒ¨å˜é‡</p>
<pre><code class="language-objectivec">int a = 23;
void (^kBlock)(void) = ^ {<br/>
    NSLog(@&quot;123--&gt;%d&quot;,a);<br/>
};<br/>
kBlock();
</code></pre></li>
<li><p>NSMallocBlockï¼š</p>
<ul>
<li>ARC ç¯å¢ƒä¸‹è®¿é—®äº†å¤–éƒ¨å˜é‡çš„NSStackBlockï¼Œç³»ç»Ÿè‡ªåŠ¨copyåˆ°å †ï¼Œå˜ä¸ºNSMallocBlock</li>
<li>MRC ç¯å¢ƒä¸‹NSStackBlockæ‰‹åŠ¨copyæ“ä½œä¹Ÿä¼šå˜ä¸ºNSMallocBlock</li>
<li>ä½œä¸ºå‡½æ•°è¿”å›å€¼æ—¶ çš„NSStackBlock</li>
<li><code>cocoa API</code>ã€<code>GCD API</code>ä¸­çš„block</li>
</ul>
<pre><code class="language-objectivec">int a = 23;
void (^kBlock)(void) = ^ {<br/>
    NSLog(@&quot;123--&gt;%d&quot;,a);<br/>
};<br/>
kBlock();<br/>
[kBlock copy];
</code></pre></li>
</ul>

<h2 id="toc_3">Block æ€è€ƒ</h2>

<ol>
<li><p>Blockä¸ºä»€ä¹ˆè¦ç”¨copy</p>
<ul>
<li>blockåœ¨åˆ›å»ºçš„æ—¶å€™é»˜è®¤åˆ†é…çš„å†…å­˜æ˜¯åœ¨æ ˆä¸Šï¼Œè€Œä¸æ˜¯åœ¨å †ä¸Šã€‚è¿™æ ·çš„è¯å…¶æœ¬èº«çš„ä½œç”¨åŸŸæ˜¯å±äºåˆ›å»ºæ—¶å€™çš„ä½œç”¨åŸŸï¼Œä¸€æ—¦åœ¨åˆ›å»ºçš„ä½œç”¨åŸŸä¹‹å¤–è°ƒç”¨å°±ä¼šå¯¼è‡´ç¨‹åºçš„å´©æºƒã€‚æ‰€ä»¥ä½¿ç”¨äº†copyå°†å…¶æ‹·è´åˆ°å †å†…å­˜ä¸Šã€‚</li>
<li>blockåˆ›å»ºåœ¨æ ˆä¸Šï¼Œè€Œblockçš„ä»£ç ä¸­å¯èƒ½ä¼šç”¨åˆ°æœ¬åœ°çš„ä¸€äº›å˜é‡ï¼Œåœ¨æ ˆä¸Šå¯èƒ½éšæ—¶ä¼šè¢«ç³»ç»Ÿé‡Šæ”¾æ‰ï¼Œåªæœ‰å°†å…¶æ‹·è´åˆ°å †ä¸Šï¼Œæ‰èƒ½ä¸€ç›´ä¿æŒBlockçš„å­˜åœ¨ï¼Œå¹¶ç”¨è¿™äº›å¤–éƒ¨å˜é‡</li>
</ul></li>
<li><p>Blockä¸ºä»€ä¹ˆä¸ç”¨retain</p>
<ul>
<li>retainåªæ˜¯å¢åŠ äº†ä¸€æ¬¡å¼•ç”¨è®¡æ•°ï¼Œblockçš„å†…å­˜è¿˜æ˜¯åœ¨æ ˆä¸Šï¼Œå¹¶æ²¡æœ‰å­˜åœ¨å †ä¸Šï¼Œå­˜åœ¨æ ˆä¸Šçš„blockå¯èƒ½éšæ—¶è¢«ç³»ç»Ÿå›æ”¶</li>
</ul></li>
<li><p>ä¸ºä»€ä¹ˆè¿›å…¥blockä¸­çš„å¯¹è±¡å¼•ç”¨è®¡æ•°éœ€è¦è‡ªåŠ¨åŠ 1ï¼Ÿ</p>
<ul>
<li>Blockæ‰§è¡Œçš„æ˜¯å›è°ƒï¼Œå› æ­¤blockå¹¶ä¸çŸ¥é“å…¶ä¸­çš„å¯¹è±¡objåˆ›å»ºåä¼šåœ¨ä»€ä¹ˆæ—¶å€™è¢«é‡Šæ”¾ï¼Œä¸ºäº†ä¸åœ¨blockä½¿ç”¨objä¹‹å‰ï¼Œå¯¹è±¡å·²ç»è¢«é‡Šæ”¾ï¼Œblockå°±retainäº†objä¸€æ¬¡</li>
</ul></li>
<li><p>blockå’Œå‡½æ•°çš„å…³ç³»</p>
<ul>
<li>Blockçš„ä½¿ç”¨å¾ˆ<strong>åƒå‡½æ•°æŒ‡é’ˆ</strong>ï¼Œä¸è¿‡ä¸å‡½æ•°æœ€å¤§çš„ä¸åŒæ˜¯Blockå¯ä»¥è®¿é—®å‡½æ•°ä»¥å¤–ã€è¯æ³•ä½œç”¨åŸŸä»¥å†…çš„å¤–éƒ¨å˜é‡çš„å€¼ã€‚æ¢å¥è¯è¯´ï¼ŒBlockä¸ä»… å®ç°å‡½æ•°çš„åŠŸèƒ½ï¼Œè¿˜èƒ½<strong>æºå¸¦å‡½æ•°çš„æ‰§è¡Œç¯å¢ƒ</strong>ã€‚</li>
<li>å‡½æ•°æŒ‡é’ˆ <code>void(*fun)(int)</code></li>
<li>block <code>void(^fun)(int)</code></li>
</ul></li>
<li><p>blockæœ¬è´¨ï¼ˆå¯¹äºblockçš„ç†è§£ï¼‰<a href="https://www.cnblogs.com/yoon/p/4953618.html">è¯·æŸ¥é˜…Blockå®ç°åŸç†</a></p>
<ul>
<li>blockå®é™…ä¸Šæ˜¯: æŒ‡å‘ç»“æ„ä½“çš„æŒ‡é’ˆ</li>
<li>ç¼–è¯‘å™¨ä¼šå°†blockçš„å†…éƒ¨ä»£ç ç”Ÿæˆå¯¹åº”çš„å‡½æ•°</li>
</ul></li>
<li><p>å¯¹äºåŸºæœ¬æ•°æ®ç±»å‹ï¼Œè¿›å…¥åˆ°blockä¸­ä¼šè¢«å½“åšå¸¸é‡å¤„ç†ã€‚å¯¹è±¡ retain ä¼šä¸€æ¬¡</p>
<span id="more"></span><!-- more -->
<pre><code class="language-text">//å¦‚æœéœ€è¦åœ¨blockä¸­å¯¹numè¿›è¡Œä¿®æ”¹ï¼Œéœ€è¦åŠ ä¸Šå…³é”®å­—__block
//(æˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨staticå…³é”®å­—è¿›è¡Œä¿®é¥°)<br/>
int  num1 = 10;<br/>
void(^block1)() = ^{<br/>
   NSLog(@&quot;num1 is %d&quot;,num1);<br/>
};<br/>
num1 = 20;<br/>
block1(); //è¾“å‡º10<br/>
//æ”¹è¿›:ä½¿ç”¨block,ä½¿è¿›å…¥åˆ°blockå—ä¸­çš„å˜é‡ä¸è¢«å½“åšå¸¸é‡æ¥ä½¿ç”¨<br/>
__block int  num2 = 10;<br/>
void(^block2)() = ^{<br/>
 NSLog(@&quot;num2 is %d&quot;,num2);<br/>
};<br/>
num2 = 20;<br/>
block2(); //è¾“å‡º20
</code></pre></li>
<li><p>Blockä¸­selfçš„å¾ªç¯å¼•ç”¨</p>
<ul>
<li>blocké»˜è®¤åˆ›å»ºåœ¨æ ˆä¸Šï¼Œæ‰€ä»¥å¯¹è¦å¯¹å…¶è¿›è¡Œæ‰§è¡Œcopyæ“ä½œï¼Œå°†å…¶æ‹·è´åˆ°å †åŒºï¼Œä¾¿äºæ›´å¥½çš„æ“ä½œå¯¹è±¡ã€‚ä½†æ˜¯æ‰§è¡Œäº†copyæ“ä½œä¹‹åï¼Œblockä¸­ä½¿ç”¨selfï¼Œæ­¤å¯¹è±¡ä¼šè¢«retainä¸€æ¬¡ï¼ˆæ³¨æ„ï¼šblockåœ¨å †åŒºä¸Šæ—¶æ‰ä¼šèµ·åˆ°retainä½œç”¨ï¼‰ï¼Œä¼šé€ æˆå¾ªç¯å¼•ç”¨ã€‚</li>
<li>è§£å†³æ–¹æ³•ï¼š
<ul>
<li>åœ¨MRCä¸‹ï¼Œä½¿ç”¨__blockä¿®é¥°</li>
<li>åœ¨ARCä¸‹ï¼Œä½¿ç”¨__unsafe_unretained\weakä¿®é¥°</li>
</ul></li>
</ul></li>
<li><p>Block åœ¨å†…å­˜ä¸­çš„åˆ†ç±»</p>
<ul>
<li>å…¨å±€block --&gt; GlobalBlock &lt;==&gt; ç›¸å½“äºå…¨å±€å˜é‡, ç³»ç»Ÿä¼šè‡ªåŠ¨é‡Šæ”¾</li>
<li>æ ˆblock --&gt; StackBlock &lt;==&gt; ç›¸å½“äºå±€éƒ¨å˜é‡, ç³»ç»Ÿä¼šè‡ªåŠ¨é‡Šæ”¾</li>
<li>å †block --&gt; MallocBlock &lt;==&gt; (éœ€è¦æ‰‹åŠ¨é‡Šæ”¾å†…å­˜)</li>
</ul></li>
<li><p>blockç±»å‹åŒºåˆ†æ–¹æ³•</p>
<ul>
<li>å¦‚æœblockå®ç°ä¸­æ²¡æœ‰è®¿é—®ä»»ä½•&quot;å¤–éƒ¨&quot;å˜é‡(åŒ…æ‹¬å±€éƒ¨å’Œå…¨å±€), è¯¥blockä¸ºGlobalBlock</li>
<li>å¦‚æœblockå®ç°ä¸­è®¿é—®äº†ä»»ä½•&quot;å¤–éƒ¨&quot;å˜é‡(åŒ…æ‹¬å±€éƒ¨å’Œå…¨å±€), è¯¥blockä¸ºStackBlock</li>
<li>å¯¹StackBlockè¿›è¡Œæ‹·è´(copy/Block_copy), è¯¥blockä¸ºMallocBlock</li>
</ul></li>
<li><p>blockå†…å¦‚ä½•ä¿®æ”¹blockå¤– çš„å˜é‡?</p>
<pre><code class="language-text"> __block int a = 0;
   void (^foo)(void) = ^{ <br/>
       a = 1; <br/>
   };<br/>
   foo(); <br/>
   //è¿™é‡Œï¼Œaçš„å€¼è¢«ä¿®æ”¹ä¸º1
</code></pre>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œblockå†…è®¿é—®çš„å˜é‡æ˜¯ copy  è¯¥å˜é‡åˆ°å †åçš„å˜é‡ï¼Œè€Œéå˜é‡æœ¬èº«ã€‚<br/>
æ‰€ä»¥ï¼š<strong>è¯»å†™æ“ä½œå¯¹åŸå˜é‡ä¸ç”Ÿæ•ˆ</strong></p>
<blockquote>
<p>æˆ‘ä»¬çŸ¥é“ï¼šBlockä¸å…è®¸ä¿®æ”¹å¤–éƒ¨å˜é‡çš„å€¼ï¼Œè¿™é‡Œæ‰€è¯´çš„å¤–éƒ¨å˜é‡çš„å€¼ï¼ŒæŒ‡çš„æ˜¯æ ˆä¸­æŒ‡é’ˆçš„å†…å­˜åœ°å€ã€‚__block æ‰€èµ·åˆ°çš„ä½œç”¨å°±æ˜¯åªè¦è§‚å¯Ÿåˆ°è¯¥å˜é‡è¢« block æ‰€æŒæœ‰ï¼Œå°±å°†â€œå¤–éƒ¨å˜é‡â€åœ¨æ ˆä¸­çš„å†…å­˜åœ°å€æ”¾åˆ°äº†å †ä¸­ã€‚è¿›è€Œåœ¨blockå†…éƒ¨ä¹Ÿå¯ä»¥ä¿®æ”¹å¤–éƒ¨å˜é‡çš„å€¼</p>
</blockquote>
<pre><code class="language-text">__block int a = 0;
   NSLog(@&quot;å®šä¹‰å‰ï¼š%p&quot;, &amp;a);         //æ ˆåŒº<br/>
   void (^foo)(void) = ^{<br/>
       a = 1;<br/>
       NSLog(@&quot;blockå†…éƒ¨ï¼š%p&quot;, &amp;a);    //å †åŒº<br/>
   };<br/>
   NSLog(@&quot;å®šä¹‰åï¼š%p&quot;, &amp;a);         //å †åŒº<br/>
   foo();
</code></pre>
<p>æ‰“å°è¾“å‡ºï¼š</p>
<pre><code class="language-text">2016-05-17 02:03:33.559 LeanCloudChatKit-iOS[1505:713679] å®šä¹‰å‰ï¼š0x16fda86f8
2016-05-17 02:03:33.559 LeanCloudChatKit-iOS[1505:713679] å®šä¹‰åï¼š0x155b22fc8<br/>
2016-05-17 02:03:33.559 LeanCloudChatKit-iOS[1505:713679] blockå†…éƒ¨ï¼š 0x155b22fc8
</code></pre></li>
<li><p>blockä¸ªäººç†è§£</p>
<pre><code class="language-text">NSMutableString *kName = [NSMutableString stringWithString:@&quot;kael&quot;];
__block NSMutableString *myname = kName;<br/>
NSLog(@&quot;block å‰%p&quot;,&amp;myname);<br/>
void (^foo)(void) = ^(){<br/>
    NSLog(@&quot;block ä¸­1ï¼š%p&quot;,&amp;myname);<br/>
    myname = [NSMutableString stringWithString:@&quot;kaelinda&quot;];<br/>
    NSLog(@&quot;block ä¸­2ï¼š%p&quot;,&amp;myname);<br/>
};<br/>
foo();<br/>
NSLog(@&quot;block å%p&quot;,&amp;myname);<br/>
/**<br/>
 * __block ä¿®é¥°ä¹‹å‰<br/>
 * å¤–éƒ¨å˜é‡çš„å†…å­˜åœ°å€æ˜¯å­˜åˆ°äº†æ ˆ<br/>
 * block æ˜¯åœ¨å †å†…ï¼Œä¸æ¸…æ¥šæ ˆå†…çš„å˜é‡æ˜¯å¦å·²ç»è¢«é‡Šæ”¾ï¼Œæ‰€ä»¥è¿å¼•ç”¨çš„å‡†ç¡®æ€§éƒ½æ˜¯é—®é¢˜ï¼Œæ›´è°ˆä¸ä¸Šæ˜¯ä¿®æ”¹äº†<br/>
 * æ‰€ä»¥ï¼Œblock ä¸å…è®¸ä¿®æ”¹æ ˆä¸­çš„å˜é‡ï¼ˆæˆ–è€…æ ˆä¸­æŒ‡é’ˆçš„å†…å­˜åœ°å€ï¼‰<br/>
 */<br/>
/**<br/>
 * __block ä¿®é¥°ä¹‹å<br/>
 * åˆå§‹åŒ–çš„æ—¶å€™ï¼Œå†…å­˜åœ°å€åœ¨æ ˆå†…ï¼ˆå› ä¸ºå¹¶ä¸ç¡®å®šblockå†…æ˜¯å¦ä¼šç”¨åˆ°ï¼‰ï¼Œ<br/>
 * å½“æ£€æµ‹åˆ°blockå†…å¼•ç”¨åˆ°äº†è¯¥å¯¹è±¡ï¼Œä¸ç®¡blockæœ‰æ²¡æœ‰è¢«è°ƒç”¨ï¼Œéƒ½ä¼š ä»æ ˆå†… copy å†…å­˜åœ°å€åˆ° å †å†…ï¼Œ<br/>
 * å†æ“ä½œçš„æ—¶å€™ æ“ä½œçš„æ˜¯å †å†…çš„å†…å­˜åœ°å€<br/>
 */
</code></pre></li>
</ol>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[äº”å¤§å†…å­˜åˆ†åŒº]]></title>
    <link href="http://kaelinda.top/15790084508104.html"/>
    <updated>2020-01-14T21:27:30+08:00</updated>
    <id>http://kaelinda.top/15790084508104.html</id>
    <content type="html"><![CDATA[
<ul>
<li><p>æ ˆåŒºï¼š</p>
<ul>
<li>å­˜æ”¾å†…å®¹ï¼šåœ¨å‡½æ•°ä½“ä¸­å®šä¹‰çš„å˜é‡é€šå¸¸æ˜¯åœ¨æ ˆä¸Š</li>
<li>é‡Šæ”¾æ—¶é—´ï¼šç”±ç¼–è¯‘å™¨è‡ªåŠ¨åˆ†é…é‡Šæ”¾</li>
</ul></li>
<li><p>å †åŒºï¼š</p>
<ul>
<li>å­˜æ”¾å†…å®¹ï¼šCä¸­ ç”¨mallocï¼Œ callocï¼Œ reallocç­‰åˆ†é…å†…å­˜çš„å‡½æ•°åˆ†é…å¾—åˆ°çš„å°±æ˜¯åœ¨å †ä¸Š</li>
<li>é‡Šæ”¾æ—¶é—´ï¼šä¸€èˆ¬ç”±ç¨‹åºå‘˜åˆ†é…é‡Šæ”¾ï¼Œè‹¥ç¨‹åºå‘˜ä¸é‡Šæ”¾ï¼Œç¨‹åºç»“æŸæ—¶å¯èƒ½ç”±OSå›æ”¶</li>
</ul></li>
<li><p>é™æ€åŒºï¼ˆå…¨å±€åŒºï¼‰:</p>
<ul>
<li>å­˜æ”¾å†…å®¹ï¼šå…¨å±€å˜é‡å’Œé™æ€å˜é‡çš„å­˜å‚¨æ˜¯æ”¾åœ¨ä¸€å—çš„ï¼Œåˆå§‹åŒ–çš„å…¨å±€å˜é‡å’Œé™æ€å˜é‡åœ¨ä¸€å—åŒºåŸŸï¼Œæœªåˆå§‹åŒ–çš„å…¨å±€å˜é‡å’Œæœªåˆå§‹åŒ–çš„é™æ€å˜é‡åœ¨ç›¸é‚»çš„å¦ä¸€å—åŒºåŸŸã€‚</li>
<li>é‡Šæ”¾æ—¶é—´ï¼šç¨‹åºç»“æŸé‡Šæ”¾</li>
</ul></li>
<li><p>å¸¸é‡åŒºï¼š</p>
<ul>
<li>å­˜æ”¾å†…å®¹ï¼šå‡½æ•°ä¸­çš„&quot;adgfdf&quot;è¿™æ ·çš„å­—ç¬¦ä¸²å­˜æ”¾åœ¨å¸¸é‡åŒº</li>
<li>é‡Šæ”¾æ—¶é—´ï¼šç¨‹åºç»“æŸé‡Šæ”¾</li>
</ul></li>
<li><p>ä»£ç åŒºï¼š</p>
<ul>
<li>å­˜æ”¾å†…å®¹ï¼šå­˜æ”¾äºŒè¿›åˆ¶ä»£ç </li>
<li>é‡Šæ”¾æ—¶é—´ï¼šç¨‹åºè¢«åˆ é™¤æ—¶</li>
</ul></li>
</ul>

<p><strong>æ³¨æ„!!!!!</strong></p>

<blockquote>
<p>Cè¯­è¨€ åœ¨æ‰€æœ‰å‡½æ•°ä½“å¤–å®šä¹‰çš„æ˜¯å…¨å±€é‡ï¼ŒåŠ äº†staticä¿®é¥°ç¬¦åä¸ç®¡åœ¨å“ªé‡Œéƒ½å­˜æ”¾åœ¨å…¨å±€åŒºï¼ˆé™æ€åŒºï¼‰ï¼Œåœ¨æ‰€æœ‰å‡½æ•°ä½“å¤–å®šä¹‰çš„staticå˜é‡è¡¨ç¤ºåœ¨è¯¥æ–‡ä»¶ä¸­æœ‰æ•ˆï¼Œä¸èƒ½externåˆ°åˆ«çš„æ–‡ä»¶ç”¨ï¼Œåœ¨å‡½æ•°ä½“å†…å®šä¹‰çš„staticè¡¨ç¤ºåªåœ¨è¯¥å‡½æ•°ä½“å†…æœ‰æ•ˆã€‚</p>
</blockquote>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[iPad æ¨ªå±å¯åŠ¨ ç•Œé¢é”™ä¹±]]></title>
    <link href="http://kaelinda.top/15786557014564.html"/>
    <updated>2020-01-10T19:28:21+08:00</updated>
    <id>http://kaelinda.top/15786557014564.html</id>
    <content type="html"><![CDATA[
<blockquote>
<p>ç°è±¡ï¼šiPad å¼€å¯å±å¹•æ—‹è½¬ï¼Œæ¨ªå±å¯åŠ¨APPï¼ŒæŸäº›ç‰¹æ®Šæƒ…å†µä¸‹ï¼ŒAPPä¼šå˜æˆæ¨ªå±APPã€‚æ­å–œä½ ï¼Œä¸­å¥–äº†ï¼Œè¿™æ—¶å€™å³ä½¿ä½ ViewControllerçš„æ§åˆ¶å±å¹•æ—‹è½¬çš„ä¸‰ä¸ªä»£ç†æ–¹æ³•éƒ½åªæ”¯æŒç«–å±ï¼Œä½ çš„APPä¹Ÿå¯èƒ½æ˜¯é”™ä¹±çš„ã€‚</p>
</blockquote>

<ul>
<li>ç¥å¥‡çš„è§£å†³æ–¹æ¡ˆï¼š
<ul>
<li><code>mainScreen</code>æ·»åŠ ä¸€ä¸ªwindowï¼Œ<code>makeKeyAndVisible</code></li>
<li>ç„¶å<code>resignKeyWindow</code></li>
</ul></li>
</ul>

<pre><code class="language-text">- (void)showMagicWindow{
    UIWindow *aawindow = [[UIWindow alloc] initWithFrame:[UIScreen mainScreen].bounds];
       aawindow.backgroundColor = [UIColor clearColor];
       aawindow.windowLevel = UIWindowLevelAlert;
       [aawindow makeKeyAndVisible];
    [aawindow resignKeyWindow];
       aawindow.hidden = YES;
       aawindow = nil;
}
</code></pre>

<p>å“ªä½å¤§ç¥èƒ½è§£é‡Šä¸‹ï¼Ÿ</p>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[iOS ä¹‹ è‡ªåŠ¨æ‰“åŒ… fastlane + fir + pgy ã€è¿›é˜¶ä½¿ç”¨ã€‘]]></title>
    <link href="http://kaelinda.top/15725720549251.html"/>
    <updated>2019-11-01T09:34:14+08:00</updated>
    <id>http://kaelinda.top/15725720549251.html</id>
    <content type="html"><![CDATA[
<h2 id="toc_0">å®‰è£… fastlane</h2>

<p><a href="https://www.jianshu.com/p/88b9a3e378db">fastlane å®‰è£…ä½¿ç”¨æŒ‡å—</a></p>

<h2 id="toc_1">fastlane é…ç½®é¡¹ç›®</h2>

<ul>
<li>cd åˆ°é¡¹ç›®æ ¹ç›®å½•ä¸‹</li>
<li><p><code>fastlane init</code></p></li>
<li><p><a href="https://docs.fastlane.tools/advanced/actions/">fastlane action</a></p></li>
<li><p><a href="https://docs.fastlane.tools/plugins/using-plugins/#fastlane-plugins">fastlane plugin</a></p></li>
<li><p>gym è¯·å‚è€ƒï¼š<a href="https://docs.fastlane.tools/actions/gym/">gymå®˜æ–¹æ–‡æ¡£</a></p></li>
</ul>

<p><strong>æœ‰ä¸€ç‚¹æ¯”è¾ƒå‘ï¼šæ¯ä¸ªé¡¹ç›®éƒ½éœ€è¦ä¸ºfastlaneé…ç½®ä¸‹ç¯å¢ƒ,å…³è”å¼€å‘è´¦æˆ·</strong></p>

<h2 id="toc_2">å®‰è£…æ‰“åŒ…å¹³å°å‘½ä»¤å·¥å…·</h2>

<ul>
<li>å®‰è£…firim</li>
</ul>

<pre><code class="language-bash">fastlane add_plugin versioning
fastlane add_plugin firim
</code></pre>

<p><code>versioning</code> éœ€è¦è¾“å…¥ç”µè„‘å¯†ç ï¼Œä»¥è·å–<code>sudo</code>æƒé™.</p>

<p>firim ç›¸å…³å‚æ•°å¯å‚è€ƒï¼š<a href="https://github.com/whlsxl/firim/blob/master/lib/firim/options.rb">firim æºç è¯´æ˜</a></p>

<ul>
<li>å®‰è£…è’²å…¬è‹±</li>
</ul>

<p><a href="http://www.pgyer.com/doc/view/fastlane">è’²å…¬è‹±å®˜æ–¹æ–‡æ¡£è¯´æ˜</a><br/>
<a href="https://github.com/shishirui/fastlane-plugin-pgyer">è’²å…¬è‹±æ’ä»¶APIè¯´æ˜</a></p>

<pre><code class="language-bash">fastlane add_plugin pgyer
</code></pre>

<p>éœ€è¦è¾“å…¥ y,ä»¥ç¡®è®¤å®‰è£….</p>

<ul>
<li><p>Pluginfile</p>
<p>æ­¤æ—¶ fastlane/Pluginfile æ–‡ä»¶å†…åº”è¯¥æ˜¯è¿™æ ·å­çš„ï¼š</p>
<pre><code class="language-bash">gem &#39;fastlane-plugin-pgyer&#39;
gem &#39;fastlane-plugin-versioning&#39;<br/>
gem &#39;fastlane-plugin-firim&#39;
</code></pre></li>
<li><p>fastlane action</p></li>
</ul>

<p>å®šä¹‰ä¸€ä¸ª Action å« <code>PY_release</code>:</p>

<pre><code class="language-text">lane :PY_release do |options|
    gym(
      clean:true, #æ‰“åŒ…å‰cleané¡¹ç›®
      silent:true,
      export_method: &quot;development&quot;, #å¯¼å‡ºæ–¹å¼
      scheme:&quot;LXPeiyou&quot;, #scheme
      configuration: options[:configuration],#ç¯å¢ƒ
      output_directory:&quot;./AppOutput&quot;,#ipaçš„å­˜æ”¾ç›®å½•
      output_name:&quot;********&quot;#è¾“å‡ºipaçš„æ–‡ä»¶åä¸ºå½“å‰çš„buildå·
      )
    
    # è‡ªå·±çš„firè´¦å·
    # firim(firim_api_token:&#39;*****&#39;, app_changelog:options[:update_info])
    
    #è’²å…¬è‹±çš„é…ç½® æ›¿æ¢ä¸ºè‡ªå·±çš„api_keyå’Œuser_key
    # pgyer(api_key: &quot;******&quot;, user_key: &quot;******&quot;,update_description: options[:update_info])
  end
</code></pre>

<p><strong>å¤–éƒ¨è°ƒç”¨</strong><br/>
æ‰§è¡ŒAction å¹¶ä¼ å‚ï¼š</p>

<pre><code class="language-bash">fastlane PY_release configuration:$configuration update_info:$update_info
</code></pre>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[ios ä¹‹ è‡ªåŠ¨æ‰“åŒ… è„šæœ¬ ã€bash ç‰ˆæœ¬ã€‘]]></title>
    <link href="http://kaelinda.top/15726850744151.html"/>
    <updated>2019-11-02T16:57:54+08:00</updated>
    <id>http://kaelinda.top/15726850744151.html</id>
    <content type="html"><![CDATA[
<h2 id="toc_0">é…ç½®æ‰“åŒ…ä¿¡æ¯</h2>

<pre><code class="language-bash"># å·¥ç¨‹åç§°
kProjectName=&quot;ipa.xcodeproj&quot;

# workspace åç§° å¦‚æœä½¿ç”¨äº†cocopodsç­‰å¯èƒ½éœ€è¦ç”¨å·¥ä½œç©ºé—´æ–¹å¼æ‰“åŒ…
# workspaceName=â€œipa.workspaceâ€

# schemeåç§°
kSchemeName=&quot;ipa&quot;

# target è¿™é‡Œschemeåªå¯¹åº”äº†ä¸€ä¸ªtargetè¿è¡Œï¼›å¦‚æœæœ‰å¤šä¸ªtargetéœ€è¦æŒ‡å®štarget
kTargetName=&quot;ipa&quot;

# APPç¯å¢ƒé…ç½® Configuration
kConfiguration=&quot;Release&quot;

# archiveå¯¼å‡ºè·¯å¾„
kArchivePath=&quot;./ipaOutput/${kSchemeName}.xcarchive&quot;

# ipaå¯¼å‡ºè·¯å¾„
kExport_ipa_Path=&quot;./ipaOutput/${kSchemeName}&quot;

# ä¸åŒçš„æ‰“åŒ…æ–¹å¼è¿™ä¸ªå¯¼å‡ºæ–‡ä»¶ä¸åŒ [è¿™ä¸ªæ–‡ä»¶å¾ˆé‡è¦ï¼Œä»–å†³å®šäº†ä½ çš„åŒ…æ˜¯å¦èƒ½å¤Ÿæ­£å¸¸å¯¼å‡º] 
# ç”¨Xcodeè‡ªå¸¦çš„archiveæ–¹å¼å¯¼å‡ºipaçš„æ—¶å€™ï¼Œè¿™ä¸ªæ–‡ä»¶ä¼šéšä¹‹å¯¼å‡º
kExportOptionsPlist=&quot;./ipaOutput/ExportOptions.plist&quot;

kAppChangelog=&quot;Tips:æˆ‘æ˜¯ç‰ˆæœ¬æ›´æ–°ä¿¡æ¯&quot;
</code></pre>

<h2 id="toc_1">æ‰“åŒ… &amp;&amp; å¯¼å‡º</h2>

<pre><code class="language-bash"># clean
xcodebuild  clean -configuration &quot;$configuration&quot; -alltargets

# archive project
xcodebuild archive -project &quot;$kProjectName&quot; -scheme &quot;$kSchemeName&quot; -configuration &quot;$kConfiguration&quot; -archivePath &quot;$kArchivePath&quot;

# archive workspace
# #xcodebuild Â archive Â -workspace &quot;$workspaceName&quot; -scheme &quot;$scheme&quot; -configuration Â &quot;$kConfiguration&quot; Â -archivePath &quot;$kArchivePath&quot; Â 

# å¯¼å‡ºipa
xcodebuild -exportArchive -archivePath &quot;$kArchivePath&quot; -exportOptionsPlist &quot;$kExportOptionsPlist&quot; -exportPath &quot;$kExport_ipa_Path&quot;
</code></pre>

<h2 id="toc_2">ä¸Šä¼ ipaåˆ°åˆ†å‘å¹³å°</h2>

<pre><code class="language-bash"># --------------&gt; æ£€æµ‹IPAå­˜åœ¨å¦
ipa_path=&quot;${kExport_ipa_Path}/${kSchemeName}.ipa&quot;

if [ -f &quot;$ipa_path&quot; ]
    then
        echo &quot;------------ipaå­˜åœ¨ğŸ˜......&quot;
    else
        echo &quot;------------ipaä¸å­˜åœ¨ğŸ˜­......&quot;
        exit 1
fi
</code></pre>

<h3 id="toc_3">ä¸Šä¼ åˆ°fir</h3>

<pre><code class="language-bash"># --------- firm ä¸Šä¼ é…ç½®

echo &quot;è¯·é€‰æ‹©ç™»å½•è´¦æˆ·åï¼š\n 1ï¼‰kael è‡ªå·±çš„firè´¦æˆ·ï¼ˆé»˜è®¤ï¼‰ \n 2ï¼‰å…¬å¸çš„firè´¦æˆ·&quot;

read fir_token

if [[ $fir_token == 2 ]]; then
  #å…¬å¸è´¦å·
  fir_token=&quot;*********&quot;
else
  # è‡ªå·±çš„è´¦å·
  fir_token=&quot;*********&quot;
fi

fir publish ${ipa_path} -T $fir_token -c $kAppChangelog
</code></pre>

<h3 id="toc_4">ä¸Šä¼ åˆ°pgy</h3>

<pre><code class="language-bash"># -------- pgy ä¸Šä¼ 

echo &quot;------------å‡†å¤‡å‘å¸ƒè’²å…¬è‹±------------&quot;
#&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;è’²å…¬è‹±è´¦å·ä¿¡æ¯é…ç½®
#è’²å…¬è‹±è´¦å·
pgy_API_Key=&quot;*********&quot;
pgy_User_Key=&quot;*********&quot;


# ------&gt; è’²å…¬è‹±å‘å¸ƒ
curl -F &quot;file=@$ipa_path&quot; \
-F &quot;uKey=$pgy_User_Key&quot; \
-F &quot;_api_key=$pgy_API_Key&quot; \
-F &quot;updateDescription=$kAppChangelog&quot; \
https://www.pgyer.com/apiv1/app/upload
</code></pre>

<h2 id="toc_5">è„šæœ¬</h2>

<pre><code class="language-bash">#!/bin/sh

# å·¥ç¨‹åç§°
kProjectName=&quot;ipa.xcodeproj&quot;

# workspace åç§° å¦‚æœä½¿ç”¨äº†cocopodsç­‰å¯èƒ½éœ€è¦ç”¨å·¥ä½œç©ºé—´æ–¹å¼æ‰“åŒ…
# workspaceName=â€œipa.workspaceâ€

# schemeåç§°
kSchemeName=&quot;ipa&quot;

# target è¿™é‡Œschemeåªå¯¹åº”äº†ä¸€ä¸ªtargetè¿è¡Œï¼›å¦‚æœæœ‰å¤šä¸ªtargetéœ€è¦æŒ‡å®štarget
kTargetName=&quot;ipa&quot;

# APPç¯å¢ƒé…ç½®
kConfiguration=&quot;Release&quot;

# archiveå¯¼å‡ºè·¯å¾„
kArchivePath=&quot;./ipaOutput/${kSchemeName}.xcarchive&quot;

# ipaå¯¼å‡ºè·¯å¾„
kExport_ipa_Path=&quot;./ipaOutput/${kSchemeName}&quot;

# ä¸åŒçš„æ‰“åŒ…æ–¹å¼è¿™ä¸ªå¯¼å‡ºæ–‡ä»¶ä¸åŒ
kExportOptionsPlist=&quot;./ipaOutput/ExportOptions.plist&quot;

kAppChangelog=&quot;Tips:æˆ‘æ˜¯ç‰ˆæœ¬æ›´æ–°ä¿¡æ¯&quot;


# ------------------&gt; æ‰“åŒ…åŒº
# clean
xcodebuild  clean -configuration &quot;$configuration&quot; -alltargets

# archive project
xcodebuild archive -project &quot;$kProjectName&quot; -scheme &quot;$kSchemeName&quot; -configuration &quot;$kConfiguration&quot; -archivePath &quot;$kArchivePath&quot;

# archive workspace
# #xcodebuild Â archive Â -workspace &quot;$workspaceName&quot; -scheme &quot;$scheme&quot; -configuration Â &quot;$kConfiguration&quot; Â -archivePath &quot;$kArchivePath&quot; Â 

# å¯¼å‡ºipa
xcodebuild -exportArchive -archivePath &quot;$kArchivePath&quot; -exportOptionsPlist &quot;$kExportOptionsPlist&quot; -exportPath &quot;$kExport_ipa_Path&quot;


# --------------&gt; æ£€æµ‹IPAå­˜åœ¨å¦
ipa_path=&quot;${kExport_ipa_Path}/${kSchemeName}.ipa&quot;

if [ -f &quot;$ipa_path&quot; ]
    then
        echo &quot;------------ipaå­˜åœ¨ğŸ˜......&quot;
    else
        echo &quot;------------ipaä¸å­˜åœ¨ğŸ˜­......&quot;
        exit 1
fi

# --------- firm ä¸Šä¼ é…ç½®

echo &quot;è¯·é€‰æ‹©ç™»å½•è´¦æˆ·åï¼š\n 1ï¼‰kael è‡ªå·±çš„firè´¦æˆ·ï¼ˆé»˜è®¤ï¼‰ \n 2ï¼‰å…¬å¸çš„firè´¦æˆ·&quot;

read fir_token

if [[ $fir_token == 2 ]]; then
  #å…¬å¸è´¦å·
  fir_token=&quot;*********&quot;
else
  # è‡ªå·±çš„è´¦å·
  fir_token=&quot;*********&quot;
fi

fir publish ${ipa_path} -T $fir_token -c $kAppChangelog

# -------- pgy ä¸Šä¼ 

echo &quot;------------å‡†å¤‡å‘å¸ƒè’²å…¬è‹±------------&quot;
#&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;è’²å…¬è‹±è´¦å·ä¿¡æ¯é…ç½®
#è’²å…¬è‹±è´¦å·
pgy_API_Key=&quot;*********&quot;
pgy_User_Key=&quot;*********&quot;


# ------&gt; è’²å…¬è‹±å‘å¸ƒ
curl -F &quot;file=@$ipa_path&quot; \
-F &quot;uKey=$pgy_User_Key&quot; \
-F &quot;_api_key=$pgy_API_Key&quot; \
-F &quot;updateDescription=$kAppChangelog&quot; \
https://www.pgyer.com/apiv1/app/upload
</code></pre>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[SwiftUI ç¬¬ä¸€å¤©]]></title>
    <link href="http://kaelinda.top/15748600468386.html"/>
    <updated>2019-11-27T21:07:26+08:00</updated>
    <id>http://kaelinda.top/15748600468386.html</id>
    <content type="html"><![CDATA[

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[OCä¸­æšä¸¾å†™æ³•  ä»¥åŠ å­—ç¬¦ä¸²æšä¸¾æ¢ç´¢]]></title>
    <link href="http://kaelinda.top/15523077857608.html"/>
    <updated>2019-03-11T20:36:25+08:00</updated>
    <id>http://kaelinda.top/15523077857608.html</id>
    <content type="html"><![CDATA[
<h2 id="toc_0">å¸¸è§æšä¸¾å†™æ³•</h2>

<h3 id="toc_1">Cè¯­è¨€æ¨¡å¼çš„æšä¸¾å†™æ³•ï¼šenum</h3>

<pre><code class="language-text">typedef enum{
    KLTypeRed = 1,
    KLTypeGreen = 2,
    KLTypeOrange = 3,
} KLType;
</code></pre>

<h3 id="toc_2">æ™®é€šã€æ•´å‹ã€‘æšä¸¾å†™æ³• ï¼šNS_ENUM</h3>

<pre><code class="language-text">typedef NS_ENUM(NSUInteger, KLType) {
    KLTypeRed = 1,
    KLTypeGreen = 2,
    KLTypeOrange = 3,
};
</code></pre>

<h3 id="toc_3">ä½ç§»æšä¸¾ ï¼šNS_OPTIONS</h3>

<pre><code class="language-text">typedef NS_OPTIONS(NSUInteger, KLType) {
    KLTypeRed = 1 &lt;&lt; 0,
    KLTypeGreen = 1 &lt;&lt; 1,
    KLTypeOrange = 1 &lt;&lt; 2,
};

</code></pre>

<span id="more"></span><!-- more -->

<h2 id="toc_4">å­—ç¬¦ä¸²ç±»å‹æšä¸¾å®ç°æ–¹å¼æ¢ç´¢</h2>

<h3 id="toc_5">åŸºäºæ™®é€šæšä¸¾ï¼Œå®šä¹‰Cæ–¹æ³•å®ç°</h3>

<pre><code class="language-text">// å…ˆå®šä¹‰ä¸€ä¸ªå¸¸è§çš„æšä¸¾
typedef NS_ENUM(NSUInteger, KLType) {
    KLTypeRed = 1,
    KLTypeGreen = 2,
    KLTypeOrange = 3,
};
// å®šä¹‰ä¸€ä¸ªCæ–¹æ³•ï¼ŒCæ–¹æ³•å°±æ˜¯é€šè¿‡æšä¸¾å€¼åŒ¹é…å­—ç¬¦ä¸²
NSString *KLTypeString(KLType status) {
    switch (status) {
        case KLTypeRed:
            return @&quot;çº¢è‰²&quot;;
        case KLTypeGreen:
            return @&quot;ç»¿è‰²&quot;;
        case KLTypeOrange:
            return @&quot;æ©˜è‰²&quot;;
        default:
            return @&quot;&quot;;
    }
}
</code></pre>

<h3 id="toc_6">åŸºäºæ™®é€šæšä¸¾ï¼Œå®šä¹‰Cæ•°ç»„ï¼Œè®¾ç½® æšä¸¾å€¼ä¸º index</h3>

<pre><code class="language-text">// å…ˆå®šä¹‰ä¸€ä¸ªå¸¸è§çš„æšä¸¾
typedef NS_ENUM(NSUInteger, KLType) {
    KLTypeRed = 1,
    KLTypeGreen = 2,
    KLTypeOrange = 3,
};
// è¿™ä¸ªæ˜¯ Map NSString * ç±»å‹çš„æ•°ç»„
NSString *KLTypeStringMap[] = {
    [KLTypeRed] = @&quot;çº¢è‰²&quot;,
    [KLTypeGreen] = @&quot;ç»¿è‰²&quot;,
    [KLTypeOrange] = @&quot;æ©˜è‰²&quot;
};


// ä½¿ç”¨ï¼š
KLTypeStringMap[KLTypeRed];// æšä¸¾å€¼
</code></pre>

<h3 id="toc_7">æ—¥å¸¸åšæ³• å®å®šä¹‰</h3>

<pre><code class="language-text">#define  KLTypeStringRed  @&quot;çº¢è‰²&quot;;
#define  KLTypeStringGreen  @&quot;ç»¿è‰²&quot;;
#define  KLTypeStringOrange  @&quot;æ©˜è‰²&quot;;
</code></pre>

<blockquote>
<p>ä¸Šé¢å‡ ç§æ–¹å¼éƒ½èƒ½å®ç°  æšä¸¾å€¼ åˆ° å­—ç¬¦ä¸²çš„è½¬æ¢ï¼Œä½†æ˜¯æœ‰ä¸€ä¸ªç¼ºç‚¹ï¼š <code>KLTypeStringMap</code> å’Œ <code>KLTypeString</code> ä¸èƒ½åƒæšä¸¾ç±»å‹ä¸€æ ·ç›´æ¥ä½œä¸ºä¸€ä¸ªç±»å‹ é™å®š ä¼ å‚ç±»å‹ã€‚</p>
</blockquote>

<hr/>

<h3 id="toc_8">å®šä¹‰ä¸€ç§æ–°çš„æ•°æ®ç±»å‹</h3>

<pre><code class="language-text">// å®šä¹‰ä¸€ä¸ªæ–°çš„ç±»å‹ æ˜¯ NSSting * ç±»å‹ ç±»å‹åå­—å« KLTypeStr
typedef NSString *KLTypeStr NS_STRING_ENUM;

static KLTypeStr const KLTypeStringRed = @&quot;çº¢è‰²&quot;;
static KLTypeStr const KLTypeStringGreen = @&quot;ç»¿è‰²&quot;;
static KLTypeStr const KLTypeStringOrange = @&quot;æ©˜è‰²&quot;;
</code></pre>

<h3 id="toc_9">Appleå®˜æ–¹çš„åšæ³•</h3>

<pre><code class="language-text">.h æ–‡ä»¶ä¸­ -------------
typedef NSString *KLTypeStr NS_STRING_ENUM;

FOUNDATION_EXPORT KLTypeStr const KLTypeStringRed;
FOUNDATION_EXPORT KLTypeStr const KLTypeStringGreen;
FOUNDATION_EXPORT KLTypeStr const KLTypeStringOrange;

.m æ–‡ä»¶ä¸­ --------------
NSString * const KLTypeStringRed = @&quot;çº¢è‰²&quot;;
NSString * const KLTypeStringGreen = @&quot;ç»¿è‰²&quot;;
NSString * const KLTypeStringOrange = @&quot;æ©˜è‰²&quot;; 

</code></pre>

<blockquote>
<p>æ¯”è¾ƒçš„æ—¶å€™ <code>StringEnum1 == StringEnum2</code> ç›´æ¥æ¯”è¾ƒçš„æ˜¯å†…å­˜åœ°å€ï¼Œæ•ˆç‡ä¼šæ›´é«˜ã€‚<br/>
ç›¸æ¯”ä¼šäº§ç”Ÿè¿‡å¤šäºŒè¿›åˆ¶æ–‡ä»¶çš„å®å®šä¹‰æ–¹å¼,å‡å¦‚å®å®šä¹‰æ¯”è¾ƒå¤š,å»ºè®®ç”¨FOUNDATION_EXPORTã€‚</p>
</blockquote>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Xcode 11 Xib `_UITextLayoutView` å´©æºƒ]]></title>
    <link href="http://kaelinda.top/15729429393060.html"/>
    <updated>2019-11-05T16:35:39+08:00</updated>
    <id>http://kaelinda.top/15729429393060.html</id>
    <content type="html"><![CDATA[
<p>å´©æºƒä¿¡æ¯å¦‚ä¸‹ï¼š</p>

<pre><code class="language-text">*** Terminating app due to uncaught exception 
&#39;NSInvalidUnarchiveOperationException&#39;, 
reason: &#39;Could not instantiate class named _UITextLayoutView because no class named _UITextLayoutView was found; 
the class needs to be defined in source code or linked in from a library (ensure the class is part of the correct target)&#39;
</code></pre>

<p>è§£å†³æ–¹æ¡ˆï¼š</p>

<h2 id="toc_0">è§£å†³æ–¹æ¡ˆ ä¸€</h2>

<p>xibçš„éƒ¨åˆ†è§†å›¾æ”¹ç”¨ç¡¬æ ¸æ‰‹å†™ï¼Œä»¥é¿å‘ã€‚</p>

<h2 id="toc_1">è§£å†³æ–¹æ¡ˆ äºŒ</h2>

<p><a href="https://developer.apple.com/download/more">ä¸‹è½½å…¶ä»–ç‰ˆæœ¬Xcode ä¼ é€é—¨</a></p>

<h2 id="toc_2">è§£å†³æ–¹æ¡ˆ ä¸‰</h2>

<p>OC é»‘é­”æ³• <code>Runtime</code>ã€‚</p>

<ul>
<li><p>åˆ›å»º æ–‡ä»¶ <code>UITextViewWorkaround</code></p></li>
<li><p>UITextViewWorkaround.h</p></li>
</ul>

<pre><code class="language-text">#import &lt;Foundation/Foundation.h&gt;

@interface UITextViewWorkaround : NSObject
+ (void)executeWorkaround; 
@end

</code></pre>

<ul>
<li>UITextViewWorkaround.m</li>
</ul>

<pre><code class="language-text">#import &quot;UITextViewWorkaround.h&quot;
#import  &lt;objc/runtime.h&gt;



@implementation UITextViewWorkaround

+ (void)executeWorkaround {
    if (@available(iOS 13.2, *)) {

    }
    else {
        const char *className = &quot;_UITextLayoutView&quot;;
        Class cls = objc_getClass(className);
        if (cls == nil) {
            cls = objc_allocateClassPair([UIView class], className, 0);
            objc_registerClassPair(cls);
#if DEBUG
            printf(&quot;added %s dynamically\n&quot;, className);
#endif
        }
    }
}

@end
</code></pre>

<ul>
<li>ä½¿ç”¨è¯¥é™æ€æ–¹æ³•</li>
</ul>

<pre><code class="language-text">#import &quot;UITextViewWorkaround.h&quot;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
    // Override point for customization after application launch.

    [UITextViewWorkaround executeWorkaround];
    return yes;
}
</code></pre>

<ul>
<li>swift ç‰ˆæœ¬è¯·å®¢è§‚æ”¶ä¸‹ï¼š</li>
</ul>

<pre><code class="language-text">import UIKit

@objc
class UITextViewWorkaround : NSObject {

    static func executeWorkaround() {
        if #available(iOS 13.2, *) {
        } else {
            let className = &quot;_UITextLayoutView&quot;
            let theClass = objc_getClass(className)
            if theClass == nil {
                let classPair: AnyClass? = objc_allocateClassPair(UIView.self, className, 0)
                objc_registerClassPair(classPair!)
            }
        }
    }

}
</code></pre>

<p><a href="https://stackoverflow.com/questions/58657087/after-upgrading-to-xcode-11-2-from-xcode-11-1-app-crashes-due-to-uitextlayoutv">å‚è€ƒ</a></p>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[ã€è¿›é˜¶ã€‘iOSè‡ªå®šä¹‰ViewControllerè½¬åœºåŠ¨ç”»]]></title>
    <link href="http://kaelinda.top/15565436191697.html"/>
    <updated>2019-04-29T21:13:39+08:00</updated>
    <id>http://kaelinda.top/15565436191697.html</id>
    <content type="html"><![CDATA[
<h2 id="toc_0">éµå®ˆåè®® <code>&lt;UIViewControllerAnimatedTransitioning&gt;</code>çš„åŠ¨ç”»è½¬åœºç®¡ç†å¯¹è±¡</h2>

<ul>
<li>API</li>
</ul>

<pre><code class="language-text">// è‡ªå®šä¹‰åŠ¨ç”»æ—¶é•¿
- (NSTimeInterval)transitionDuration:(id&lt;UIViewControllerContextTransitioning&gt;)transitionContext{
    return 0.4;
}
// è‡ªå®šä¹‰åŠ¨ç”»è¿‡ç¨‹
- (void)animateTransition:(id&lt;UIViewControllerContextTransitioning&gt;)transitionContext{
}
</code></pre>

<ul>
<li>å®ç°</li>
</ul>

<pre><code class="language-text">- (NSTimeInterval)transitionDuration:(nullable id &lt;UIViewControllerContextTransitioning&gt;)transitionContext{
    return 0.3;
}
//æ‰€æœ‰çš„è¿‡æ¸¡åŠ¨ç”»äº‹åŠ¡éƒ½åœ¨è¿™ä¸ªæ–¹æ³•é‡Œé¢å®Œæˆ
- (void)animateTransition:(id &lt;UIViewControllerContextTransitioning&gt;)transitionContext{

 //å–å‡ºè½¬åœºå‰åçš„è§†å›¾æ§åˆ¶å™¨
  UIViewController * fromVC = (UIViewController *)[transitionContext viewControllerForKey:UITransitionContextFromViewControllerKey];
  UIViewController * toVC = (UIViewController *)[transitionContext viewControllerForKey:UITransitionContextToViewControllerKey];

 //å–å‡ºè½¬åœºå‰åè§†å›¾æ§åˆ¶å™¨ä¸Šçš„è§†å›¾view
    UIView * toView = [transitionContext viewForKey:UITransitionContextToViewKey];
    UIView * fromView = [transitionContext viewForKey:UITransitionContextFromViewKey];

 //è¿™é‡Œæœ‰ä¸ªé‡è¦çš„æ¦‚å¿µcontainerViewï¼Œè¦åšè½¬åœºåŠ¨ç”»çš„è§†å›¾å°±å¿…é¡»è¦åŠ å…¥containerViewä¸Šæ‰èƒ½è¿›è¡Œï¼Œå¯ä»¥ç†è§£containerViewç®¡ç†ç€æ‰€æœ‰åšè½¬åœºåŠ¨ç”»çš„è§†å›¾
    UIView *containerView = [transitionContext containerView];

  //å¦‚æœåŠ å…¥äº†æ‰‹åŠ¿äº¤äº’è½¬åœºï¼Œå°±éœ€è¦æ ¹æ®æ‰‹åŠ¿äº¤äº’åŠ¨ä½œæ˜¯å¦å®Œæˆ/å–æ¶ˆæ¥åšæ“ä½œï¼Œå®Œæˆæ ‡è®°YESï¼Œå–æ¶ˆæ ‡è®°NOï¼Œå¿…é¡»æ ‡è®°ï¼Œå¦åˆ™ç³»ç»Ÿè®¤ä¸ºè¿˜å¤„äºåŠ¨ç”»è¿‡ç¨‹ä¸­ï¼Œä¼šå‡ºç°æ— æ³•äº¤äº’ä¹‹ç±»çš„bug
   [transitionContext completeTransition:![transitionContext transitionWasCancelled]];
     if ([transitionContext transitionWasCancelled]) { 
    //å¦‚æœå–æ¶ˆè½¬åœº
          }else{
   //å®Œæˆè½¬åœº
     }
}
</code></pre>

<h2 id="toc_1">ç»§æ‰¿çˆ¶ç±»<code>UIPercentDrivenInteractiveTransition</code>çš„äº¤äº’åŠ¨ç”»ç®¡ç†å¯¹è±¡</h2>

<ul>
<li>API</li>
</ul>

<pre><code class="language-text">//å¿…è¦è°ƒç”¨å®ç°çš„ç³»ç»Ÿæ–¹æ³•
//æ‰‹åŠ¿è¿‡ç¨‹ä¸­ï¼Œé€šè¿‡updateInteractiveTransitionè®¾ç½®è½¬åœºè¿‡ç¨‹åŠ¨ç”»è¿›è¡Œçš„ç™¾åˆ†æ¯”ï¼Œç„¶åç³»ç»Ÿä¼šæ ¹æ®ç™¾åˆ†æ¯”è‡ªåŠ¨å¸ƒå±€åŠ¨ç”»æ§ä»¶ï¼Œä¸ç”¨æˆ‘ä»¬æ§åˆ¶äº†
 [self updateInteractiveTransition:percentComplete];
//å®Œæˆè½¬åœºæ“ä½œ
 [self finishInteractiveTransition];
//å–æ¶ˆè½¬åœºæ“ä½œ
 [self cancelInteractiveTransition];
</code></pre>

<h2 id="toc_2">éµå®ˆ<code>&lt;UIViewControllerTransitioningDelegate&gt;</code>çš„è§†å›¾æ§åˆ¶å™¨è½¬åœºåŠ¨ç”»ç®¡ç†å¯¹è±¡</h2>

<pre><code class="language-text">-(id&lt;UIViewControllerAnimatedTransitioning&gt;)animationControllerForPresentedController:(UIViewController *)presented presentingController:(UIViewController *)presenting sourceController:(UIViewController *)source{
    return self.pushAnimator;
}

-(id&lt;UIViewControllerAnimatedTransitioning&gt;)animationControllerForDismissedController:(UIViewController *)dismissed{
    return self.popAnimator;
}

#pragma mark ------- æ‰‹åŠ¿äº¤äº’æ·»åŠ 

- (nullable id &lt;UIViewControllerInteractiveTransitioning&gt;)interactionControllerForPresentation:(id &lt;UIViewControllerAnimatedTransitioning&gt;)animator{
    
    return nil;//è¿”å›ç»§æ‰¿çˆ¶ç±»`UIPercentDrivenInteractiveTransition`çš„äº¤äº’åŠ¨ç”»ç®¡ç†å¯¹è±¡
}

- (nullable id &lt;UIViewControllerInteractiveTransitioning&gt;)interactionControllerForDismissal:(id &lt;UIViewControllerAnimatedTransitioning&gt;)animator{
        return nil;//è¿”å›ç»§æ‰¿çˆ¶ç±»`UIPercentDrivenInteractiveTransition`çš„äº¤äº’åŠ¨ç”»ç®¡ç†å¯¹è±¡
}
</code></pre>

<h2 id="toc_3">ä½¿ç”¨æ­¥éª¤</h2>

<ul>
<li><p>è®¾ç½®ä»£ç†</p>
<ul>
<li><p>push</p>
<p><code>self.navigationController.delegate = self.animatedTransition;</code></p></li>
<li><p>present</p>
<p><code>toViewController.transitioningDelegate = self.browserAnimation;</code></p></li>
</ul></li>
<li><p>åˆ†åˆ«è®¾ç½® push POP æ˜¯å“ªä¸ªåŠ¨ç”»å¯¹è±¡</p>
<pre><code class="language-text">-(id&lt;UIViewControllerAnimatedTransitioning&gt;)animationControllerForPresentedController:(UIViewController *)presented presentingController:(UIViewController *)presenting sourceController:(UIViewController *)source{
    return self.pushAnimator;<br/>
}<br/>
-(id&lt;UIViewControllerAnimatedTransitioning&gt;)animationControllerForDismissedController:(UIViewController *)dismissed{<br/>
    return self.popAnimator;<br/>
}<br/>
- (nullable id &lt;UIViewControllerInteractiveTransitioning&gt;)interactionControllerForPresentation:(id &lt;UIViewControllerAnimatedTransitioning&gt;)animator{<br/>
    return nil;<br/>
}<br/>
- (nullable id &lt;UIViewControllerInteractiveTransitioning&gt;)interactionControllerForDismissal:(id &lt;UIViewControllerAnimatedTransitioning&gt;)animator{<br/>
        return nil;<br/>
}<br/>
// ---------- push è¿˜å¯ä»¥è¿™ä¹ˆå»åˆ†é…åŠ¨ç”»å¯¹è±¡<br/>
-(id&lt;UIViewControllerAnimatedTransitioning&gt;)navigationController:(UINavigationController *)navigationController animationControllerForOperation:(UINavigationControllerOperation)operation fromViewController:(UIViewController *)fromVC toViewController:(UIViewController *)toVC{<br/>
if (operation == UINavigationControllerOperationPush) {<br/>
    return self.pushAniamtor;<br/>
}else if (operation == UINavigationControllerOperationPop){<br/>
    return self.popAnimator;<br/>
}<br/>
return nil;<br/>
}
</code></pre></li>
<li><p>åŠ¨ç”»å¯¹è±¡å†… è®¾ç½® åŠ¨ç”»æ—¶é•¿ å’Œ åŠ¨ç”»å®ç°</p>
<pre><code class="language-text">- (NSTimeInterval)transitionDuration:(id&lt;UIViewControllerContextTransitioning&gt;)transitionContext{
return 0.4;<br/>
}<br/>
- (void)animateTransition:(id&lt;UIViewControllerContextTransitioning&gt;)transitionContext{<br/>
}
</code></pre></li>
</ul>

<h2 id="toc_4">å‘ç‚¹</h2>

<ul>
<li>    <code>.modalPresentationStyle = UIModalPresentationCustom;</code>modalPresentationStyleè¿™ä¸ªå±æ€§ä¼šå½±å“presentå‡ºæ¥çš„VCçš„æ¨ªç«–å±ï¼ˆæ¨ªå±å˜ç«–å±ï¼‰</li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[iOS ä¹‹ æºç é˜…è¯» ã€Aspectsã€‘]]></title>
    <link href="http://kaelinda.top/15562035528015.html"/>
    <updated>2019-04-25T22:45:52+08:00</updated>
    <id>http://kaelinda.top/15562035528015.html</id>
    <content type="html"><![CDATA[
<p><strong>å…³é”®è¯</strong></p>

<ul>
<li>Runtime</li>
<li>AOP(é¢å‘åè®®ç¼–ç¨‹)</li>
<li>Hook</li>
</ul>

<h2 id="toc_0">åŸºæœ¬ç”¨æ³•</h2>

<pre><code class="language-text">[KLBaseViewController aspect_hookSelector:@selector(logSomethings) withOptions:AspectPositionAfter usingBlock:^(id&lt;AspectInfo&gt; aspectInfo)
     {
         NSLog(@&quot;%@ å¯¹è±¡çš„viewDidLoadè°ƒç”¨äº†&quot;,aspectInfo.instance);
         
         [self doSomethings:aspectInfo.instance];
     } error:NULL];
</code></pre>

<h2 id="toc_1">ä¸»è¦API</h2>

<pre><code class="language-text">#pragma mark - Public Aspects API
+ (id&lt;AspectToken&gt;)aspect_hookSelector:(SEL)selector
                           withOptions:(AspectOptions)options
                            usingBlock:(id)block
                                 error:(NSError **)error {
    return aspect_add((id)self, selector, options, block, error);
}

/// @return A token which allows to later deregister the aspect.
- (id&lt;AspectToken&gt;)aspect_hookSelector:(SEL)selector
                           withOptions:(AspectOptions)options
                            usingBlock:(id)block
                                 error:(NSError **)error {
    return aspect_add(self, selector, options, block, error);
}
</code></pre>

<h2 id="toc_2">æºç è§£æ</h2>

<h3 id="toc_3">AspectOptions</h3>

<pre><code class="language-text">typedef NS_OPTIONS(NSUInteger, AspectOptions) {
    AspectPositionAfter   = 0,            /// hookçš„æ–¹æ³•æ‰§è¡Œä¹‹åæ‰§è¡Œ
    AspectPositionInstead = 1,            /// å®Œå…¨æ›¿ä»£ä¹‹å‰çš„æ–¹æ³•
    AspectPositionBefore  = 2,            /// hookçš„æ–¹æ³•æ‰§è¡Œä¹‹å‰æ‰§è¡Œ
    AspectOptionAutomaticRemoval = 1 &lt;&lt; 3 /// æ‰§è¡Œä¹‹åç§»é™¤
};
</code></pre>

<h3 id="toc_4">AspectToken</h3>

<pre><code class="language-text">@protocol AspectToken &lt;NSObject&gt;

- (BOOL)remove;

@end
</code></pre>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[iOS ä¹‹ APPå®‰å…¨]]></title>
    <link href="http://kaelinda.top/15659429705338.html"/>
    <updated>2019-08-16T16:09:30+08:00</updated>
    <id>http://kaelinda.top/15659429705338.html</id>
    <content type="html"><![CDATA[
<h2 id="toc_0">æ£€æµ‹è®¾å¤‡æ˜¯å¦è¶Šç‹±</h2>

<pre><code class="language-text">+ (BOOL)isJailBreak {
    if ([[NSFileManager defaultManager] fileExistsAtPath:@&quot;/Applications/Cydia.app&quot;]){
        return YES;
    }
    
    if ([[NSFileManager defaultManager] fileExistsAtPath:@&quot;/Library/MobileSubstrate/MobileSubstrate.dylib&quot;]){
        return YES;
    }
    
    if ([[NSFileManager defaultManager] fileExistsAtPath:@&quot;/bin/bash&quot;]){
        return YES;
    }
    
    if ([[NSFileManager defaultManager] fileExistsAtPath:@&quot;/usr/sbin/sshd&quot;]){
        return YES;
    }
    
    if ([[NSFileManager defaultManager] fileExistsAtPath:@&quot;/etc/apt&quot;]){
        return YES;
    }
    if ([[UIApplication sharedApplication] canOpenURL:[NSURL URLWithString:@&quot;cydia://&quot;]]) {
        return YES;
    }
    return NO;
}
</code></pre>

<h2 id="toc_1">æ£€æµ‹è®¾å¤‡ç½‘ç»œç¯å¢ƒæ˜¯å¦å¼€å¯ä»£ç†</h2>

<pre><code class="language-text">NSDictionary *proxySettings = (__bridge NSDictionary *)(CFNetworkCopySystemProxySettings());
NSArray *proxies = (__bridge NSArray *)(CFNetworkCopyProxiesForURL((__bridge CFURLRef _Nonnull)([NSURL URLWithString:@&quot;https://www.baidu.com&quot;]), (__bridge CFDictionaryRef _Nonnull)(proxySettings)));

NSLog(@&quot;\n%@&quot;,proxies);
NSDictionary *settings = proxies[0];
NSLog(@&quot;%@&quot;,[settings objectForKey:(NSString *)kCFProxyHostNameKey]);
NSLog(@&quot;%@&quot;,[settings objectForKey:(NSString *)kCFProxyPortNumberKey]);
NSLog(@&quot;%@&quot;,[settings objectForKey:(NSString *)kCFProxyTypeKey]);
    if ([[settings objectForKey:(NSString *)kCFProxyTypeKey] isEqualToString:@&quot;kCFProxyTypeNone&quot;])
    {
        NSLog(@&quot;kael æ²¡ä»£ç†&quot;);
    }
                                                                                                     else
    {
        NSLog(@&quot;kael è®¾ç½®äº†ä»£ç†&quot;);
    }
</code></pre>

<h2 id="toc_2">APP ç¦æ­¢åŠ¨æ€è°ƒè¯•</h2>

<pre><code class="language-text">#import &lt;UIKit/UIKit.h&gt; 
#import &quot;AppDelegate.h&quot;  
#import &lt;dlfcn.h&gt;

typedef int (*ptrace_ptr_t)(int _request, pid_t _pid, caddr_t _addr, int _data);
#if !defined(PT_DENY_ATTACH)
#define PT_DENY_ATTACH 31
#endif  // !defined(PT_DENY_ATTACH)

void disable_gdb() {
  void* handle = dlopen(0, RTLD_GLOBAL | RTLD_NOW);
  ptrace_ptr_t ptrace_ptr = dlsym(handle, &quot;ptrace&quot;);
  ptrace_ptr(PT_DENY_ATTACH, 0, 0, 0);
  dlclose(handle);
}

int main(int argc, char * argv[]) {
#ifndef DEBUG
    disable_gdb();
#endif
    @autoreleasepool {
        return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class]));
    }
}
</code></pre>

<p>å¦‚æœä½ åœ¨Xcodeè°ƒè¯•ç¯å¢ƒä¸‹ï¼Œå»æ‰#ifndef DEBUG #endifè¿™å¥è¯ï¼Œä½ ä¼šå‘ç°ï¼ŒXcodeæ— æ³•è°ƒè¯•è¯¥åº”ç”¨ï¼›å› ä¸ºåŠ¨æ€çš„åŠ è½½äº†ptraceï¼Œç„¶åç»™ä¼ è¾“çš„å®æ˜¯PT_DENY_ATTACH æ‹’ç»é™„åŠ è¿›ç¨‹</p>

<h2 id="toc_3">ä»£ç æ··æ·† è„šæœ¬</h2>

<p><a href="https://zfj1128.blog.csdn.net/article/details/95482006">ä»£ç æ··æ·†ç›¸å…³ å‚è€ƒæ–‡ç« </a></p>

<pre><code class="language-text">TABLENAME=symbols
SYMBOL_DB_FILE=&quot;$PROJECT_DIR/CodeObfuscation/symbols&quot;
STRING_SYMBOL_FILE=&quot;$PROJECT_DIR/CodeObfuscation/func.list&quot;
HEAD_FILE=&quot;$PROJECT_DIR/CodeObfuscation/codeObfuscation.h&quot;
export LC_CTYPE=C

#ç»´æŠ¤æ•°æ®åº“æ–¹ä¾¿æ—¥åä½œæ’é‡
createTable()
{
echo &quot;create table $TABLENAME(src text, des text);&quot; | sqlite3 $SYMBOL_DB_FILE
}

insertValue()
{
echo &quot;insert into $TABLENAME values(&#39;$1&#39; ,&#39;$2&#39;);&quot; | sqlite3 $SYMBOL_DB_FILE
}

query()
{
echo &quot;select * from $TABLENAME where src=&#39;$1&#39;;&quot; | sqlite3 $SYMBOL_DB_FILE
}

ramdomString()
{
openssl rand -base64 64 | tr -cd &#39;a-zA-Z&#39; |head -c 16
}

rm -f $SYMBOL_DB_FILE
rm -f $HEAD_FILE
createTable

touch $HEAD_FILE
echo &#39;#ifndef Demo_codeObfuscation_h
#define Demo_codeObfuscation_h&#39; &gt;&gt; $HEAD_FILE
echo &quot;//confuse string at `date`&quot; &gt;&gt; $HEAD_FILE
cat &quot;$STRING_SYMBOL_FILE&quot; | while read -ra line; do
if [[ ! -z &quot;$line&quot; ]]; then
ramdom=`ramdomString`
echo $line $ramdom
insertValue $line $ramdom
echo &quot;#define $line $ramdom&quot; &gt;&gt; $HEAD_FILE
fi
done
echo &quot;#endif&quot; &gt;&gt; $HEAD_FILE


sqlite3 $SYMBOL_DB_FILE .dump
</code></pre>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[iOS13é€‚é…æ³¨æ„äº‹é¡¹]]></title>
    <link href="http://kaelinda.top/15680242190062.html"/>
    <updated>2019-09-09T18:16:59+08:00</updated>
    <id>http://kaelinda.top/15680242190062.html</id>
    <content type="html"><![CDATA[
<p>æŠ€æœ¯å‚è€ƒï¼š</p>

<p><a href="https://developer.apple.com/design/human-interface-guidelines/sign-in-with-apple/overview/">apple login</a></p>

<p><a href="https://www.jianshu.com/p/46cd57b98b0d">IOS13é€‚é…-è¯¦ç»†</a></p>

<p><a href="https://www.jianshu.com/p/373a8fb3b345">iOS 13 é€‚é…(æŒç»­æ›´æ–°ä¸­)</a></p>

<p><a href="https://www.jianshu.com/p/4654f8f6e16e">iOS13é€‚é…</a></p>

<p><a href="https://juejin.im/post/5d745f8af265da03b5746fa0">æ˜é‡‘ iOS 13é€‚é…01</a></p>

<p><a href="https://juejin.im/post/5d00af64e51d455d88219ee2#heading-8">æ˜é‡‘  é€‚é… iOS13</a></p>

<p><a href="https://github.com/ChenYilong/iOS13AdaptationTips/issues?q=is%3Aissue+is%3Aopen+label%3Anote">iOS 13 æ›´æ–°tips</a></p>

<p><a href="https://medium.com/@hacknicity/view-controller-presentation-changes-in-ios-13-ac8c901ebc4e">View Controller Presentation Changes in iOS 13</a></p>

<h2 id="toc_0">1. Apple Login ï¼ˆ2020å¹´4æœˆä»½ï¼‰</h2>

<p><a href="https://links.jianshu.com/go?to=https%3A%2F%2Fdocs-assets.developer.apple.com%2Fpublished%2F80ac09c84c%2FAddingTheSignInWithAppleFlowToYourApp.zip">é™„ä¸Šå®˜æ–¹Demoï¼šä¸‹è½½åœ°å€</a></p>

<h2 id="toc_1">2. Dark Mode</h2>

<h3 id="toc_2">2.1 æš—é»‘æ¨¡å¼ çŠ¶æ€åˆ¤æ–­ &amp;&amp; åˆ‡æ¢ç›‘å¬</h3>

<ul>
<li>åˆ¤æ–­æ¨¡å¼çŠ¶æ€</li>
</ul>

<pre><code class="language-text">if (UITraitCollection.currentTraitCollection.userInterfaceStyle == UIUserInterfaceStyleDark) {
    // æš—é»‘æ¨¡å¼
}
else {
    // æ­£å¸¸æ¨¡å¼
}
</code></pre>

<ul>
<li>ç›‘å¬æ¨¡å¼åˆ‡æ¢</li>
</ul>

<pre><code class="language-text">// æ³¨æ„:å‚æ•°ä¸ºå˜åŒ–å‰çš„traitCollection
- (void)traitCollectionDidChange:(UITraitCollection *)previousTraitCollection;

// åˆ¤æ–­ä¸¤ä¸ªUITraitCollectionå¯¹è±¡æ˜¯å¦ä¸åŒ
- (BOOL)hasDifferentColorAppearanceComparedToTraitCollection:(UITraitCollection *)traitCollection;
</code></pre>

<h3 id="toc_3">2.2 ç¦ç”¨æš—é»‘æ¨¡å¼</h3>

<ul>
<li><p>info.plist å†…APPçº§åˆ«ç¦ç”¨æš—é»‘æ¨¡å¼</p>
<p>Key: <code>User Interface Style</code><br/>
value: <code>Light</code></p></li>
<li><p>widowçº§åˆ«çš„ç¦ç”¨æš—é»‘æ¨¡å¼</p>
<pre><code class="language-text">if (@available(iOS 13.0, *)) {
    [UIApplication sharedApplication].keyWindow.overrideUserInterfaceStyle = UIUserInterfaceStyleLight;<br/>
}
</code></pre></li>
<li><p>ViewControllerçº§åˆ«ç¦ç”¨æš—é»‘æ¨¡å¼</p>
<p>æƒ³å…¨å±€ç¦ç”¨éœ€è¦åœ¨ baseVCå†…å…¨å±€ç¦ç”¨</p>
<pre><code class="language-text">#if defined(__IPHONE_13_0) &amp;&amp; __IPHONE_OS_VERSION_MAX_ALLOWED &gt;= __IPHONE_13_0
- (UIUserInterfaceStyle)overrideUserInterfaceStyle{<br/>
    return UIUserInterfaceStyleLight;<br/>
}<br/>
#endif
</code></pre></li>
<li><p>viewçº§åˆ«ç¦ç”¨æš—é»‘æ¨¡å¼</p>
<pre><code class="language-text">view.overrideUserInterfaceStyle = UIUserInterfaceStyleLight;
</code></pre></li>
</ul>

<h3 id="toc_4">2.3 é€‚é…æš—é»‘æ¨¡å¼é¢œè‰²</h3>

<p><a href="https://www.jianshu.com/p/7925bd51d2d6">å‚è€ƒè¿™é‡Œ ï¼šiOSå¼€å‘å¦‚ä½•é€‚é…æš—é»‘æ¨¡å¼ï¼ˆDark Modeï¼‰</a></p>

<pre><code class="language-text">+ (UIColor *)colorWithDynamicProvider:(UIColor * (^)(UITraitCollection *))dynamicProvider API_AVAILABLE(ios(13.0), tvos(13.0)) API_UNAVAILABLE(watchos);
- (UIColor *)initWithDynamicProvider:(UIColor * (^)(UITraitCollection *))dynamicProvider API_AVAILABLE(ios(13.0), tvos(13.0)) API_UNAVAILABLE(watchos);
</code></pre>

<pre><code class="language-text">[UIColor colorWithDynamicProvider:^UIColor * _Nonnull(UITraitCollection * _Nonnull trait) {
    if (trait.userInterfaceStyle == UIUserInterfaceStyleDark) {
        return UIColorRGB(0x000000);
    } else {
        return UIColorRGB(0xFFFFFF);
    }
 }];
</code></pre>

<h2 id="toc_5">3. present åŠå±é—®é¢˜</h2>

<p><code>modalPresentationStyle</code>å±æ€§é»˜è®¤ä¸æ˜¯<code>UIModalPresentationFullScreen</code>äº†ï¼Œéœ€è¦æ ¹æ®éœ€æ±‚æ‰‹åŠ¨è®¾ç½®ã€‚</p>

<pre><code class="language-text">LXNavigationViewController *nav = [[LXNavigationViewController alloc] initWithRootViewController:loginViewController];
nav.modalPresentationStyle = UIModalPresentationFullScreen;
[self presentViewController:nav animated:YES completion:nil];

</code></pre>

<ul>
<li><p>å…¨å±€hook <code>presentViewController</code>æ–¹æ³•</p>
<pre><code class="language-text">+ (void)hoookPresentFuc{
    [UIViewController aspect_hookSelector:@selector(presentViewController:animated:completion:) withOptions:AspectPositionBefore usingBlock:^(id&lt;AspectInfo&gt; aspectInfo){<br/>
        UIViewController *presentingVC =  (UIViewController *)aspectInfo.arguments.firstObject;<br/>
        presentingVC.modalPresentationStyle = UIModalPresentationFullScreen;<br/>
    } error:NULL];<br/>
}
</code></pre></li>
</ul>

<h2 id="toc_6">4. UITextField</h2>

<ul>
<li>æ”¯ä»˜è¾“å…¥å¯†ç æœ‰é—®é¢˜</li>
</ul>

<h3 id="toc_7">UITextField çš„ç§æœ‰å±æ€§ _placeholderLabel è¢«ç¦æ­¢è®¿é—®äº†</h3>

<ul>
<li><code>_placeholderLabel.textColor</code> ç§æœ‰å±æ€§è¢«ç¦æ­¢è®¿é—®</li>
</ul>

<pre><code class="language-text">[self.textField setValue:self.placeholderColor forKeyPath:@&quot;_placeholderLabel.textColor&quot;];
</code></pre>

<p>å´©æºƒä¿¡æ¯ï¼š</p>

<pre><code class="language-text">&#39;Access to UITextField&#39;s _placeholderLabel ivar is prohibited. 
This is an application bug&#39; 
</code></pre>

<ul>
<li>è§£å†³æ–¹æ¡ˆ</li>
</ul>

<pre><code class="language-text">UITextFieldæœ‰ä¸ªattributedPlaceholderçš„å±æ€§ï¼Œæˆ‘ä»¬å¯ä»¥è‡ªå®šä¹‰è¿™ä¸ªå¯Œæ–‡æœ¬æ¥è¾¾åˆ°æˆ‘ä»¬éœ€è¦çš„ç»“æœã€‚

NSMutableAttributedString *placeholderString = [[NSMutableAttributedString alloc] initWithString:placeholder attributes:@{NSForegroundColorAttributeName : self.placeholderColor}];
_textField.attributedPlaceholder = placeholderString;
</code></pre>

<ul>
<li>é¡¹ç›®é€‚é…ä»£ç </li>
</ul>

<pre><code class="language-text">if (@available(iOS 13.0, *)) {
    if (textField.attributedText.length &gt; 0) {
        color = textField.attributedText.color;
    }
}else{
    color = [textField valueForKeyPath:@&quot;_placeholderLabel.textColor&quot;];
}
</code></pre>

<p>iOS 13 é€šè¿‡ KVC æ–¹å¼ä¿®æ”¹ç§æœ‰å±æ€§ï¼Œæœ‰ Crash é£é™©ï¼Œè°¨æ…ä½¿ç”¨ï¼å¹¶ä¸æ˜¯æ‰€æœ‰KVCéƒ½ä¼šCrashï¼Œè¦å°è¯•ï¼</p>

<h2 id="toc_8">5. UITextView åŒä¸Š</h2>

<h2 id="toc_9">6. navigationBar ä½¿ç”¨<code>UINavigation+SXFixSpace</code></h2>

<pre><code class="language-text">if ([NSStringFromClass(subview.class) containsString:@&quot;ContentView&quot;]) {
    // ç»“æ„è°ƒæ•´å åœ¨è¿™é‡Œreturnæ‰
    if (@available(iOS 13.0, *)) {
        if ([NSStringFromClass(subview.class) containsString:@&quot;_UINavigationBarContentView&quot;]) {
            return;
        }
    }

    //å¯ä¿®æ­£iOS11ä¹‹åçš„åç§»
    subview.layoutMargins = UIEdgeInsetsMake(0, space, 0, space);break;
}
</code></pre>

<p>åŒæ—¶ï¼Œä¸‹é¢çš„å±æ€§ä¹Ÿå·²ç»è¢«ç¦æ­¢è®¿é—®äº†ï¼š</p>

<ul>
<li><p><code>[barBgView valueForKey:@&quot;_shadowView&quot;];</code></p></li>
<li><p><code>[barBgView valueForKey:@&quot;_backgroundEffectView&quot;];</code></p></li>
</ul>

<h2 id="toc_10">7. statusBar</h2>

<ul>
<li><p><code>UIStatusBarStyleDefault</code>æšä¸¾å€¼ä»£è¡¨å«ä¹‰æœ‰å˜åŒ–</p>
<pre><code class="language-text">typedef NS_ENUM(NSInteger, UIStatusBarStyle) {
UIStatusBarStyleDefault                                  = 0, // æ ¹æ®ç”¨æˆ·äº¤äº’æ ·å¼è‡ªåŠ¨é€‰æ‹©çŠ¶æ€æ¡æ ·å¼<br/>
UIStatusBarStyleLightContent     API_AVAILABLE(ios(7.0)) = 1, // Light content, for use on dark backgrounds<br/>
UIStatusBarStyleDarkContent     API_AVAILABLE(ios(13.0)) = 3, // Dark content, for use on light backgrounds<br/>
UIStatusBarStyleBlackTranslucent NS_ENUM_DEPRECATED_IOS(2_0, 7_0, &quot;Use UIStatusBarStyleLightContent&quot;) = 1,<br/>
UIStatusBarStyleBlackOpaque      NS_ENUM_DEPRECATED_IOS(2_0, 7_0, &quot;Use UIStatusBarStyleLightContent&quot;) = 2,<br/>
} API_UNAVAILABLE(tvos);
</code></pre></li>
<li><p>å®šåˆ¶çŠ¶æ€æ¡çš„æ ·å¼ ä½¿ç”¨apple æ¨èçš„è¿™ä¸ªç³»ç»Ÿæ–¹æ³•</p></li>
</ul>

<pre><code class="language-text">// ios 13.0 ä¹‹åï¼Œè¿™ä¸ªæ–¹æ³•å·²ç»å¤±æ•ˆäº†
// [[UIApplication sharedApplication] setStatusBarStyle:UIStatusBarStyleDefault];

- (UIStatusBarStyle)preferredStatusBarStyle {
    if (@available(iOS 13.0, *)){
        return UIStatusBarStyleDarkContent;
    }
    return UIStatusBarStyleDefault;
}
</code></pre>

<p><strong>æˆ–è€… ------&gt;&gt;ï¼š</strong></p>

<p><code>UIStatusBarStyleDefault</code> æ›¿æ¢ä¸º</p>

<pre><code class="language-text">(@available(iOS 13.0, *) ? UIStatusBarStyleDarkContent : UIStatusBarStyleDefault)
</code></pre>

<p>å¦‚æœä½ è¿˜æ˜¯ä½¿ç”¨çš„Xcode 10 ä¸ºäº†èµ°è¿‡ç¼–è¯‘å™¨è¿™ä¸€æ­¥ï¼Œå¯ä»¥ä½¿ç”¨é¢„ç¼–è¯‘å‘½ä»¤ï¼Œè¿™ä¹ˆå†™ï¼š</p>

<pre><code class="language-text">#if defined(__IPHONE_13_0) &amp;&amp; __IPHONE_OS_VERSION_MAX_ALLOWED &gt;= __IPHONE_13_0
    if (@available(iOS 13.0, *)) {
        [[UIApplication sharedApplication] setStatusBarStyle:UIStatusBarStyleDarkContent];
    }else{
        [[UIApplication sharedApplication] setStatusBarStyle:UIStatusBarStyleDefault];
    }
#else
    [[UIApplication sharedApplication] setStatusBarStyle:UIStatusBarStyleDefault];
#endif
</code></pre>

<h2 id="toc_11">8. UITabbar</h2>

<ul>
<li>æ¨ªçº¿<br/>
UITabbar å±‚æ¬¡å‘ç”Ÿæ”¹å˜ï¼Œæ— æ³•é€šè¿‡è®¾ç½® shadowImageå»æ‰ä¸Šé¢çš„çº¿ï¼›</li>
<li>çº¢ç‚¹<br/>
å¦‚æœä¹‹å‰æœ‰é€šè¿‡TabBarä¸Šå›¾ç‰‡ä½ç½®æ¥è®¾ç½®çº¢ç‚¹ä½ç½®ï¼Œåœ¨iOS13ä¸Šä¼šå‘ç°æ˜¾ç¤ºä½ç½®éƒ½åœ¨æœ€å·¦è¾¹å»äº†ã€‚éå†UITabBarButtonçš„subViewså‘ç°åªæœ‰åœ¨TabBaré€‰ä¸­çŠ¶æ€ä¸‹æ‰èƒ½å–åˆ°UITabBarSwappableImageViewï¼Œè§£å†³åŠæ³•æ˜¯ä¿®æ”¹ä¸ºé€šè¿‡UITabBarButtonçš„ä½ç½®æ¥è®¾ç½®çº¢ç‚¹çš„frame</li>
</ul>

<h2 id="toc_12">9. UISearchBar</h2>

<ul>
<li>UISearchBarçš„ç§æœ‰å±æ€§<code>UISearchBarBackground</code>ï¼Œç¦æ­¢è®¿é—®å’Œremove</li>
</ul>

<pre><code class="language-text">if ([subview isKindOfClass:NSClassFromString(@&quot;UISearchBarBackground&quot;)]) {
    if (@available(iOS 13.0, *)) {
        subview.backgroundColor = [UIColor lightGrayColor];
        // subview.layer.contents = nil;
    }else{
        [subview removeFromSuperview];
    }
}

</code></pre>

<h2 id="toc_13">10. å¢åŠ ä¸€ç›´ä½¿ç”¨è“ç‰™çš„æƒé™ç”³è¯·</h2>

<p><code>info.plist</code>æ–‡ä»¶ä¸‹<br/>
Key: <code>NSBluetoothAlwaysUsageDescription</code><br/>
Value: <code>æˆ‘ä»¬è¦ä¸€ç›´ä½¿ç”¨æ‚¨çš„è“ç‰™ï¼Œå…·ä½“åšä»€ä¹ˆåˆ«é—®æˆ‘</code></p>

<h2 id="toc_14">11. æ¨é€ è·å–deviceToken</h2>

<pre><code class="language-text">#include &lt;arpa/inet.h&gt;
- (void)application:(UIApplication *)application didRegisterForRemoteNotificationsWithDeviceToken:(NSData *)deviceToken
{
    if (![deviceToken isKindOfClass:[NSData class]]) return;
    const unsigned *tokenBytes = [deviceToken bytes];
    NSString *hexToken = [NSString stringWithFormat:@&quot;%08x%08x%08x%08x%08x%08x%08x%08x&quot;,
                          ntohl(tokenBytes[0]), ntohl(tokenBytes[1]), ntohl(tokenBytes[2]),
                          ntohl(tokenBytes[3]), ntohl(tokenBytes[4]), ntohl(tokenBytes[5]),
                          ntohl(tokenBytes[6]), ntohl(tokenBytes[7])];
    NSLog(@&quot;deviceToken:%@&quot;,hexToken);
}
</code></pre>

<h2 id="toc_15">12. CNCopyCurrentNetworkInfo</h2>

<pre><code class="language-text"> An app that fails to meet any of the above requirements receives the following return value:

- An app linked against iOS 12 or earlier receives a dictionary with pseudo-values. In this case, the SSID is Wi-Fi (or WLAN in the China region), and the BSSID is 00:00:00:00:00:00.
- An app linked against iOS 13 or later receives NULL.
- 
</code></pre>

<p>iOS13 ä»¥ååªæœ‰å¼€å¯äº† Access WiFi Information capabilityï¼Œæ‰èƒ½è·å–åˆ° SSID å’Œ BSSID</p>

<p><a href="https://link.juejin.im/?target=https%3A%2F%2Fdeveloper.apple.com%2Fdocumentation%2Fsystemconfiguration%2F1614126-cncopycurrentnetworkinfo%3Flanguage%3Docc">å‚è€ƒï¼šCNCopyCurrentNetworkInfo</a></p>

<h2 id="toc_16">13. APP å¯åŠ¨é€Ÿåº¦ä¼˜åŒ– å¯¼è‡´frameè·å–å¤±è´¥</h2>

<p>Appå¯åŠ¨è¿‡ç¨‹ä¸­ï¼Œéƒ¨åˆ†Viewå¯èƒ½æ— æ³•å®æ—¶è·å–åˆ°frameã€‚</p>

<h2 id="toc_17">14. WKWebView ä¸­æµ‹é‡é¡µé¢å†…å®¹é«˜åº¦çš„æ–¹å¼å˜æ›´</h2>

<p>iOS 13ä»¥å‰ document.body.scrollHeight iOS 13ä¸­ document.documentElement.scrollHeight ä¸¤è€…ç›¸å·®55 åº”è¯¥æ˜¯æµè§ˆå™¨å®šä¹‰é«˜åº¦å˜äº†</p>

<h2 id="toc_18">15. fishhook å¯¼è‡´çš„Crash</h2>

<p><a href="https://github.com/facebook/fishhook/issues">github fishhook</a></p>

<h2 id="toc_19">16. MPMoviePlayerController å·²ç»è¢«å¼ƒç”¨</h2>

<pre><code class="language-text">&#39;MPMoviePlayerController is no longer available. Use AVPlayerViewController in AVKit.&#39; 
</code></pre>

<h2 id="toc_20">17. LaunchImage å³å°†æ¶ˆå¤±</h2>

<p>ä» iOS 8 çš„æ—¶å€™ï¼Œè‹¹æœå°±å¼•å…¥äº† LaunchScreenï¼Œæˆ‘ä»¬å¯ä»¥è®¾ç½® LaunchScreenæ¥ä½œä¸ºå¯åŠ¨é¡µã€‚å½“ç„¶ï¼Œç°åœ¨ä½ è¿˜å¯ä»¥ä½¿ç”¨LaunchImageæ¥è®¾ç½®å¯åŠ¨å›¾ã€‚ä¸è¿‡ä½¿ç”¨LaunchImageçš„è¯ï¼Œè¦æ±‚æˆ‘ä»¬å¿…é¡»æä¾›å„ç§å±å¹•å°ºå¯¸çš„å¯åŠ¨å›¾ï¼Œæ¥é€‚é…å„ç§è®¾å¤‡ï¼Œéšç€è‹¹æœè®¾å¤‡å°ºå¯¸è¶Šæ¥è¶Šå¤šï¼Œè¿™ç§æ–¹å¼æ˜¾ç„¶ä¸å¤Ÿ Flexibleã€‚è€Œä½¿ç”¨ LaunchScreençš„è¯ï¼Œæƒ…å†µä¼šå˜çš„å¾ˆç®€å•ï¼Œ LaunchScreenæ˜¯æ”¯æŒAutoLayout+SizeClassçš„ï¼Œæ‰€ä»¥é€‚é…å„ç§å±å¹•éƒ½ä¸åœ¨è¯ä¸‹ã€‚<br/>
æ³¨æ„å•¦âš ï¸ï¼Œä»2020å¹´4æœˆå¼€å§‹ï¼Œæ‰€æœ‰ä½¿â½¤ iOS13 SDK çš„ App å°†å¿…é¡»æä¾› LaunchScreenï¼ŒLaunchImageå³å°†é€€å‡ºå†å²èˆå°ã€‚</p>

<h2 id="toc_21">18. windowå±‚çº§å˜åŒ–</h2>

<p>éå†è§†å›¾è·å– keywindow çš„æ–¹å¼ä¼šå¤±æ•ˆã€‚<br/>
æ–°å¢äº† screenWindow  è‡ªå®šä¹‰è§†å›¾å’Œ keywindowä¹‹é—´æ–°å¢iOS 13ç³»ç»Ÿçš„ç‰¹æœ‰å›¾å±‚ã€‚</p>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Viewcontrolleré¡¶éƒ¨ç™½æ¡]]></title>
    <link href="http://kaelinda.top/15658640474935.html"/>
    <updated>2019-08-15T18:14:07+08:00</updated>
    <id>http://kaelinda.top/15658640474935.html</id>
    <content type="html"><![CDATA[
<h2 id="toc_0">é¡¶éƒ¨ç™½æ¡ 20ptå·¦å³</h2>

<pre><code class="language-text">self.automaticallyAdjustsScrollViewInsets = NO;
self.edgesForExtendedLayout = UIRectEdgeNone;
if (@available(iOS 11.0, *)) {
    UIScrollView.appearance.contentInsetAdjustmentBehavior = UIScrollViewContentInsetAdjustmentNever;
}
</code></pre>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[UIVisualEffectView iOS8ä»¥åçš„æ¯›ç»ç’ƒæ•ˆæœå®ç°]]></title>
    <link href="http://kaelinda.top/15640609790414.html"/>
    <updated>2019-07-25T21:22:59+08:00</updated>
    <id>http://kaelinda.top/15640609790414.html</id>
    <content type="html"><![CDATA[
<h2 id="toc_0">å…ˆçœ‹ä¸€ä¸‹ç®€å•çš„ä½¿ç”¨</h2>

<pre><code class="language-text">
// åˆ›å»ºä¸€ä¸ªç‰¹æ•ˆå¯¹è±¡
UIBlurEffect *blurEffect = [UIBlurEffect effectWithStyle:UIBlurEffectStyleLight];

// åˆ›å»ºä¸€ä¸ªæ¯›ç»ç’ƒè§†å›¾
UIVisualEffectView *blurView = [[UIVisualEffectView alloc] initWithEffect:blurEffect];
blurView.clipsToBounds = YES;
blurView.layer.borderColor = [[UIColor blackColor] colorWithAlphaComponent:0.4f].CGColor;
blurView.layer.borderWidth = 1.0;
blurView.layer.cornerRadius = 6.0;

// label
UILabel *label = [[UILabel alloc] init];
label.textColor = [UIColor colorWithWhite:0.4f alpha:1.0f];

// add the label to effect view
[blurView.contentView addSubview:label];
</code></pre>

]]></content>
  </entry>
  
</feed>

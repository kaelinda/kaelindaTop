<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>  
	  
  	iOS - kaelinda
  	
	</title>

  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

	<link href="atom.xml" rel="alternate" title="kaelinda" type="application/atom+xml">

	<link href="asset/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<link href="asset/stylesheets/font-awesome.min.css" media="screen, projection" rel="stylesheet" type="text/css">
	<script src="asset/javascripts/jquery.min.js"></script>
	

	<!--[if lt IE 9]><script src="asset/javascripts/html5.js"></script><![endif]-->
	<!-- <link href='http://fonts.googleapis.com/css?family=Nunito:400,300,700' rel='stylesheet' type='text/css'> -->
	<style type="text/css">
/* latin */
@font-face {
  font-family: 'Nunito';
  font-style: normal;
  font-weight: 300;
  src: local('Nunito-Light'), url(asset/font/1TiHc9yag0wq3lDO9cw0voX0hVgzZQUfRDuZrPvH3D8.woff2) format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2212, U+2215, U+E0FF, U+EFFD, U+F000;
}
/* latin */
@font-face {
  font-family: 'Nunito';
  font-style: normal;
  font-weight: 400;
  src: local('Nunito-Regular'), url(asset/font/6TbRXKWJjpj6V2v_WyRbMX-_kf6ByYO6CLYdB4HQE-Y.woff2) format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2212, U+2215, U+E0FF, U+EFFD, U+F000;
}
/* latin */
@font-face {
  font-family: 'Nunito';
  font-style: normal;
  font-weight: 700;
  src: local('Nunito-Bold'), url(asset/font/TttUCfJ272GBgSKaOaD7KoX0hVgzZQUfRDuZrPvH3D8.woff2) format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2212, U+2215, U+E0FF, U+EFFD, U+F000;
}
	</style>
	
	<style type="text/css">
	.container .left-col{ opacity: 1;}
	#pagenavi a{ font-size: 1.3em;}
	#pagenavi .next:before{ top: 3px;}
	#pagenavi .prev:before{ top: 3px;}
	.container .mid-col .mid-col-container #content .archives .title{ font-size: 1.5em;}
	.container .mid-col .mid-col-container #content article{ padding: 15px 0px;}
	#header .subtitle {
		line-height: 1.2em;
		padding-top: 8px;
	}
	article pre{ background: none; border: none; padding: 0;}
	article .entry-content{text-align: left;}
	.share-comment{ padding: 25px 0px; clear: both;}
	hr{ margin: 20px 0px;border: 0; border-top:solid 1px #ddd;}
	</style>
  

</head>


<body>
	<div class="container">
		<div class="left-col">
			<div class="intrude-less">
				<header id="header" class="inner">
				 
				 	<div class="profilepic">
						<img src="https://ws1.sinaimg.cn/large/006tNc79ly1fmpk9088gsj30sg0sgn33.jpg" style="width:160px;">
					</div>
            	
					
					<h1><a href="index.html">kaelinda</a></h1>
					<p class="subtitle">å€˜è‹¥æˆ‘å¿ƒä¸­çš„å±±æ°´ï¼Œä½ çœ¼ä¸­èƒ½çœ‹åˆ°ï¼Œæˆ‘ä¾¿ä¸€æ­¥ä¸€è²èŠ±ç¥ˆç¥·</p>
					<nav id="main-nav">
						<ul class="main">
						
						  <li id=""><a target="_self" href="index.html">æœ€è¿‘æ›´æ–°</a></li>
						
						  <li id=""><a target="_self" href="archives.html">å½’æ¡£ç›®å½•</a></li>
						
						  <li id="ios.css"><a target="_self" href="ios.html">iOS</a></li>
						
						  <li id="swift.css"><a target="_self" href="swift.html">Swift</a></li>
						
						  <li id="reactnative.css"><a target="_self" href="reactnative.html">RN</a></li>
						
						  <li id="js.css"><a target="_self" href="js.html">JS</a></li>
						
						  <li id="shell.css"><a target="_self" href="shell.html">shell</a></li>
						
						  <li id="py.css"><a target="_self" href="py.html">Python</a></li>
						
						</ul>
					</nav>

					<nav id="sub-nav">
						<div class="social">










<a target="_blank" class="github" target="_blank" href="https://github.com/Kaelzzs" title="GitHub">GitHub</a>
<a target="_blank" class="email" href="mailto:zhouzuosong_kael@163.com" title="Email">Email</a>

								

								<a class="rss" href="atom.xml" title="RSS">RSS</a>
							
						</div>
					</nav>
				</header>				
			</div>
		</div>	
		<div class="mid-col">
			<div class="mid-col-container"> <div id="content" class="inner">
<div itemscope itemtype="http://schema.org/Blog">


	<article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
		<div class="meta">
			<div class="date">
				<time datetime="2021-10-08T11:07:43+08:00" itemprop="datePublished">2021/10/8</time>
			</div>
			<div class="tags">posted in 
			
			    <a class='category' href='ios.html'>iOS</a>&nbsp;
			 
			</div>
		</div>
		<h1 class="title" itemprop="name"><a href="16336624630931.html" itemprop="url">
		iOS ä¹‹ APPå®‰å…¨</a></h1>
		<div class="entry-content" itemprop="articleBody">
			
			<h2><a id="%E6%A3%80%E6%B5%8B%E8%AE%BE%E5%A4%87%E6%98%AF%E5%90%A6%E8%B6%8A%E7%8B%B1" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>æ£€æµ‹è®¾å¤‡æ˜¯å¦è¶Šç‹±</h2>
<pre><code class="language-plain_text">+ (BOOL)isJailBreak {
	if ([[NSFileManager defaultManager] fileExistsAtPath:@&quot;/Applications/Cydia.app&quot;]){
		return YES;
	}
	
	if ([[NSFileManager defaultManager] fileExistsAtPath:@&quot;/Library/MobileSubstrate/MobileSubstrate.dylib&quot;]){
		return YES;
	}
	
	if ([[NSFileManager defaultManager] fileExistsAtPath:@&quot;/bin/bash&quot;]){
		return YES;
	}
	
	if ([[NSFileManager defaultManager] fileExistsAtPath:@&quot;/usr/sbin/sshd&quot;]){
		return YES;
	}
	
	if ([[NSFileManager defaultManager] fileExistsAtPath:@&quot;/etc/apt&quot;]){
		return YES;
	}
	if ([[UIApplication sharedApplication] canOpenURL:[NSURL URLWithString:@&quot;cydia://&quot;]]) {
		return YES;
	}
	return NO;
}
</code></pre>
<h2><a id="%E6%A3%80%E6%B5%8B%E8%AE%BE%E5%A4%87%E7%BD%91%E7%BB%9C%E7%8E%AF%E5%A2%83%E6%98%AF%E5%90%A6%E5%BC%80%E5%90%AF%E4%BB%A3%E7%90%86" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>æ£€æµ‹è®¾å¤‡ç½‘ç»œç¯å¢ƒæ˜¯å¦å¼€å¯ä»£ç†</h2>
<pre><code class="language-plain_text">NSDictionary *proxySettings = (__bridge NSDictionary *)(CFNetworkCopySystemProxySettings());
NSArray *proxies = (__bridge NSArray *)(CFNetworkCopyProxiesForURL((__bridge CFURLRef _Nonnull)([NSURL URLWithString:@&quot;https://www.baidu.com&quot;]), (__bridge CFDictionaryRef _Nonnull)(proxySettings)));

NSLog(@&quot;\n%@&quot;,proxies);
NSDictionary *settings = proxies[0];
NSLog(@&quot;%@&quot;,[settings objectForKey:(NSString *)kCFProxyHostNameKey]);
NSLog(@&quot;%@&quot;,[settings objectForKey:(NSString *)kCFProxyPortNumberKey]);
NSLog(@&quot;%@&quot;,[settings objectForKey:(NSString *)kCFProxyTypeKey]);
    if ([[settings objectForKey:(NSString *)kCFProxyTypeKey] isEqualToString:@&quot;kCFProxyTypeNone&quot;])
    {
        NSLog(@&quot;kael æ²¡ä»£ç†&quot;);
    }
                                                                                                     else
    {
        NSLog(@&quot;kael è®¾ç½®äº†ä»£ç†&quot;);
    }
</code></pre>
<h2><a id="app%E7%A6%81%E6%AD%A2%E5%8A%A8%E6%80%81%E8%B0%83%E8%AF%95" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>APP ç¦æ­¢åŠ¨æ€è°ƒè¯•</h2>
<pre><code class="language-plain_text">#import &lt;UIKit/UIKit.h&gt; 
#import &quot;AppDelegate.h&quot;  
#import &lt;dlfcn.h&gt;

typedef int (*ptrace_ptr_t)(int _request, pid_t _pid, caddr_t _addr, int _data);
#if !defined(PT_DENY_ATTACH)
#define PT_DENY_ATTACH 31
#endif  // !defined(PT_DENY_ATTACH)

void disable_gdb() {
  void* handle = dlopen(0, RTLD_GLOBAL | RTLD_NOW);
  ptrace_ptr_t ptrace_ptr = dlsym(handle, &quot;ptrace&quot;);
  ptrace_ptr(PT_DENY_ATTACH, 0, 0, 0);
  dlclose(handle);
}

int main(int argc, char * argv[]) {
#ifndef DEBUG
    disable_gdb();
#endif
    @autoreleasepool {
        return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class]));
    }
}
</code></pre>
<p>å¦‚æœä½ åœ¨Xcodeè°ƒè¯•ç¯å¢ƒä¸‹ï¼Œå»æ‰#ifndef DEBUG #endifè¿™å¥è¯ï¼Œä½ ä¼šå‘ç°ï¼ŒXcodeæ— æ³•è°ƒè¯•è¯¥åº”ç”¨ï¼›å› ä¸ºåŠ¨æ€çš„åŠ è½½äº†ptraceï¼Œç„¶åç»™ä¼ è¾“çš„å®æ˜¯PT_DENY_ATTACH æ‹’ç»é™„åŠ è¿›ç¨‹</p>
<h2><a id="%E4%BB%A3%E7%A0%81%E6%B7%B7%E6%B7%86%E8%84%9A%E6%9C%AC" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>ä»£ç æ··æ·† è„šæœ¬</h2>
<p><a href="https://zfj1128.blog.csdn.net/article/details/95482006">ä»£ç æ··æ·†ç›¸å…³ å‚è€ƒæ–‡ç« </a></p>
<pre><code class="language-plain_text">TABLENAME=symbols
SYMBOL_DB_FILE=&quot;$PROJECT_DIR/CodeObfuscation/symbols&quot;
STRING_SYMBOL_FILE=&quot;$PROJECT_DIR/CodeObfuscation/func.list&quot;
HEAD_FILE=&quot;$PROJECT_DIR/CodeObfuscation/codeObfuscation.h&quot;
export LC_CTYPE=C

#ç»´æŠ¤æ•°æ®åº“æ–¹ä¾¿æ—¥åä½œæ’é‡
createTable()
{
echo &quot;create table $TABLENAME(src text, des text);&quot; | sqlite3 $SYMBOL_DB_FILE
}

insertValue()
{
echo &quot;insert into $TABLENAME values('$1' ,'$2');&quot; | sqlite3 $SYMBOL_DB_FILE
}

query()
{
echo &quot;select * from $TABLENAME where src='$1';&quot; | sqlite3 $SYMBOL_DB_FILE
}

ramdomString()
{
openssl rand -base64 64 | tr -cd 'a-zA-Z' |head -c 16
}

rm -f $SYMBOL_DB_FILE
rm -f $HEAD_FILE
createTable

touch $HEAD_FILE
echo '#ifndef Demo_codeObfuscation_h
#define Demo_codeObfuscation_h' &gt;&gt; $HEAD_FILE
echo &quot;//confuse string at `date`&quot; &gt;&gt; $HEAD_FILE
cat &quot;$STRING_SYMBOL_FILE&quot; | while read -ra line; do
if [[ ! -z &quot;$line&quot; ]]; then
ramdom=`ramdomString`
echo $line $ramdom
insertValue $line $ramdom
echo &quot;#define $line $ramdom&quot; &gt;&gt; $HEAD_FILE
fi
done
echo &quot;#endif&quot; &gt;&gt; $HEAD_FILE


sqlite3 $SYMBOL_DB_FILE .dump
</code></pre>


			
			
		</div>

	</article>
 
	<article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
		<div class="meta">
			<div class="date">
				<time datetime="2021-10-08T11:06:24+08:00" itemprop="datePublished">2021/10/8</time>
			</div>
			<div class="tags">posted in 
			
			    <a class='category' href='ios.html'>iOS</a>&nbsp;
			 
			</div>
		</div>
		<h1 class="title" itemprop="name"><a href="16336623849036.html" itemprop="url">
		ä¹å­¦é«˜è€ƒAPP æ·»åŠ å…¨å±ä¾§æ»‘æ‰‹åŠ¿</a></h1>
		<div class="entry-content" itemprop="articleBody">
			
			<h2><a id="%E4%BE%A7%E6%BB%91%E6%89%8B%E5%8A%BF%E4%BC%9A%E5%BD%B1%E5%93%8D%E7%9A%84%E5%87%A0%E4%B8%AA%E7%82%B9%EF%BC%9A" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a><strong>ä¾§æ»‘æ‰‹åŠ¿ä¼šå½±å“çš„å‡ ä¸ªç‚¹ï¼š</strong></h2>
<h3><a id="navigationbar%E7%9A%84%E6%98%BE%E7%A4%BA%E9%9A%90%E8%97%8F" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>navigationBarçš„æ˜¾ç¤ºéšè—</h3>
<ul>
<li>
<p>æ ¹è§†å›¾ä¸­</p>
<pre><code class="language-plain_text">// è®¾ç½®é»˜è®¤è§¦å‘è¾¹ç¼˜èŒƒå›´
self.fd_interactivePopMaxAllowedInitialDistanceToLeftEdge = 80;
</code></pre>
</li>
<li>
<p>éœ€è¦ç‰¹æ®Šå¤„ç†çš„æ§åˆ¶å™¨ä¸­ï¼š</p>
<pre><code class="language-plain_text">// ç¦æ­¢orå“åº”è¿”å›æ‰‹åŠ¿
self.popDisable = YES;
// éšè—oræ˜¾ç¤ºnavigationBar
self.lxPrefersNavigationBarHidden = YES;
</code></pre>
</li>
</ul>
<h3><a id="vc%E5%86%85%E5%8C%85%E5%90%ABscrollview%E5%8F%8A%E5%85%B6%E5%AD%90%E7%B1%BB%E6%9C%89%E6%89%8B%E5%8A%BF%E5%86%B2%E7%AA%81%E6%97%B6%E7%9A%84%E5%A4%84%E7%90%86%E3%80%90-typagercontroller%E3%80%91%E7%AD%89%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>VCå†…åŒ…å«scrollViewåŠå…¶å­ç±»æœ‰æ‰‹åŠ¿å†²çªæ—¶çš„å¤„ç† ã€TYPagerControllerã€‘ç­‰ç¬¬ä¸‰æ–¹åº“</h3>
<ul>
<li>
<p>è§£å†³æ–¹æ¡ˆä¸€ï¼š</p>
<pre><code class="language-plain_text">  ç”¨`LXPopScrollView`ã€`LXPopTableView`ã€`LXPopCollectionView`æ›¿æ¢åŸç”Ÿçš„`UIScrollView`åŠå…¶å­ç±»
</code></pre>
</li>
<li>
<p>è§£å†³æ–¹æ¡ˆäºŒã€æ¨èã€‘ï¼š</p>
<pre><code class="language-plain_text">[ViewController lxAddPopGestureToView:self.scrollView];
</code></pre>
<p>å­æ§åˆ¶å™¨ä¸­éœ€è¦æ·»åŠ å¥½å‡ æ¬¡ï¼Œçˆ¶æ§åˆ¶å™¨ä¸­åªéœ€è¦æ·»åŠ ä¸€æ¬¡</p>
<pre><code class="language-plain_text">[self lxAddPopGestureToView:self.view];
</code></pre>
</li>
</ul>
<h3><a id="%E7%95%8C%E9%9D%A2%E5%9C%A8viewwillappear%E6%97%B6%E7%9A%84%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82%E5%88%B7%E6%96%B0%E6%95%B0%E6%8D%AE-loading" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>ç•Œé¢åœ¨viewwillappearæ—¶çš„ç½‘ç»œè¯·æ±‚åˆ·æ–°æ•°æ® + loading</h3>
<h2><a id="prefernavigationhidden%E5%B1%9E%E6%80%A7%E6%8E%A7%E5%88%B6%E5%AF%BC%E8%88%AA%E6%98%BE%E7%A4%BA%E9%9A%90%E8%97%8F" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a><code>preferNavigationHidden</code> å±æ€§æ§åˆ¶å¯¼èˆªæ˜¾ç¤ºéšè—</h2>
<table>
<thead>
<tr>
<th>åŒ…å«preferNavigationHiddenå±æ€§çš„VC</th>
</tr>
</thead>
<tbody>
<tr>
<td>LXBaseViewController</td>
</tr>
<tr>
<td>LXStudyCenterViewController</td>
</tr>
<tr>
<td>LXMyCoursesChildController</td>
</tr>
<tr>
<td>LXStudyMyCoursesSubVC</td>
</tr>
<tr>
<td>LXQATopicPostListController</td>
</tr>
<tr>
<td>LXQAKnowledgeSquareController</td>
</tr>
<tr>
<td>LXQASubjectPostListController</td>
</tr>
<tr>
<td>LXQAPostListChildController</td>
</tr>
<tr>
<td>LXQATodayHotPostController</td>
</tr>
<tr>
<td>LXQACenterChildController</td>
</tr>
<tr>
<td>LXQAQuestionDetailController</td>
</tr>
<tr>
<td>LXQAAnswerDetailController</td>
</tr>
<tr>
<td>LXQATeacherDetailController</td>
</tr>
<tr>
<td>LXAnswerCenterController</td>
</tr>
<tr>
<td>LXMineViewController</td>
</tr>
<tr>
<td>LXPerfectUserInfoController</td>
</tr>
<tr>
<td><strong>TOWebViewController</strong></td>
</tr>
<tr>
<td>LXUserInfoGuiderController</td>
</tr>
<tr>
<td>LXGradeController</td>
</tr>
<tr>
<td>LXPrimaryGradesController</td>
</tr>
<tr>
<td>LXSubjectController</td>
</tr>
<tr>
<td>LiveClassroomViewController</td>
</tr>
<tr>
<td>LXAudioPlayerController</td>
</tr>
<tr>
<td>LXGoodsDetailsController</td>
</tr>
<tr>
<td>LXGoodsCouponListController</td>
</tr>
</tbody>
</table>
<h2><a id="setnavigationbarhidden%E6%96%B9%E5%BC%8F%E9%9A%90%E8%97%8F%E5%AF%BC%E8%88%AA%E6%9D%A1" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a><code>setNavigationBarHidden</code> æ–¹å¼éšè—å¯¼èˆªæ¡</h2>
<table>
<thead>
<tr>
<th>åŒ…å«setNavigationBarHiddenæ–¹å¼éšè—å¯¼èˆªæ¡çš„VC</th>
</tr>
</thead>
<tbody>
<tr>
<td>LXBaseViewController</td>
</tr>
<tr>
<td><strong>LXSearchViewController</strong> -- æœç´¢ç•Œé¢</td>
</tr>
<tr>
<td><strong>LXCourseDetailViewController</strong> -- è·³è½¬æ™ºé½¿</td>
</tr>
<tr>
<td>LXMineViewController</td>
</tr>
<tr>
<td>LXFeedBackListController</td>
</tr>
<tr>
<td>FeedbackViewController</td>
</tr>
<tr>
<td>LXQuestionAlertController</td>
</tr>
<tr>
<td>LXClassNotesBrowserVC</td>
</tr>
<tr>
<td>TOWebViewController</td>
</tr>
<tr>
<td>LXGradeController</td>
</tr>
<tr>
<td>LXSubjectController</td>
</tr>
<tr>
<td><strong>LXPhotoBrowseViewController</strong></td>
</tr>
<tr>
<td>LXMyMessagesController</td>
</tr>
<tr>
<td>LXWebViewController</td>
</tr>
<tr>
<td>TZPhotoPreviewController</td>
</tr>
<tr>
<td>TZVideoPlayerController</td>
</tr>
<tr>
<td>TZGifPhotoPreviewController</td>
</tr>
</tbody>
</table>
<h2><a id="navigationcontroller-navigationbar-hidden-yes%E6%96%B9%E5%BC%8F%E9%9A%90%E8%97%8F%E5%AF%BC%E8%88%AA%E6%9D%A1" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a><code>navigationController.navigationBar.hidden = YES</code>æ–¹å¼éšè—å¯¼èˆªæ¡</h2>
<table>
<thead>
<tr>
<th><code>navigationBar.hidden</code>å±æ€§æ–¹å¼éšè—å¯¼èˆªæ¡çš„VC</th>
</tr>
</thead>
<tbody>
<tr>
<td>LXViewControllertest</td>
</tr>
<tr>
<td>LXMuttiCourseDetailViewController</td>
</tr>
<tr>
<td>LXDiscoverViewController</td>
</tr>
<tr>
<td>LXHeadWearVC</td>
</tr>
<tr>
<td>LXPlayerViewController</td>
</tr>
<tr>
<td>LXTeacherDetailController</td>
</tr>
</tbody>
</table>
<h2><a id="%E5%8C%85%E5%90%AB%E5%BC%B9%E5%87%BA%E7%A7%91%E7%9B%AE%E9%80%89%E6%8B%A9%E9%81%AE%E7%BD%A9lxfilterbaseviewcontroller%E7%9A%84%E6%8E%A7%E5%88%B6%E5%99%A8" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>åŒ…å«å¼¹å‡ºç§‘ç›®é€‰æ‹©é®ç½©<code>LXFilterBaseViewController</code>çš„æ§åˆ¶å™¨</h2>
<p><img src="http://ww3.sinaimg.cn/large/006y8mN6ly1g67clftpsgj30oo0mado5.jpg" alt="ç§‘ç›®å¼¹å‡ºçª—" /></p>
<table>
<thead>
<tr>
<th>åŒ…å«å¼¹å‡ºç§‘ç›®é€‰æ‹©é®ç½©<code>LXFilterBaseViewController</code>çš„æ§åˆ¶å™¨</th>
</tr>
</thead>
<tbody>
<tr>
<td>LXTopicListViewController</td>
</tr>
<tr>
<td>LXFiveScoreListController</td>
</tr>
<tr>
<td>LXCommonlyListViewController</td>
</tr>
<tr>
<td>LXPurchasedCoursesController</td>
</tr>
<tr>
<td>LXExperienceClassController</td>
</tr>
</tbody>
</table>
<h2><a id="tab%E5%88%87%E6%8D%A2scrollview%E5%81%8F%E7%A7%BB%E9%87%8F%E5%88%87%E6%8D%A2%E9%A1%B5%E9%9D%A2" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>tabåˆ‡æ¢scrollviewåç§»é‡åˆ‡æ¢é¡µé¢</h2>
<p>è¯·å‚è€ƒ è§£å†³æ–¹æ¡ˆäºŒ</p>
<pre><code class="language-plain_text">[ViewController lxAddPopGestureToView:self.scrollView];
</code></pre>
<p>å­æ§åˆ¶å™¨ä¸­éœ€è¦æ·»åŠ å¥½å‡ æ¬¡ï¼Œçˆ¶æ§åˆ¶å™¨ä¸­åªéœ€è¦æ·»åŠ ä¸€æ¬¡
<code>[self lxAddPopGestureToView:self.view];</code></p>
<hr />
<p><img src="http://ww3.sinaimg.cn/large/006y8mN6ly1g67cksphthj30ok0z87gl.jpg" alt="ä¸å®šä½ç½®tab" />
<img src="http://ww1.sinaimg.cn/large/006y8mN6ly1g67ck1uq5oj30og0w4don.jpg" alt="é¡¶éƒ¨tab" /></p>
<h3><a id="zjscrollpageview" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>ZJScrollPageView</h3>
<table>
<thead>
<tr>
<th>ä½¿ç”¨ZJScrollPageView</th>
</tr>
</thead>
<tbody>
<tr>
<td>LXHomeViewController</td>
</tr>
<tr>
<td>LXSubjectRecordListVC</td>
</tr>
<tr>
<td>LXHomeRecommendVC</td>
</tr>
<tr>
<td>LXMyCouponController</td>
</tr>
</tbody>
</table>
<h3><a id="tytabpagercontroller" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>TYTabPagerController</h3>
<table>
<thead>
<tr>
<th>TYTabPagerController</th>
</tr>
</thead>
<tbody>
<tr>
<td>LXMyMessagesController</td>
</tr>
<tr>
<td>LXOrderListController</td>
</tr>
<tr>
<td>LXResourceListController</td>
</tr>
<tr>
<td>LXHotSingleCourseViewController</td>
</tr>
</tbody>
</table>
<h3><a id="fspagecontentview" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>FSPageContentView</h3>
<table>
<thead>
<tr>
<th>FSPageContentView</th>
</tr>
</thead>
<tbody>
<tr>
<td>LXTeacherDetailController</td>
</tr>
<tr>
<td>LXProductDetailController</td>
</tr>
<tr>
<td>LXSeckillDatailController</td>
</tr>
</tbody>
</table>


			
			
		</div>

	</article>
 
	<article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
		<div class="meta">
			<div class="date">
				<time datetime="2021-10-08T11:05:48+08:00" itemprop="datePublished">2021/10/8</time>
			</div>
			<div class="tags">posted in 
			
			    <a class='category' href='ios.html'>iOS</a>&nbsp;
			 
			</div>
		</div>
		<h1 class="title" itemprop="name"><a href="16336623484572.html" itemprop="url">
		iOS å›¾è¡¨å·¥å…·</a></h1>
		<div class="entry-content" itemprop="articleBody">
			
			<h2><a id="ios-echarts" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>iOS-Echarts</h2>
<p><a href="https://www.jianshu.com/p/3d5fe1f4693d">iOS-Echarts å‚è€ƒæ–‡ç« </a></p>
<ul>
<li>åŸºäºjsï¼Œè®©WebViewåŠ è½½ã€æ¸²æŸ“UI</li>
</ul>
<h2><a id="ios-charts" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>ios-charts</h2>
<p>MPAndroidChart åœ¨iOSç³»ç»Ÿä¸Šé¢çš„ç§»æ¤</p>
<ul>
<li>ç”¨çš„swiftç¼–å†™ï¼Œéœ€è¦åœ¨ç°æœ‰OCé¡¹ç›®ä¸­åˆ›å»ºæ¡¥æ¥æ–‡ä»¶ æ¯”è¾ƒç¬¨é‡</li>
</ul>
<p><a href="https://cloud.tencent.com/developer/article/1336386">ios-chartsä½¿ç”¨å‚è€ƒæ–‡ç« </a></p>
<p><a href="https://www.jianshu.com/p/94cdcc08d1ae">å®‰å“iOS é€šç”¨æ•™ç¨‹</a></p>
<h2><a id="github%E4%B8%8A%E4%BC%98%E7%A7%80%E7%9A%84oc%E5%9B%BE%E6%A0%87%E5%BA%93" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>GitHubä¸Šä¼˜ç§€çš„OCå›¾æ ‡åº“</h2>
<p><a href="https://github.com/search?l=Objective-C&amp;o=desc&amp;q=chart&amp;s=stars&amp;type=Repositories">GitHubä¸Šä¼˜ç§€çš„OCå›¾æ ‡åº“</a></p>
<p><a href="https://github.com/search?l=Java&amp;o=desc&amp;q=chart&amp;s=stars&amp;type=Repositories">GitHubä¸Šä¼˜ç§€çš„javaå›¾æ ‡åº“</a></p>


			
			
		</div>

	</article>
 
	<article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
		<div class="meta">
			<div class="date">
				<time datetime="2021-10-08T11:05:11+08:00" itemprop="datePublished">2021/10/8</time>
			</div>
			<div class="tags">posted in 
			
			    <a class='category' href='ios.html'>iOS</a>&nbsp;
			 
			</div>
		</div>
		<h1 class="title" itemprop="name"><a href="16336623112375.html" itemprop="url">
		iOS13é€‚é…æ³¨æ„äº‹é¡¹</a></h1>
		<div class="entry-content" itemprop="articleBody">
			
			<p>æŠ€æœ¯å‚è€ƒï¼š</p>
<p><a href="https://developer.apple.com/design/human-interface-guidelines/sign-in-with-apple/overview/">apple login</a></p>
<p><a href="https://www.jianshu.com/p/46cd57b98b0d">IOS13é€‚é…-è¯¦ç»†</a></p>
<p><a href="https://www.jianshu.com/p/373a8fb3b345">iOS 13 é€‚é…(æŒç»­æ›´æ–°ä¸­)</a></p>
<p><a href="https://www.jianshu.com/p/4654f8f6e16e">iOS13é€‚é…</a></p>
<p><a href="https://juejin.im/post/5d745f8af265da03b5746fa0">æ˜é‡‘ iOS 13é€‚é…01</a></p>
<p><a href="https://juejin.im/post/5d00af64e51d455d88219ee2#heading-8">æ˜é‡‘  é€‚é… iOS13</a></p>
<p><a href="https://github.com/ChenYilong/iOS13AdaptationTips/issues?q=is%3Aissue+is%3Aopen+label%3Anote">iOS 13 æ›´æ–°tips</a></p>
<p><a href="https://medium.com/@hacknicity/view-controller-presentation-changes-in-ios-13-ac8c901ebc4e">View Controller Presentation Changes in iOS 13</a></p>
<h2><a id="1-apple-login%EF%BC%88-2020%E5%B9%B44%E6%9C%88%E4%BB%BD%EF%BC%89" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>1. Apple Login ï¼ˆ2020å¹´4æœˆä»½ï¼‰</h2>
<p><a href="https://links.jianshu.com/go?to=https%3A%2F%2Fdocs-assets.developer.apple.com%2Fpublished%2F80ac09c84c%2FAddingTheSignInWithAppleFlowToYourApp.zip">é™„ä¸Šå®˜æ–¹Demoï¼šä¸‹è½½åœ°å€</a></p>
<h2><a id="2-dark-mode" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>2. Dark Mode</h2>
<h3><a id="2-1%E6%9A%97%E9%BB%91%E6%A8%A1%E5%BC%8F%E7%8A%B6%E6%80%81%E5%88%A4%E6%96%AD%E5%88%87%E6%8D%A2%E7%9B%91%E5%90%AC" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>2.1 æš—é»‘æ¨¡å¼ çŠ¶æ€åˆ¤æ–­ &amp;&amp; åˆ‡æ¢ç›‘å¬</h3>
<ul>
<li>åˆ¤æ–­æ¨¡å¼çŠ¶æ€</li>
</ul>
<pre><code class="language-plain_text">if (UITraitCollection.currentTraitCollection.userInterfaceStyle == UIUserInterfaceStyleDark) {
    // æš—é»‘æ¨¡å¼
}
else {
    // æ­£å¸¸æ¨¡å¼
}
</code></pre>
<ul>
<li>ç›‘å¬æ¨¡å¼åˆ‡æ¢</li>
</ul>
<pre><code class="language-plain_text">// æ³¨æ„:å‚æ•°ä¸ºå˜åŒ–å‰çš„traitCollection
- (void)traitCollectionDidChange:(UITraitCollection *)previousTraitCollection;

// åˆ¤æ–­ä¸¤ä¸ªUITraitCollectionå¯¹è±¡æ˜¯å¦ä¸åŒ
- (BOOL)hasDifferentColorAppearanceComparedToTraitCollection:(UITraitCollection *)traitCollection;
</code></pre>
<h3><a id="2-2%E7%A6%81%E7%94%A8%E6%9A%97%E9%BB%91%E6%A8%A1%E5%BC%8F" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>2.2 ç¦ç”¨æš—é»‘æ¨¡å¼</h3>
<ul>
<li>
<p>info.plist å†…APPçº§åˆ«ç¦ç”¨æš—é»‘æ¨¡å¼</p>
<p>Key: <code>User Interface Style</code>
value: <code>Light</code></p>
</li>
<li>
<p>widowçº§åˆ«çš„ç¦ç”¨æš—é»‘æ¨¡å¼</p>
<pre><code class="language-plain_text">if (@available(iOS 13.0, *)) {
    [UIApplication sharedApplication].keyWindow.overrideUserInterfaceStyle = UIUserInterfaceStyleLight;
}
</code></pre>
</li>
<li>
<p>ViewControllerçº§åˆ«ç¦ç”¨æš—é»‘æ¨¡å¼</p>
<p>æƒ³å…¨å±€ç¦ç”¨éœ€è¦åœ¨ baseVCå†…å…¨å±€ç¦ç”¨</p>
<pre><code class="language-plain_text">#if defined(__IPHONE_13_0) &amp;&amp; __IPHONE_OS_VERSION_MAX_ALLOWED &gt;= __IPHONE_13_0
- (UIUserInterfaceStyle)overrideUserInterfaceStyle{
    return UIUserInterfaceStyleLight;
}
#endif
</code></pre>
</li>
<li>
<p>viewçº§åˆ«ç¦ç”¨æš—é»‘æ¨¡å¼</p>
<pre><code class="language-plain_text">view.overrideUserInterfaceStyle = UIUserInterfaceStyleLight;
</code></pre>
</li>
</ul>
<h3><a id="2-3%E9%80%82%E9%85%8D%E6%9A%97%E9%BB%91%E6%A8%A1%E5%BC%8F%E9%A2%9C%E8%89%B2" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>2.3 é€‚é…æš—é»‘æ¨¡å¼é¢œè‰²</h3>
<p><a href="https://www.jianshu.com/p/7925bd51d2d6">å‚è€ƒè¿™é‡Œ ï¼šiOSå¼€å‘å¦‚ä½•é€‚é…æš—é»‘æ¨¡å¼ï¼ˆDark Modeï¼‰</a></p>
<pre><code class="language-plain_text">+ (UIColor *)colorWithDynamicProvider:(UIColor * (^)(UITraitCollection *))dynamicProvider API_AVAILABLE(ios(13.0), tvos(13.0)) API_UNAVAILABLE(watchos);
- (UIColor *)initWithDynamicProvider:(UIColor * (^)(UITraitCollection *))dynamicProvider API_AVAILABLE(ios(13.0), tvos(13.0)) API_UNAVAILABLE(watchos);
</code></pre>
<pre><code class="language-plain_text">[UIColor colorWithDynamicProvider:^UIColor * _Nonnull(UITraitCollection * _Nonnull trait) {
    if (trait.userInterfaceStyle == UIUserInterfaceStyleDark) {
        return UIColorRGB(0x000000);
    } else {
        return UIColorRGB(0xFFFFFF);
    }
 }];
</code></pre>
<h2><a id="3-present%E5%8D%8A%E5%B1%8F%E9%97%AE%E9%A2%98" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>3. present åŠå±é—®é¢˜</h2>
<p><code>modalPresentationStyle</code>å±æ€§é»˜è®¤ä¸æ˜¯<code>UIModalPresentationFullScreen</code>äº†ï¼Œéœ€è¦æ ¹æ®éœ€æ±‚æ‰‹åŠ¨è®¾ç½®ã€‚</p>
<pre><code class="language-plain_text">LXNavigationViewController *nav = [[LXNavigationViewController alloc] initWithRootViewController:loginViewController];
nav.modalPresentationStyle = UIModalPresentationFullScreen;
[self presentViewController:nav animated:YES completion:nil];

</code></pre>
<ul>
<li>
<p>å…¨å±€hook <code>presentViewController</code>æ–¹æ³•</p>
<pre><code class="language-plain_text">+ (void)hoookPresentFuc{
    [UIViewController aspect_hookSelector:@selector(presentViewController:animated:completion:) withOptions:AspectPositionBefore usingBlock:^(id&lt;AspectInfo&gt; aspectInfo){
        UIViewController *presentingVC =  (UIViewController *)aspectInfo.arguments.firstObject;
        presentingVC.modalPresentationStyle = UIModalPresentationFullScreen;
    } error:NULL];
}

</code></pre>
</li>
</ul>
<h2><a id="4-uitextfield" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>4. UITextField</h2>
<ul>
<li>æ”¯ä»˜è¾“å…¥å¯†ç æœ‰é—®é¢˜</li>
</ul>
<h3><a id="uitextfield%E7%9A%84%E7%A7%81%E6%9C%89%E5%B1%9E%E6%80%A7-placeholderlabel%E8%A2%AB%E7%A6%81%E6%AD%A2%E8%AE%BF%E9%97%AE%E4%BA%86" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>UITextField çš„ç§æœ‰å±æ€§ _placeholderLabel è¢«ç¦æ­¢è®¿é—®äº†</h3>
<ul>
<li><code>_placeholderLabel.textColor</code> ç§æœ‰å±æ€§è¢«ç¦æ­¢è®¿é—®</li>
</ul>
<pre><code class="language-plain_text">[self.textField setValue:self.placeholderColor forKeyPath:@&quot;_placeholderLabel.textColor&quot;];
</code></pre>
<p>å´©æºƒä¿¡æ¯ï¼š</p>
<pre><code class="language-plain_text">'Access to UITextField's _placeholderLabel ivar is prohibited. 
This is an application bug' 
</code></pre>
<ul>
<li>è§£å†³æ–¹æ¡ˆ</li>
</ul>
<pre><code class="language-plain_text">UITextFieldæœ‰ä¸ªattributedPlaceholderçš„å±æ€§ï¼Œæˆ‘ä»¬å¯ä»¥è‡ªå®šä¹‰è¿™ä¸ªå¯Œæ–‡æœ¬æ¥è¾¾åˆ°æˆ‘ä»¬éœ€è¦çš„ç»“æœã€‚

NSMutableAttributedString *placeholderString = [[NSMutableAttributedString alloc] initWithString:placeholder attributes:@{NSForegroundColorAttributeName : self.placeholderColor}];
_textField.attributedPlaceholder = placeholderString;
</code></pre>
<ul>
<li>é¡¹ç›®é€‚é…ä»£ç </li>
</ul>
<pre><code class="language-plain_text">if (@available(iOS 13.0, *)) {
    if (textField.attributedText.length &gt; 0) {
        color = textField.attributedText.color;
    }
}else{
    color = [textField valueForKeyPath:@&quot;_placeholderLabel.textColor&quot;];
}
</code></pre>
<p>iOS 13 é€šè¿‡ KVC æ–¹å¼ä¿®æ”¹ç§æœ‰å±æ€§ï¼Œæœ‰ Crash é£é™©ï¼Œè°¨æ…ä½¿ç”¨ï¼å¹¶ä¸æ˜¯æ‰€æœ‰KVCéƒ½ä¼šCrashï¼Œè¦å°è¯•ï¼</p>
<h2><a id="5-uitextview%E5%90%8C%E4%B8%8A" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>5. UITextView åŒä¸Š</h2>
<h2><a id="6-navigationbar%E4%BD%BF%E7%94%A8-uinavigation-sxfixspace" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>6. navigationBar ä½¿ç”¨<code>UINavigation+SXFixSpace</code></h2>
<pre><code class="language-plain_text">if ([NSStringFromClass(subview.class) containsString:@&quot;ContentView&quot;]) {
    // ç»“æ„è°ƒæ•´å åœ¨è¿™é‡Œreturnæ‰
    if (@available(iOS 13.0, *)) {
        if ([NSStringFromClass(subview.class) containsString:@&quot;_UINavigationBarContentView&quot;]) {
            return;
        }
    }

    //å¯ä¿®æ­£iOS11ä¹‹åçš„åç§»
    subview.layoutMargins = UIEdgeInsetsMake(0, space, 0, space);break;
}
</code></pre>
<p>åŒæ—¶ï¼Œä¸‹é¢çš„å±æ€§ä¹Ÿå·²ç»è¢«ç¦æ­¢è®¿é—®äº†ï¼š</p>
<ul>
<li>
<p><code>[barBgView valueForKey:@&quot;_shadowView&quot;];</code></p>
</li>
<li>
<p><code>[barBgView valueForKey:@&quot;_backgroundEffectView&quot;];</code></p>
</li>
</ul>
<h2><a id="7-statusbar" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>7. statusBar</h2>
<ul>
<li><code>UIStatusBarStyleDefault</code>æšä¸¾å€¼ä»£è¡¨å«ä¹‰æœ‰å˜åŒ–</li>
</ul>
<pre><code class="language-plain_text">typedef NS_ENUM(NSInteger, UIStatusBarStyle) {
    UIStatusBarStyleDefault                                  = 0, // æ ¹æ®ç”¨æˆ·äº¤äº’æ ·å¼è‡ªåŠ¨é€‰æ‹©çŠ¶æ€æ¡æ ·å¼
    UIStatusBarStyleLightContent     API_AVAILABLE(ios(7.0)) = 1, // Light content, for use on dark backgrounds
    UIStatusBarStyleDarkContent     API_AVAILABLE(ios(13.0)) = 3, // Dark content, for use on light backgrounds
    
    UIStatusBarStyleBlackTranslucent NS_ENUM_DEPRECATED_IOS(2_0, 7_0, &quot;Use UIStatusBarStyleLightContent&quot;) = 1,
    UIStatusBarStyleBlackOpaque      NS_ENUM_DEPRECATED_IOS(2_0, 7_0, &quot;Use UIStatusBarStyleLightContent&quot;) = 2,
} API_UNAVAILABLE(tvos);
</code></pre>
<ul>
<li>å®šåˆ¶çŠ¶æ€æ¡çš„æ ·å¼ ä½¿ç”¨apple æ¨èçš„è¿™ä¸ªç³»ç»Ÿæ–¹æ³•</li>
</ul>
<pre><code class="language-plain_text">// ios 13.0 ä¹‹åï¼Œè¿™ä¸ªæ–¹æ³•å·²ç»å¤±æ•ˆäº†
// [[UIApplication sharedApplication] setStatusBarStyle:UIStatusBarStyleDefault];

- (UIStatusBarStyle)preferredStatusBarStyle {
    if (@available(iOS 13.0, *)){
        return UIStatusBarStyleDarkContent;
    }
    return UIStatusBarStyleDefault;
}
</code></pre>
<p><strong>æˆ–è€… ------&gt;&gt;ï¼š</strong></p>
<p><code>UIStatusBarStyleDefault</code> æ›¿æ¢ä¸º</p>
<pre><code class="language-plain_text">(@available(iOS 13.0, *) ? UIStatusBarStyleDarkContent : UIStatusBarStyleDefault)
</code></pre>
<p>å¦‚æœä½ è¿˜æ˜¯ä½¿ç”¨çš„Xcode 10 ä¸ºäº†èµ°è¿‡ç¼–è¯‘å™¨è¿™ä¸€æ­¥ï¼Œå¯ä»¥ä½¿ç”¨é¢„ç¼–è¯‘å‘½ä»¤ï¼Œè¿™ä¹ˆå†™ï¼š</p>
<pre><code class="language-plain_text">#if defined(__IPHONE_13_0) &amp;&amp; __IPHONE_OS_VERSION_MAX_ALLOWED &gt;= __IPHONE_13_0
    if (@available(iOS 13.0, *)) {
        [[UIApplication sharedApplication] setStatusBarStyle:UIStatusBarStyleDarkContent];
    }else{
        [[UIApplication sharedApplication] setStatusBarStyle:UIStatusBarStyleDefault];
    }
#else
    [[UIApplication sharedApplication] setStatusBarStyle:UIStatusBarStyleDefault];
#endif
</code></pre>
<h2><a id="8-uitabbar" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>8. UITabbar</h2>
<ul>
<li>æ¨ªçº¿
UITabbar å±‚æ¬¡å‘ç”Ÿæ”¹å˜ï¼Œæ— æ³•é€šè¿‡è®¾ç½® shadowImageå»æ‰ä¸Šé¢çš„çº¿ï¼›</li>
<li>çº¢ç‚¹
å¦‚æœä¹‹å‰æœ‰é€šè¿‡TabBarä¸Šå›¾ç‰‡ä½ç½®æ¥è®¾ç½®çº¢ç‚¹ä½ç½®ï¼Œåœ¨iOS13ä¸Šä¼šå‘ç°æ˜¾ç¤ºä½ç½®éƒ½åœ¨æœ€å·¦è¾¹å»äº†ã€‚éå†UITabBarButtonçš„subViewså‘ç°åªæœ‰åœ¨TabBaré€‰ä¸­çŠ¶æ€ä¸‹æ‰èƒ½å–åˆ°UITabBarSwappableImageViewï¼Œè§£å†³åŠæ³•æ˜¯ä¿®æ”¹ä¸ºé€šè¿‡UITabBarButtonçš„ä½ç½®æ¥è®¾ç½®çº¢ç‚¹çš„frame</li>
</ul>
<h2><a id="9-uisearchbar" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>9. UISearchBar</h2>
<ul>
<li>UISearchBarçš„ç§æœ‰å±æ€§<code>UISearchBarBackground</code>ï¼Œç¦æ­¢è®¿é—®å’Œremove</li>
</ul>
<pre><code class="language-plain_text">if ([subview isKindOfClass:NSClassFromString(@&quot;UISearchBarBackground&quot;)]) {
    if (@available(iOS 13.0, *)) {
        subview.backgroundColor = [UIColor lightGrayColor];
        // subview.layer.contents = nil;
    }else{
        [subview removeFromSuperview];
    }
}

</code></pre>
<h2><a id="10%E5%A2%9E%E5%8A%A0%E4%B8%80%E7%9B%B4%E4%BD%BF%E7%94%A8%E8%93%9D%E7%89%99%E7%9A%84%E6%9D%83%E9%99%90%E7%94%B3%E8%AF%B7" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>10. å¢åŠ ä¸€ç›´ä½¿ç”¨è“ç‰™çš„æƒé™ç”³è¯·</h2>
<p><code>info.plist</code>æ–‡ä»¶ä¸‹
Key: <code>NSBluetoothAlwaysUsageDescription</code>
Value: <code>æˆ‘ä»¬è¦ä¸€ç›´ä½¿ç”¨æ‚¨çš„è“ç‰™ï¼Œå…·ä½“åšä»€ä¹ˆåˆ«é—®æˆ‘</code></p>
<h2><a id="11%E6%8E%A8%E9%80%81%E8%8E%B7%E5%8F%96-devicetoken" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>11. æ¨é€ è·å–deviceToken</h2>
<pre><code class="language-plain_text">#include &lt;arpa/inet.h&gt;
- (void)application:(UIApplication *)application didRegisterForRemoteNotificationsWithDeviceToken:(NSData *)deviceToken
{
    if (![deviceToken isKindOfClass:[NSData class]]) return;
    const unsigned *tokenBytes = [deviceToken bytes];
    NSString *hexToken = [NSString stringWithFormat:@&quot;%08x%08x%08x%08x%08x%08x%08x%08x&quot;,
                          ntohl(tokenBytes[0]), ntohl(tokenBytes[1]), ntohl(tokenBytes[2]),
                          ntohl(tokenBytes[3]), ntohl(tokenBytes[4]), ntohl(tokenBytes[5]),
                          ntohl(tokenBytes[6]), ntohl(tokenBytes[7])];
    NSLog(@&quot;deviceToken:%@&quot;,hexToken);
}
</code></pre>
<h2><a id="12-cncopycurrentnetworkinfo" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>12. CNCopyCurrentNetworkInfo</h2>
<pre><code class="language-plain_text"> An app that fails to meet any of the above requirements receives the following return value:

- An app linked against iOS 12 or earlier receives a dictionary with pseudo-values. In this case, the SSID is Wi-Fi (or WLAN in the China region), and the BSSID is 00:00:00:00:00:00.
- An app linked against iOS 13 or later receives NULL.
- 
</code></pre>
<p>iOS13 ä»¥ååªæœ‰å¼€å¯äº† Access WiFi Information capabilityï¼Œæ‰èƒ½è·å–åˆ° SSID å’Œ BSSID</p>
<p><a href="https://link.juejin.im/?target=https%3A%2F%2Fdeveloper.apple.com%2Fdocumentation%2Fsystemconfiguration%2F1614126-cncopycurrentnetworkinfo%3Flanguage%3Docc">å‚è€ƒï¼šCNCopyCurrentNetworkInfo</a></p>
<h2><a id="13-app%E5%90%AF%E5%8A%A8%E9%80%9F%E5%BA%A6%E4%BC%98%E5%8C%96%E5%AF%BC%E8%87%B4-frame%E8%8E%B7%E5%8F%96%E5%A4%B1%E8%B4%A5" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>13. APP å¯åŠ¨é€Ÿåº¦ä¼˜åŒ– å¯¼è‡´frameè·å–å¤±è´¥</h2>
<p>Appå¯åŠ¨è¿‡ç¨‹ä¸­ï¼Œéƒ¨åˆ†Viewå¯èƒ½æ— æ³•å®æ—¶è·å–åˆ°frameã€‚</p>
<h2><a id="14-wkwebview%E4%B8%AD%E6%B5%8B%E9%87%8F%E9%A1%B5%E9%9D%A2%E5%86%85%E5%AE%B9%E9%AB%98%E5%BA%A6%E7%9A%84%E6%96%B9%E5%BC%8F%E5%8F%98%E6%9B%B4" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>14. WKWebView ä¸­æµ‹é‡é¡µé¢å†…å®¹é«˜åº¦çš„æ–¹å¼å˜æ›´</h2>
<p>iOS 13ä»¥å‰ document.body.scrollHeight iOS 13ä¸­ document.documentElement.scrollHeight ä¸¤è€…ç›¸å·®55 åº”è¯¥æ˜¯æµè§ˆå™¨å®šä¹‰é«˜åº¦å˜äº†</p>
<h2><a id="15-fishhook%E5%AF%BC%E8%87%B4%E7%9A%84-crash" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>15. fishhook å¯¼è‡´çš„Crash</h2>
<p><a href="https://github.com/facebook/fishhook/issues">github fishhook</a></p>
<h2><a id="16-mpmovieplayercontroller%E5%B7%B2%E7%BB%8F%E8%A2%AB%E5%BC%83%E7%94%A8" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>16. MPMoviePlayerController å·²ç»è¢«å¼ƒç”¨</h2>
<pre><code class="language-plain_text">'MPMoviePlayerController is no longer available. Use AVPlayerViewController in AVKit.' 
</code></pre>
<h2><a id="17-launchimage%E5%8D%B3%E5%B0%86%E6%B6%88%E5%A4%B1" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>17. LaunchImage å³å°†æ¶ˆå¤±</h2>
<p>ä» iOS 8 çš„æ—¶å€™ï¼Œè‹¹æœå°±å¼•å…¥äº† LaunchScreenï¼Œæˆ‘ä»¬å¯ä»¥è®¾ç½® LaunchScreenæ¥ä½œä¸ºå¯åŠ¨é¡µã€‚å½“ç„¶ï¼Œç°åœ¨ä½ è¿˜å¯ä»¥ä½¿ç”¨LaunchImageæ¥è®¾ç½®å¯åŠ¨å›¾ã€‚ä¸è¿‡ä½¿ç”¨LaunchImageçš„è¯ï¼Œè¦æ±‚æˆ‘ä»¬å¿…é¡»æä¾›å„ç§å±å¹•å°ºå¯¸çš„å¯åŠ¨å›¾ï¼Œæ¥é€‚é…å„ç§è®¾å¤‡ï¼Œéšç€è‹¹æœè®¾å¤‡å°ºå¯¸è¶Šæ¥è¶Šå¤šï¼Œè¿™ç§æ–¹å¼æ˜¾ç„¶ä¸å¤Ÿ Flexibleã€‚è€Œä½¿ç”¨ LaunchScreençš„è¯ï¼Œæƒ…å†µä¼šå˜çš„å¾ˆç®€å•ï¼Œ LaunchScreenæ˜¯æ”¯æŒAutoLayout+SizeClassçš„ï¼Œæ‰€ä»¥é€‚é…å„ç§å±å¹•éƒ½ä¸åœ¨è¯ä¸‹ã€‚
æ³¨æ„å•¦âš ï¸ï¼Œä»2020å¹´4æœˆå¼€å§‹ï¼Œæ‰€æœ‰ä½¿â½¤ iOS13 SDK çš„ App å°†å¿…é¡»æä¾› LaunchScreenï¼ŒLaunchImageå³å°†é€€å‡ºå†å²èˆå°ã€‚</p>
<h2><a id="18-window%E5%B1%82%E7%BA%A7%E5%8F%98%E5%8C%96" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>18. windowå±‚çº§å˜åŒ–</h2>
<p>éå†è§†å›¾è·å– keywindow çš„æ–¹å¼ä¼šå¤±æ•ˆã€‚
æ–°å¢äº† screenWindow  è‡ªå®šä¹‰è§†å›¾å’Œ keywindowä¹‹é—´æ–°å¢iOS 13ç³»ç»Ÿçš„ç‰¹æœ‰å›¾å±‚ã€‚</p>


			
			
		</div>

	</article>
 
	<article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
		<div class="meta">
			<div class="date">
				<time datetime="2021-10-08T11:03:07+08:00" itemprop="datePublished">2021/10/8</time>
			</div>
			<div class="tags">posted in 
			
			    <a class='category' href='ios.html'>iOS</a>&nbsp;
			 
			</div>
		</div>
		<h1 class="title" itemprop="name"><a href="16336621877205.html" itemprop="url">
		iOS ä¹‹ è‡ªåŠ¨æ‰“åŒ… fastlane + fir + pgy ã€è¿›é˜¶ä½¿ç”¨ã€‘</a></h1>
		<div class="entry-content" itemprop="articleBody">
			
			<h2><a id="%E5%AE%89%E8%A3%85fastlane" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>å®‰è£… fastlane</h2>
<p><a href="https://www.jianshu.com/p/88b9a3e378db">fastlane å®‰è£…ä½¿ç”¨æŒ‡å—</a></p>
<h2><a id="fastlane%E9%85%8D%E7%BD%AE%E9%A1%B9%E7%9B%AE" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>fastlane é…ç½®é¡¹ç›®</h2>
<ul>
<li>
<p>cd åˆ°é¡¹ç›®æ ¹ç›®å½•ä¸‹</p>
</li>
<li>
<p><code>fastlane init</code></p>
</li>
<li>
<p><a href="https://docs.fastlane.tools/advanced/actions/">fastlane action</a></p>
</li>
<li>
<p><a href="https://docs.fastlane.tools/plugins/using-plugins/#fastlane-plugins">fastlane plugin</a></p>
</li>
<li>
<p>gym è¯·å‚è€ƒï¼š<a href="https://docs.fastlane.tools/actions/gym/">gymå®˜æ–¹æ–‡æ¡£</a></p>
</li>
</ul>
<p><strong>æœ‰ä¸€ç‚¹æ¯”è¾ƒå‘ï¼šæ¯ä¸ªé¡¹ç›®éƒ½éœ€è¦ä¸ºfastlaneé…ç½®ä¸‹ç¯å¢ƒ,å…³è”å¼€å‘è´¦æˆ·</strong></p>
<h2><a id="%E5%AE%89%E8%A3%85%E6%89%93%E5%8C%85%E5%B9%B3%E5%8F%B0%E5%91%BD%E4%BB%A4%E5%B7%A5%E5%85%B7" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>å®‰è£…æ‰“åŒ…å¹³å°å‘½ä»¤å·¥å…·</h2>
<ul>
<li>å®‰è£…firim</li>
</ul>
<pre><code class="language-bash">fastlane add_plugin versioning
fastlane add_plugin firim
</code></pre>
<p><code>versioning</code> éœ€è¦è¾“å…¥ç”µè„‘å¯†ç ï¼Œä»¥è·å–<code>sudo</code>æƒé™.</p>
<p>firim ç›¸å…³å‚æ•°å¯å‚è€ƒï¼š<a href="https://github.com/whlsxl/firim/blob/master/lib/firim/options.rb">firim æºç è¯´æ˜</a></p>
<ul>
<li>å®‰è£… fir_cli</li>
</ul>
<pre><code class="language-plain_text">fastlane add_plugin versioning
fastlane add_plugin fir_cli
</code></pre>
<p>fir_cliç›¸å…³å‚æ•°å¯å‚è€ƒ ï¼š<a href="https://github.com/FIRHQ/fastlane-plugin-fir_cli">fir_cliä½¿ç”¨è¯´æ˜</a></p>
<ul>
<li>å®‰è£…è’²å…¬è‹±</li>
</ul>
<p><a href="http://www.pgyer.com/doc/view/fastlane">è’²å…¬è‹±å®˜æ–¹æ–‡æ¡£è¯´æ˜</a>
<a href="https://github.com/shishirui/fastlane-plugin-pgyer">è’²å…¬è‹±æ’ä»¶APIè¯´æ˜</a></p>
<pre><code class="language-bash">fastlane add_plugin pgyer
</code></pre>
<p>éœ€è¦è¾“å…¥ y,ä»¥ç¡®è®¤å®‰è£….</p>
<ul>
<li>
<p>Pluginfile</p>
<p>æ­¤æ—¶ fastlane/Pluginfile æ–‡ä»¶å†…åº”è¯¥æ˜¯è¿™æ ·å­çš„ï¼š</p>
<pre><code class="language-bash">gem 'fastlane-plugin-pgyer'
gem 'fastlane-plugin-versioning'
gem 'fastlane-plugin-firim'
</code></pre>
</li>
<li>
<p>fastlane action</p>
</li>
</ul>
<p>å®šä¹‰ä¸€ä¸ª Action å« <code>PY_release</code>:</p>
<pre><code class="language-plain_text">lane :PY_release do |options|
    gym(
      clean:true, #æ‰“åŒ…å‰cleané¡¹ç›®
      silent:true,
      export_method: &quot;development&quot;, #å¯¼å‡ºæ–¹å¼
      scheme:&quot;LXPeiyou&quot;, #scheme
      configuration: options[:configuration],#ç¯å¢ƒ
      output_directory:&quot;./AppOutput&quot;,#ipaçš„å­˜æ”¾ç›®å½•
      output_name:&quot;********&quot;#è¾“å‡ºipaçš„æ–‡ä»¶åä¸ºå½“å‰çš„buildå·
      )
    
    # è‡ªå·±çš„firè´¦å·
    # firim(firim_api_token:'*****', app_changelog:options[:update_info])
    
    #è’²å…¬è‹±çš„é…ç½® æ›¿æ¢ä¸ºè‡ªå·±çš„api_keyå’Œuser_key
    # pgyer(api_key: &quot;******&quot;, user_key: &quot;******&quot;,update_description: options[:update_info])
  end
</code></pre>
<p><strong>å¤–éƒ¨è°ƒç”¨</strong>
æ‰§è¡ŒAction å¹¶ä¼ å‚ï¼š</p>
<pre><code class="language-bash">fastlane PY_release configuration:$configuration update_info:$update_info
</code></pre>


			
			
		</div>

	</article>
 
	<article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
		<div class="meta">
			<div class="date">
				<time datetime="2021-10-08T11:02:25+08:00" itemprop="datePublished">2021/10/8</time>
			</div>
			<div class="tags">posted in 
			
			    <a class='category' href='ios.html'>iOS</a>&nbsp;
			 
			</div>
		</div>
		<h1 class="title" itemprop="name"><a href="16336621451455.html" itemprop="url">
		ios ä¹‹ è‡ªåŠ¨æ‰“åŒ… è„šæœ¬ ã€bash ç‰ˆæœ¬ã€‘</a></h1>
		<div class="entry-content" itemprop="articleBody">
			
			<h2><a id="%E9%85%8D%E7%BD%AE%E6%89%93%E5%8C%85%E4%BF%A1%E6%81%AF" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>é…ç½®æ‰“åŒ…ä¿¡æ¯</h2>
<pre><code class="language-bash"># å·¥ç¨‹åç§°
kProjectName=&quot;ipa.xcodeproj&quot;

# workspace åç§° å¦‚æœä½¿ç”¨äº†cocopodsç­‰å¯èƒ½éœ€è¦ç”¨å·¥ä½œç©ºé—´æ–¹å¼æ‰“åŒ…
# workspaceName=â€œipa.workspaceâ€

# schemeåç§°
kSchemeName=&quot;ipa&quot;

# target è¿™é‡Œschemeåªå¯¹åº”äº†ä¸€ä¸ªtargetè¿è¡Œï¼›å¦‚æœæœ‰å¤šä¸ªtargetéœ€è¦æŒ‡å®štarget
kTargetName=&quot;ipa&quot;

# APPç¯å¢ƒé…ç½® Configuration
kConfiguration=&quot;Release&quot;

# archiveå¯¼å‡ºè·¯å¾„
kArchivePath=&quot;./ipaOutput/${kSchemeName}.xcarchive&quot;

# ipaå¯¼å‡ºè·¯å¾„
kExport_ipa_Path=&quot;./ipaOutput/${kSchemeName}&quot;

# ä¸åŒçš„æ‰“åŒ…æ–¹å¼è¿™ä¸ªå¯¼å‡ºæ–‡ä»¶ä¸åŒ [è¿™ä¸ªæ–‡ä»¶å¾ˆé‡è¦ï¼Œä»–å†³å®šäº†ä½ çš„åŒ…æ˜¯å¦èƒ½å¤Ÿæ­£å¸¸å¯¼å‡º] 
# ç”¨Xcodeè‡ªå¸¦çš„archiveæ–¹å¼å¯¼å‡ºipaçš„æ—¶å€™ï¼Œè¿™ä¸ªæ–‡ä»¶ä¼šéšä¹‹å¯¼å‡º
kExportOptionsPlist=&quot;./ipaOutput/ExportOptions.plist&quot;

kAppChangelog=&quot;Tips:æˆ‘æ˜¯ç‰ˆæœ¬æ›´æ–°ä¿¡æ¯&quot;
</code></pre>
<h2><a id="%E6%89%93%E5%8C%85%E5%AF%BC%E5%87%BA" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>æ‰“åŒ… &amp;&amp; å¯¼å‡º</h2>
<pre><code class="language-bash"># clean
xcodebuild  clean -configuration &quot;$configuration&quot; -alltargets

# archive project
xcodebuild archive -project &quot;$kProjectName&quot; -scheme &quot;$kSchemeName&quot; -configuration &quot;$kConfiguration&quot; -archivePath &quot;$kArchivePath&quot;

# archive workspace
# #xcodebuild Â archive Â -workspace &quot;$workspaceName&quot; -scheme &quot;$scheme&quot; -configuration Â &quot;$kConfiguration&quot; Â -archivePath &quot;$kArchivePath&quot; Â 

# å¯¼å‡ºipa
xcodebuild -exportArchive -archivePath &quot;$kArchivePath&quot; -exportOptionsPlist &quot;$kExportOptionsPlist&quot; -exportPath &quot;$kExport_ipa_Path&quot;
</code></pre>
<h2><a id="%E4%B8%8A%E4%BC%A0ipa%E5%88%B0%E5%88%86%E5%8F%91%E5%B9%B3%E5%8F%B0" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>ä¸Šä¼ ipaåˆ°åˆ†å‘å¹³å°</h2>
<pre><code class="language-bash"># --------------&gt; æ£€æµ‹IPAå­˜åœ¨å¦
ipa_path=&quot;${kExport_ipa_Path}/${kSchemeName}.ipa&quot;

if [ -f &quot;$ipa_path&quot; ]
	then
		echo &quot;------------ipaå­˜åœ¨ğŸ˜......&quot;
	else
		echo &quot;------------ipaä¸å­˜åœ¨ğŸ˜­......&quot;
		exit 1
fi
</code></pre>
<h3><a id="%E4%B8%8A%E4%BC%A0%E5%88%B0fir" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>ä¸Šä¼ åˆ°fir</h3>
<pre><code class="language-bash"># --------- firm ä¸Šä¼ é…ç½®

echo &quot;è¯·é€‰æ‹©ç™»å½•è´¦æˆ·åï¼š\n 1ï¼‰kael è‡ªå·±çš„firè´¦æˆ·ï¼ˆé»˜è®¤ï¼‰ \n 2ï¼‰å…¬å¸çš„firè´¦æˆ·&quot;

read fir_token

if [[ $fir_token == 2 ]]; then
  #å…¬å¸è´¦å·
  fir_token=&quot;*********&quot;
else
  # è‡ªå·±çš„è´¦å·
  fir_token=&quot;*********&quot;
fi

fir publish ${ipa_path} -T $fir_token -c $kAppChangelog
</code></pre>
<h3><a id="%E4%B8%8A%E4%BC%A0%E5%88%B0pgy" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>ä¸Šä¼ åˆ°pgy</h3>
<pre><code class="language-bash"># -------- pgy ä¸Šä¼ 

echo &quot;------------å‡†å¤‡å‘å¸ƒè’²å…¬è‹±------------&quot;
#&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;è’²å…¬è‹±è´¦å·ä¿¡æ¯é…ç½®
#è’²å…¬è‹±è´¦å·
pgy_API_Key=&quot;*********&quot;
pgy_User_Key=&quot;*********&quot;


# ------&gt; è’²å…¬è‹±å‘å¸ƒ
curl -F &quot;file=@$ipa_path&quot; \
-F &quot;uKey=$pgy_User_Key&quot; \
-F &quot;_api_key=$pgy_API_Key&quot; \
-F &quot;updateDescription=$kAppChangelog&quot; \
https://www.pgyer.com/apiv1/app/upload
</code></pre>
<h2><a id="%E8%84%9A%E6%9C%AC" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>è„šæœ¬</h2>
<pre><code class="language-bash">#!/bin/sh

# å·¥ç¨‹åç§°
kProjectName=&quot;ipa.xcodeproj&quot;

# workspace åç§° å¦‚æœä½¿ç”¨äº†cocopodsç­‰å¯èƒ½éœ€è¦ç”¨å·¥ä½œç©ºé—´æ–¹å¼æ‰“åŒ…
# workspaceName=â€œipa.workspaceâ€

# schemeåç§°
kSchemeName=&quot;ipa&quot;

# target è¿™é‡Œschemeåªå¯¹åº”äº†ä¸€ä¸ªtargetè¿è¡Œï¼›å¦‚æœæœ‰å¤šä¸ªtargetéœ€è¦æŒ‡å®štarget
kTargetName=&quot;ipa&quot;

# APPç¯å¢ƒé…ç½®
kConfiguration=&quot;Release&quot;

# archiveå¯¼å‡ºè·¯å¾„
kArchivePath=&quot;./ipaOutput/${kSchemeName}.xcarchive&quot;

# ipaå¯¼å‡ºè·¯å¾„
kExport_ipa_Path=&quot;./ipaOutput/${kSchemeName}&quot;

# ä¸åŒçš„æ‰“åŒ…æ–¹å¼è¿™ä¸ªå¯¼å‡ºæ–‡ä»¶ä¸åŒ
kExportOptionsPlist=&quot;./ipaOutput/ExportOptions.plist&quot;

kAppChangelog=&quot;Tips:æˆ‘æ˜¯ç‰ˆæœ¬æ›´æ–°ä¿¡æ¯&quot;


# ------------------&gt; æ‰“åŒ…åŒº
# clean
xcodebuild  clean -configuration &quot;$configuration&quot; -alltargets

# archive project
xcodebuild archive -project &quot;$kProjectName&quot; -scheme &quot;$kSchemeName&quot; -configuration &quot;$kConfiguration&quot; -archivePath &quot;$kArchivePath&quot;

# archive workspace
# #xcodebuild Â archive Â -workspace &quot;$workspaceName&quot; -scheme &quot;$scheme&quot; -configuration Â &quot;$kConfiguration&quot; Â -archivePath &quot;$kArchivePath&quot; Â 

# å¯¼å‡ºipa
xcodebuild -exportArchive -archivePath &quot;$kArchivePath&quot; -exportOptionsPlist &quot;$kExportOptionsPlist&quot; -exportPath &quot;$kExport_ipa_Path&quot;


# --------------&gt; æ£€æµ‹IPAå­˜åœ¨å¦
ipa_path=&quot;${kExport_ipa_Path}/${kSchemeName}.ipa&quot;

if [ -f &quot;$ipa_path&quot; ]
	then
		echo &quot;------------ipaå­˜åœ¨ğŸ˜......&quot;
	else
		echo &quot;------------ipaä¸å­˜åœ¨ğŸ˜­......&quot;
		exit 1
fi

# --------- firm ä¸Šä¼ é…ç½®

echo &quot;è¯·é€‰æ‹©ç™»å½•è´¦æˆ·åï¼š\n 1ï¼‰kael è‡ªå·±çš„firè´¦æˆ·ï¼ˆé»˜è®¤ï¼‰ \n 2ï¼‰å…¬å¸çš„firè´¦æˆ·&quot;

read fir_token

if [[ $fir_token == 2 ]]; then
  #å…¬å¸è´¦å·
  fir_token=&quot;*********&quot;
else
  # è‡ªå·±çš„è´¦å·
  fir_token=&quot;*********&quot;
fi

fir publish ${ipa_path} -T $fir_token -c $kAppChangelog

# -------- pgy ä¸Šä¼ 

echo &quot;------------å‡†å¤‡å‘å¸ƒè’²å…¬è‹±------------&quot;
#&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;è’²å…¬è‹±è´¦å·ä¿¡æ¯é…ç½®
#è’²å…¬è‹±è´¦å·
pgy_API_Key=&quot;*********&quot;
pgy_User_Key=&quot;*********&quot;


# ------&gt; è’²å…¬è‹±å‘å¸ƒ
curl -F &quot;file=@$ipa_path&quot; \
-F &quot;uKey=$pgy_User_Key&quot; \
-F &quot;_api_key=$pgy_API_Key&quot; \
-F &quot;updateDescription=$kAppChangelog&quot; \
https://www.pgyer.com/apiv1/app/upload
</code></pre>


			
			
		</div>

	</article>
 
	<article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
		<div class="meta">
			<div class="date">
				<time datetime="2021-10-08T11:02:14+08:00" itemprop="datePublished">2021/10/8</time>
			</div>
			<div class="tags">posted in 
			
			    <a class='category' href='ios.html'>iOS</a>&nbsp;
			 
			</div>
		</div>
		<h1 class="title" itemprop="name"><a href="16336621349772.html" itemprop="url">
		Xcode 11 Xib `_UITextLayoutView` å´©æºƒ</a></h1>
		<div class="entry-content" itemprop="articleBody">
			
			<p>å´©æºƒä¿¡æ¯å¦‚ä¸‹ï¼š</p>
<pre><code class="language-plain_text">*** Terminating app due to uncaught exception 
'NSInvalidUnarchiveOperationException', 
reason: 'Could not instantiate class named _UITextLayoutView because no class named _UITextLayoutView was found; 
the class needs to be defined in source code or linked in from a library (ensure the class is part of the correct target)'
</code></pre>
<p>è§£å†³æ–¹æ¡ˆï¼š</p>
<h2><a id="%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%E4%B8%80" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>è§£å†³æ–¹æ¡ˆ ä¸€</h2>
<p>xibçš„éƒ¨åˆ†è§†å›¾æ”¹ç”¨ç¡¬æ ¸æ‰‹å†™ï¼Œä»¥é¿å‘ã€‚</p>
<h2><a id="%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%E4%BA%8C" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>è§£å†³æ–¹æ¡ˆ äºŒ</h2>
<p><a href="https://developer.apple.com/download/more">ä¸‹è½½å…¶ä»–ç‰ˆæœ¬Xcode ä¼ é€é—¨</a></p>
<h2><a id="%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%E4%B8%89" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>è§£å†³æ–¹æ¡ˆ ä¸‰</h2>
<p>OC é»‘é­”æ³• <code>Runtime</code>ã€‚</p>
<ul>
<li>
<p>åˆ›å»º æ–‡ä»¶ <code>UITextViewWorkaround</code></p>
</li>
<li>
<p>UITextViewWorkaround.h</p>
</li>
</ul>
<pre><code class="language-plain_text">#import &lt;Foundation/Foundation.h&gt;

@interface UITextViewWorkaround : NSObject
+ (void)executeWorkaround; 
@end

</code></pre>
<ul>
<li>UITextViewWorkaround.m</li>
</ul>
<pre><code class="language-plain_text">#import &quot;UITextViewWorkaround.h&quot;
#import  &lt;objc/runtime.h&gt;



@implementation UITextViewWorkaround

+ (void)executeWorkaround {
    if (@available(iOS 13.2, *)) {

    }
    else {
        const char *className = &quot;_UITextLayoutView&quot;;
        Class cls = objc_getClass(className);
        if (cls == nil) {
            cls = objc_allocateClassPair([UIView class], className, 0);
            objc_registerClassPair(cls);
#if DEBUG
            printf(&quot;added %s dynamically\n&quot;, className);
#endif
        }
    }
}

@end
</code></pre>
<ul>
<li>ä½¿ç”¨è¯¥é™æ€æ–¹æ³•</li>
</ul>
<pre><code class="language-plain_text">#import &quot;UITextViewWorkaround.h&quot;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
    // Override point for customization after application launch.

    [UITextViewWorkaround executeWorkaround];
    return yes;
}
</code></pre>
<ul>
<li>swift ç‰ˆæœ¬è¯·å®¢è§‚æ”¶ä¸‹ï¼š</li>
</ul>
<pre><code class="language-plain_text">import UIKit

@objc
class UITextViewWorkaround : NSObject {

    static func executeWorkaround() {
        if #available(iOS 13.2, *) {
        } else {
            let className = &quot;_UITextLayoutView&quot;
            let theClass = objc_getClass(className)
            if theClass == nil {
                let classPair: AnyClass? = objc_allocateClassPair(UIView.self, className, 0)
                objc_registerClassPair(classPair!)
            }
        }
    }

}
</code></pre>
<p><a href="https://stackoverflow.com/questions/58657087/after-upgrading-to-xcode-11-2-from-xcode-11-1-app-crashes-due-to-uitextlayoutv">å‚è€ƒ</a></p>


			
			
		</div>

	</article>
 
	<article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
		<div class="meta">
			<div class="date">
				<time datetime="2021-10-08T10:58:47+08:00" itemprop="datePublished">2021/10/8</time>
			</div>
			<div class="tags">posted in 
			
			    <a class='category' href='ios.html'>iOS</a>&nbsp;
			 
			</div>
		</div>
		<h1 class="title" itemprop="name"><a href="16336619273999.html" itemprop="url">
		ios ä¹‹ è‡ªåŠ¨æ‰“åŒ… ä¸€é”®æ‰“åŒ…è„šæœ¬ ã€bashä¼˜åŒ–ç‰ˆæœ¬ã€‘</a></h1>
		<div class="entry-content" itemprop="articleBody">
			
			<h2><a id="%E9%80%89%E6%8B%A9%E6%89%93%E5%8C%85scheme" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>é€‰æ‹©æ‰“åŒ…scheme</h2>
<pre><code class="language-bash"># é€‰æ‹©æ‰“åŒ…ç¯å¢ƒ
function selectedScheme() {
  #statements
  echo &quot;è¯·é€‰æ‹©æ‰“åŒ…å¯¹è±¡: \n 1) GaoKao(**é«˜è€ƒ) \n 2) Zhongkao(**ä¸­è€ƒ)&quot;
  read app_scheme

  if [[ $app_scheme == 1 ]]; then
    echo &quot;æ‚¨é€‰æ‹©çš„æ˜¯ï¼šGaoKao(**é«˜è€ƒ)&quot;
    app_scheme=&quot;GaoKao&quot;
  elif [[ $app_scheme == 2 ]]; then
    echo &quot;æ‚¨é€‰æ‹©çš„æ˜¯ï¼šZhongkao(**ä¸­è€ƒ)&quot;
    app_scheme=&quot;Zhongkao&quot;
  else
    selectedScheme
  fi
}
</code></pre>
<h2><a id="%E9%80%89%E6%8B%A9%E6%89%93%E5%8C%85%E7%8E%AF%E5%A2%83" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>é€‰æ‹©æ‰“åŒ…ç¯å¢ƒ</h2>
<pre><code class="language-bash">function selectedConfiguration() {
  #statements
  echo &quot;-- ğŸ˜ --\n&quot;
  echo &quot;--\n&quot;
  echo &quot;è¯·é€‰æ‹©æ‰“åŒ…ç¯å¢ƒ:\n 1)Release \n 2)LXRelease_dev \n 3)LXRelease_kfc \n 4)LXRelease_tsl&quot;

  read configuration

  if [[ $configuration == 1 ]]; then
    echo &quot;æ‚¨é€‰æ‹©çš„æ˜¯Releaseç¯å¢ƒ&quot;
    configuration=&quot;Release&quot;
  elif [[ $configuration == 2 ]]; then
    echo &quot;æ‚¨é€‰æ‹©çš„æ˜¯LXRelease_devç¯å¢ƒ&quot;
    configuration=&quot;LXRelease_dev&quot;
  elif [[ $configuration == 3 ]]; then
    echo &quot;æ‚¨é€‰æ‹©çš„æ˜¯LXRelease_kfcç¯å¢ƒ&quot;
    configuration=&quot;LXRelease_kfc&quot;
  elif [[ $configuration == 4 ]]; then
    echo &quot;æ‚¨é€‰æ‹©çš„æ˜¯LXRelease_tslç¯å¢ƒ&quot;
    configuration=&quot;LXRelease_tsl&quot;
  else
    selectedConfiguration
  fi
}
</code></pre>
<h2><a id="%E8%AF%BB%E5%8F%96%E6%9B%B4%E6%96%B0%E4%BF%A1%E6%81%AF" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>è¯»å–æ›´æ–°ä¿¡æ¯</h2>
<pre><code class="language-bash">function readUpdateInfo() {
  echo &quot;-\n&quot;
  echo &quot;--\n&quot;
  echo &quot;è¯·è¾“å…¥æ‚¨å½“å‰ç‰ˆæœ¬æ›´æ–°ä¿¡æ¯:&quot;

  read update_info
}
</code></pre>
<h2><a id="%E6%89%93%E5%8D%B0%E6%89%93%E5%8C%85%E4%BF%A1%E6%81%AF" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>æ‰“å°æ‰“åŒ…ä¿¡æ¯</h2>
<pre><code class="language-bash">function logPackageInfo() {
  echo &quot;æ‰“åŒ…ä¿¡æ¯----------&gt;:\n&quot;
  echo &quot;æ‰“åŒ…schemeæ˜¯   --&gt;: ${app_scheme}&quot;
  echo &quot;æ‚¨é€‰æ‹©çš„æ˜¯     --&gt;: ${configuration}&quot;
  echo &quot;ç‰ˆæœ¬æ›´æ–°ä¿¡æ¯   --&gt;: ${update_info}&quot;
}
</code></pre>
<h2><a id="%E4%B8%8A%E4%BC%A0dsym%E5%88%B0bugly%E8%BF%9B%E8%A1%8C%E5%88%86%E6%9E%90" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>ä¸Šä¼ dSYMåˆ°buglyè¿›è¡Œåˆ†æ</h2>
<pre><code class="language-bash"># --------------------&gt;&gt; ä¸Šä¼  dSYM æ–‡ä»¶
function uploaddSYMFile() {
  #statements
  echo &quot;bugly --- start......&quot;

  output_file_name=&quot;&quot;
  bugly_appName=&quot;&quot;
  bugly_configName=&quot;&quot;

  if [[ ${app_scheme} = &quot;GaoKao&quot; ]]; then
    bugly_appName=&quot;**é«˜è€ƒ&quot;
  elif [[ ${app_scheme} == &quot;Zhongkao&quot; ]]; then
    bugly_appName=&quot;**ä¸­è€ƒ&quot;
  fi

  if [[ ${configuration} = &quot;LXRelease&quot; ]]; then
    bugly_configName=&quot;&quot;
  elif [[ ${configuration} = &quot;LXRelease_dev&quot; ]]; then
    bugly_configName=&quot;dev&quot;
  elif [[ ${configuration} = &quot;LXRelease_tsl&quot; ]]; then
    bugly_configName=&quot;tsl&quot;
  elif [[ ${configuration} = &quot;LXRelease_kfc&quot; ]]; then
    bugly_configName=&quot;kfc&quot;
  fi

  output_file_name=&quot;${app_scheme}_${configuration}&quot;

  bugly_dsym_zip_path=&quot;./AppOutput/${output_file_name}.app.dSYM.zip&quot;

  echo &quot;kael ------rm&quot;
  # rm &quot;./AppOutput/dsym_upload/&quot;
  find &quot;./AppOutput/dsym_upload/&quot; -name &quot;*.dSYM&quot; | xargs rm -rf
  find &quot;./AppOutput/&quot; -name &quot;dsym_upload.zip&quot; | xargs rm -rf
  echo &quot;kael ------rm -- end&quot;

  # è§£å‹æ–‡ä»¶
  echo &quot;kael ------unzip&quot;
  echo &quot;path -- $bugly_dsym_zip_path&quot;
  unzip ${bugly_dsym_zip_path} -d &quot;./AppOutput/dsym_upload/&quot;

  bugly_java_path=&quot;./buglySymboliOS/buglySymboliOS.jar&quot;
  bugly_dsym_path=&quot;./AppOutput/dsym_upload/&quot;
  echo &quot;${bugly_dsym_path}&quot;

  echo &quot;kael ------upload start&quot;
  java -jar $bugly_java_path -i $bugly_dsym_path -dsym -u -id 900058462 -key f8V5dgJO5em0CPPk -package com.lexue.lexuegaokao -version 3.3.3

}
</code></pre>
<h2><a id="%E6%99%AE%E9%80%9A%E6%89%93%E5%8C%85" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>æ™®é€šæ‰“åŒ…</h2>
<pre><code class="language-bash"># --------------------&gt;&gt;  æ™®é€šæ‰“åŒ…ä»»åŠ¡
function normal_archive() {
  #statements
  selectedScheme
  # # ç­‰å¾… æ²‰ç¡
  # sleep 0.5s
  # é€‰æ‹©æ‰“åŒ…ç¯å¢ƒ
  selectedConfiguration
  # ç­‰å¾… æ²‰ç¡
  sleep 0.5s
  # è¯»å–ç‰ˆæœ¬æ›´æ–°ä¿¡æ¯
  readUpdateInfo
  # ç­‰å¾… æ²‰ç¡
  sleep 0.5s
  # æ‰“å°æ›´æ–°ä¿¡æ¯
  logPackageInfo

  fastlane ipa_release scheme:$app_scheme configuration:$configuration update_info:$update_info

  logPackageInfo

  uploaddSYMFile

}
</code></pre>
<h2><a id="%E5%A4%9A%E7%8E%AF%E5%A2%83%E5%A4%9Ascheme%E6%89%93%E5%8C%85" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>å¤šç¯å¢ƒ å¤šscheme æ‰“åŒ…</h2>
<pre><code class="language-bash"># --------------------&gt;&gt; å•ä¸ªæ‰“åŒ…ä»»åŠ¡
function one_serial_archive() {
  app_scheme=$1
  configuration=$2
  update_info=$3
  #æ‰“å°ä¿¡æ¯
  logPackageInfo
  # æ‰“åŒ…å¯¼å‡º
  fastlane ipa_release scheme:$app_scheme configuration:$configuration update_info:$update_info
  # æ‰“å°ä¿¡æ¯
  logPackageInfo
  # ä¸Šä¼ dSYM
  uploaddSYMFile
} 
# --------------------&gt;&gt; å¤šä¸ªæ‰“åŒ…ä»»åŠ¡
function serial_archive() {
  readUpdateInfo

  # ä¸­è€ƒ
  one_serial_archive &quot;Zhongkao&quot; &quot;Release&quot; $update_info
  one_serial_archive &quot;Zhongkao&quot; &quot;LXRelease_dev&quot; $update_info
  one_serial_archive &quot;Zhongkao&quot; &quot;LXRelease_kfc&quot; $update_info
  one_serial_archive &quot;Zhongkao&quot; &quot;LXRelease_tsl&quot; $update_info
  # é«˜è€ƒ
  one_serial_archive &quot;GaoKao&quot; &quot;Release&quot; $update_info
  one_serial_archive &quot;GaoKao&quot; &quot;LXRelease_dev&quot; $update_info
  one_serial_archive &quot;GaoKao&quot; &quot;LXRelease_kfc&quot; $update_info
  one_serial_archive &quot;GaoKao&quot; &quot;LXRelease_tsl&quot; $update_info
}
</code></pre>
<h2><a id="%E8%84%9A%E6%9C%AC%E4%BD%BF%E7%94%A8" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>è„šæœ¬ä½¿ç”¨</h2>
<pre><code class="language-bash"># æ‰“åŒ…ä¸€ç³»åˆ—ç¯å¢ƒçš„åŒ…
serial_archive
</code></pre>
<p>å‘½ä»¤è¡Œå·¥å…·ä¸­è¾“å…¥<code>sh ipa.sh</code>å³å¯</p>
<h2><a id="%E6%96%87%E4%BB%B6%E5%85%B1%E4%BA%AB" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>æ–‡ä»¶å…±äº«</h2>
<p>bulyæ–‡ä»¶é“¾æ¥:<a href="https://pan.baidu.com/s/13jaP6Jggp6DcDwqXYeEjHg">https://pan.baidu.com/s/13jaP6Jggp6DcDwqXYeEjHg</a>  å¯†ç :lowx
JDK(javaç¯å¢ƒå®‰è£…æ–‡ä»¶)é“¾æ¥:<a href="https://pan.baidu.com/s/1NtGdP0cANQz7TtyYU2mycg">https://pan.baidu.com/s/1NtGdP0cANQz7TtyYU2mycg</a>  å¯†ç :f6af</p>


			
			
		</div>

	</article>
 
	<article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
		<div class="meta">
			<div class="date">
				<time datetime="2021-10-08T10:58:08+08:00" itemprop="datePublished">2021/10/8</time>
			</div>
			<div class="tags">posted in 
			
			    <a class='category' href='ios.html'>iOS</a>&nbsp;
			 
			</div>
		</div>
		<h1 class="title" itemprop="name"><a href="16336618881036.html" itemprop="url">
		iPad æ¨ªå±å¯åŠ¨ ç•Œé¢é”™ä¹±</a></h1>
		<div class="entry-content" itemprop="articleBody">
			
			<blockquote>
<p>ç°è±¡ï¼šiPad å¼€å¯å±å¹•æ—‹è½¬ï¼Œæ¨ªå±å¯åŠ¨APPï¼ŒæŸäº›ç‰¹æ®Šæƒ…å†µä¸‹ï¼ŒAPPä¼šå˜æˆæ¨ªå±APPã€‚æ­å–œä½ ï¼Œä¸­å¥–äº†ï¼Œè¿™æ—¶å€™å³ä½¿ä½ ViewControllerçš„æ§åˆ¶å±å¹•æ—‹è½¬çš„ä¸‰ä¸ªä»£ç†æ–¹æ³•éƒ½åªæ”¯æŒç«–å±ï¼Œä½ çš„APPä¹Ÿå¯èƒ½æ˜¯é”™ä¹±çš„ã€‚</p>
</blockquote>
<ul>
<li>ç¥å¥‡çš„è§£å†³æ–¹æ¡ˆï¼š
<ul>
<li><code>mainScreen</code>æ·»åŠ ä¸€ä¸ªwindowï¼Œ<code>makeKeyAndVisible</code></li>
<li>ç„¶å<code>resignKeyWindow</code></li>
</ul>
</li>
</ul>
<pre><code class="language-plain_text">- (void)showMagicWindow{
    UIWindow *aawindow = [[UIWindow alloc] initWithFrame:[UIScreen mainScreen].bounds];
       aawindow.backgroundColor = [UIColor clearColor];
       aawindow.windowLevel = UIWindowLevelAlert;
       [aawindow makeKeyAndVisible];
    [aawindow resignKeyWindow];
       aawindow.hidden = YES;
       aawindow = nil;
}
</code></pre>
<p>å“ªä½å¤§ç¥èƒ½è§£é‡Šä¸‹ï¼Ÿ</p>


			
			
		</div>

	</article>
 
	<article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
		<div class="meta">
			<div class="date">
				<time datetime="2021-10-08T10:57:57+08:00" itemprop="datePublished">2021/10/8</time>
			</div>
			<div class="tags">posted in 
			
			    <a class='category' href='ios.html'>iOS</a>&nbsp;
			 
			</div>
		</div>
		<h1 class="title" itemprop="name"><a href="16336618777988.html" itemprop="url">
		é’‰é’‰æœºå™¨äºº</a></h1>
		<div class="entry-content" itemprop="articleBody">
			
			<pre><code class="language-plain_text">curl 'https://oapi.dingtalk.com/robot/send?access_token=8c022fd6586126b80994e1b551ce31ab6ee56ed045c47c51c8ab0192c723cb1e' \
   -H 'Content-Type: application/json' \
   -d '{
			&quot;msgtype&quot;: &quot;text&quot;,
			&quot;text&quot;: {
             &quot;content&quot;: &quot;é«˜è€ƒiOSæœ€æ–°å®‰è£…åŒ… ipa--https://fir.im/lgk&quot;
        },
			&quot;at&quot;: {
        	&quot;atMobiles&quot;: [
                &quot;15718808963&quot;,
                &quot;13241411941&quot;,
                &quot;13466778405&quot;,
                &quot;13716307872&quot;
        ],
        &quot;isAtAll&quot;: false
		}
      }'
</code></pre>
<p>å‚æ•°è¯´æ˜ï¼š</p>
<table>
<thead>
<tr>
<th>å‚æ•°</th>
<th>å‚æ•°ç±»å‹</th>
<th>å¿…é¡»</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>msgtype</td>
<td>String</td>
<td>æ˜¯</td>
<td>æ¶ˆæ¯ç±»å‹ï¼Œæ­¤æ—¶å›ºå®šä¸ºï¼štext</td>
</tr>
<tr>
<td>content</td>
<td>String</td>
<td>æ˜¯</td>
<td>æ¶ˆæ¯å†…å®¹</td>
</tr>
<tr>
<td>atMobiles</td>
<td>Array</td>
<td>å¦</td>
<td>è¢«@äººçš„æ‰‹æœºå·(åœ¨contenté‡Œæ·»åŠ @äººçš„æ‰‹æœºå·)</td>
</tr>
<tr>
<td>isAtAll</td>
<td>bool</td>
<td>å¦</td>
<td>@æ‰€æœ‰äººæ—¶ï¼štrueï¼Œå¦åˆ™ä¸ºï¼šfalse</td>
</tr>
</tbody>
</table>
<pre><code class="language-bash">#!/bin/sh


# -----------------&gt; åŸºæœ¬ä¿¡æ¯é…ç½®åŒº
# å·¥ç¨‹åç§°
kProjectName=&quot;ipa.xcodeproj&quot;
# schemeåç§°
kSchemeName=&quot;ipa&quot;
# target è¿™é‡Œschemeåªå¯¹åº”äº†ä¸€ä¸ªtargetè¿è¡Œï¼›å¦‚æœæœ‰å¤šä¸ªtargetéœ€è¦åˆ¶å®štarget
kTargetName=&quot;ipa&quot;
# APPç¯å¢ƒé…ç½®
kConfiguration=&quot;Release&quot;
# archiveå¯¼å‡ºè·¯å¾„
kArchivePath=&quot;./ipaOutput/${kSchemeName}.xcarchive&quot;
# ipaå¯¼å‡ºè·¯å¾„
kExport_ipa_Path=&quot;./ipaOutput/${kSchemeName}&quot;
# ä¸åŒçš„æ‰“åŒ…æ–¹å¼è¿™ä¸ªå¯¼å‡ºæ–‡ä»¶ä¸åŒ
kExportOptionsPlist=&quot;./ipaOutput/ExportOptions.plist&quot;

kAppChangelog=&quot;kael-æˆ‘æ˜¯ç‰ˆæœ¬æ›´æ–°ä¿¡æ¯&quot;

# ------------------&gt; æ‰“åŒ…åŒº
# clean
xcodebuild  clean -configuration &quot;$configuration&quot; -alltargets

# archive project
xcodebuild archive -project &quot;$kProjectName&quot; -scheme &quot;$kSchemeName&quot; -configuration &quot;$kConfiguration&quot; -archivePath &quot;$kArchivePath&quot;

# archive workspace
# #xcodebuild Â archive Â -workspace &quot;$workspaceName&quot; -scheme &quot;$scheme&quot; -configuration Â &quot;$kConfiguration&quot; Â -archivePath &quot;$kArchivePath&quot; Â 

# å¯¼å‡ºipa
xcodebuild -exportArchive -archivePath &quot;$kArchivePath&quot; -exportOptionsPlist &quot;$kExportOptionsPlist&quot; -exportPath &quot;$kExport_ipa_Path&quot;

# --------------&gt; æ£€æµ‹IPAå­˜åœ¨å¦
ipa_path=&quot;${kExport_ipa_Path}/${kSchemeName}.ipa&quot;

if [ -f &quot;$ipa_path&quot; ]
	then
		echo &quot;------------ipaå­˜åœ¨ğŸ˜......&quot;
	else
		echo &quot;------------ipaä¸å­˜åœ¨ğŸ˜­......&quot;
		exit 1
fi

# --------- firm ä¸Šä¼ é…ç½®

echo &quot;è¯·é€‰æ‹©ç™»å½•è´¦æˆ·åï¼š\n 1ï¼‰kael è‡ªå·±çš„firè´¦æˆ·ï¼ˆé»˜è®¤ï¼‰ \n 2ï¼‰å…¬å¸çš„firè´¦æˆ·&quot;

read fir_token

if [[ $fir_token == 2 ]]; then
  #å…¬å¸è´¦å·
  fir_token=&quot;bab4a513ef576e49dceb3abe9e9b028a&quot;
else
  # è‡ªå·±çš„è´¦å·
  fir_token=&quot;b3bb54eca50a2545d0a6044cb19a616a&quot;
fi
# é’‰é’‰æœºå™¨äººğŸ¤–
DD_access_token=&quot;8c022fd6586126b80994e1b551ce31ab6ee56ed045c47c51c8ab0192c723cb1e&quot;

fir publish ${ipa_path} -T $fir_token -c $kAppChangelog -D $DD_access_token

# -------- pgy ä¸Šä¼ 

echo &quot;------------å‡†å¤‡å‘å¸ƒè’²å…¬è‹±------------&quot;
#&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;è’²å…¬è‹±
#è’²å…¬è‹±è´¦å·
pgy_API_Key=&quot;ed34bd49e37a2a2943918d18b1489a71&quot;
pgy_User_Key=&quot;878381aa4356d997c1c4c7bb27649807&quot;


#è’²å…¬è‹±å‘å¸ƒ
curl -F &quot;file=@$ipa_path&quot; \
-F &quot;uKey=$pgy_User_Key&quot; \
-F &quot;_api_key=$pgy_API_Key&quot; \
-F &quot;updateDescription=$kAppChangelog&quot; \
https://www.pgyer.com/apiv1/app/upload


#é’‰é’‰ç¾¤é€šçŸ¥ç›¸å…³äººå‘˜
curl 'https://oapi.dingtalk.com/robot/send?access_token=8c022fd6586126b80994e1b551ce31ab6ee56ed045c47c51c8ab0192c723cb1e' \
   -H 'Content-Type: application/json' \
   -d '{
            &quot;msgtype&quot;: &quot;text&quot;,
            &quot;text&quot;: {
             &quot;content&quot;: &quot;é«˜è€ƒiOSæœ€æ–°å®‰è£…åŒ… ipa&quot;
        },
            &quot;at&quot;: {
            &quot;atMobiles&quot;: [
                &quot;15718808963&quot;,
                &quot;13241411941&quot;,
                &quot;13466778405&quot;,
                &quot;13716307872&quot;
        ],
        &quot;isAtAll&quot;: false
        }
      }'

</code></pre>


			
			
		</div>

	</article>
  

</div>
<nav id="pagenavi">
	 <a class="prev" href="ios.html">Prev</a>  
	 <a class="next" href="ios_2.html">Next</a> 
	<div class="center"><a href="archives.html">Blog Archives</a></div>

</nav>

</div>



        </div>
			<footer id="footer" class="inner">Copyright &copy; 2014
Powered by <a target="_blank" href="http://www.mweb.im">MWeb</a> &nbsp;&nbsp; 
Theme by <a href="http://shashankmehta.in/archive/2012/greyshade.html">Shashank Mehta</a>
      </footer>
		</div>
	</div>



  














<style type="text/css">
figure{margin: 1em 0;padding: 0;}
  figcaption{text-align:center;}

/* PrismJS 1.14.0
https://prismjs.com/download.html#themes=prism-coy&languages=markup+css+clike+javascript */
/**
 * prism.js Coy theme for JavaScript, CoffeeScript, CSS and HTML
 * Based on https://github.com/tshedor/workshop-wp-theme (Example: http://workshop.kansan.com/category/sessions/basics or http://workshop.timshedor.com/category/sessions/basics);
 * @author Tim  Shedor
 */

code[class*="language-"],
pre[class*="language-"] {
  color: black;
  background: none;
  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  word-wrap: normal;
  line-height: 1.5;

  -moz-tab-size: 4;
  -o-tab-size: 4;
  tab-size: 4;

  -webkit-hyphens: none;
  -moz-hyphens: none;
  -ms-hyphens: none;
  hyphens: none;
}

/* Code blocks */
pre[class*="language-"] {
  position: relative;
  margin: .5em 0;
  overflow: visible;
  padding: 0;
}
pre[class*="language-"]>code {
  position: relative;
  border-left: 10px solid #358ccb;
  box-shadow: -1px 0px 0px 0px #358ccb, 0px 0px 0px 1px #dfdfdf;
  background-color: #fdfdfd;
  background-image: linear-gradient(transparent 50%, rgba(69, 142, 209, 0.04) 50%);
  background-size: 3em 3em;
  background-origin: content-box;
  background-attachment: local;
}

code[class*="language"] {
  max-height: inherit;
  height: inherit;
  padding: 0 1em;
  display: block;
  overflow: auto;
}

/* Margin bottom to accomodate shadow */
:not(pre) > code[class*="language-"],
pre[class*="language-"] {
  background-color: #fdfdfd;
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
  margin-bottom: 1em;
}

/* Inline code */
:not(pre) > code[class*="language-"] {
  position: relative;
  padding: .2em;
  border-radius: 0.3em;
  color: #c92c2c;
  border: 1px solid rgba(0, 0, 0, 0.1);
  display: inline;
  white-space: normal;
}

pre[class*="language-"]:before,
pre[class*="language-"]:after {
  content: '';
  z-index: -2;
  display: block;
  position: absolute;
  bottom: 0.75em;
  left: 0.18em;
  width: 40%;
  height: 20%;
  max-height: 13em;
  box-shadow: 0px 13px 8px #979797;
  -webkit-transform: rotate(-2deg);
  -moz-transform: rotate(-2deg);
  -ms-transform: rotate(-2deg);
  -o-transform: rotate(-2deg);
  transform: rotate(-2deg);
}

:not(pre) > code[class*="language-"]:after,
pre[class*="language-"]:after {
  right: 0.75em;
  left: auto;
  -webkit-transform: rotate(2deg);
  -moz-transform: rotate(2deg);
  -ms-transform: rotate(2deg);
  -o-transform: rotate(2deg);
  transform: rotate(2deg);
}

.token.comment,
.token.block-comment,
.token.prolog,
.token.doctype,
.token.cdata {
  color: #7D8B99;
}

.token.punctuation {
  color: #5F6364;
}

.token.property,
.token.tag,
.token.boolean,
.token.number,
.token.function-name,
.token.constant,
.token.symbol,
.token.deleted {
  color: #c92c2c;
}

.token.selector,
.token.attr-name,
.token.string,
.token.char,
.token.function,
.token.builtin,
.token.inserted {
  color: #2f9c0a;
}

.token.operator,
.token.entity,
.token.url,
.token.variable {
  color: #a67f59;
  background: rgba(255, 255, 255, 0.5);
}

.token.atrule,
.token.attr-value,
.token.keyword,
.token.class-name {
  color: #1990b8;
}

.token.regex,
.token.important {
  color: #e90;
}

.language-css .token.string,
.style .token.string {
  color: #a67f59;
  background: rgba(255, 255, 255, 0.5);
}

.token.important {
  font-weight: normal;
}

.token.bold {
  font-weight: bold;
}
.token.italic {
  font-style: italic;
}

.token.entity {
  cursor: help;
}

.namespace {
  opacity: .7;
}

@media screen and (max-width: 767px) {
  pre[class*="language-"]:before,
  pre[class*="language-"]:after {
    bottom: 14px;
    box-shadow: none;
  }

}

/* Plugin styles */
.token.tab:not(:empty):before,
.token.cr:before,
.token.lf:before {
  color: #e0d7d1;
}

/* Plugin styles: Line Numbers */
pre[class*="language-"].line-numbers.line-numbers {
  padding-left: 0;
}

pre[class*="language-"].line-numbers.line-numbers code {
  padding-left: 3.8em;
}

pre[class*="language-"].line-numbers.line-numbers .line-numbers-rows {
  left: 0;
}

/* Plugin styles: Line Highlight */
pre[class*="language-"][data-line] {
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 0;
}
pre[data-line] code {
  position: relative;
  padding-left: 4em;
}
pre .line-highlight {
  margin-top: 0;
}

pre[class*="language-"].line-numbers {
    position: relative;
    padding-left: 3.8em;
    counter-reset: linenumber;
}

pre[class*="language-"].line-numbers > code {
    position: relative;
    white-space: inherit;
}

.line-numbers .line-numbers-rows {
    position: absolute;
    pointer-events: none;
    top: 0;
    font-size: 100%;
    left: -3.8em;
    width: 3em; /* works for line-numbers below 1000 lines */
    letter-spacing: -1px;
    border-right: 1px solid #999;

    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;

}

    .line-numbers-rows > span {
        pointer-events: none;
        display: block;
        counter-increment: linenumber;
    }

        .line-numbers-rows > span:before {
            content: counter(linenumber);
            color: #999;
            display: block;
            padding-right: 0.8em;
            text-align: right;
        }

</style>
  
    


</body>
</html>